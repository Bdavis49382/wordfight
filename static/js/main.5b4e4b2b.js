/*! For license information please see main.5b4e4b2b.js.LICENSE.txt */
!function(){"use strict";var e={463:function(e,t,n){var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),_=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),I=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var M,U=Object.assign;function F(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var V=!1;function j(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function z(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=j(e.type,!1);case 11:return e=j(e.type.render,!1);case 1:return e=j(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case _:return"Portal";case S:return"Profiler";case x:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case I:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===x?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return U({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function J(e,t){$(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return U({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function ae(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ye=U({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,Ee=null,xe=null;function Se(e){if(e=ki(e)){if("function"!==typeof _e)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),_e(e.stateNode,e.type,t))}}function Te(e){Ee?xe?xe.push(e):xe=[e]:Ee=e}function Ie(){if(Ee){var e=Ee,t=xe;if(xe=Ee=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ce(e,t){return e(t)}function Ne(){}var Ae=!1;function Re(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ce(e,t,n)}finally{Ae=!1,(null!==Ee||null!==xe)&&(Ne(),Ie())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Oe=!1;if(l)try{var De={};Object.defineProperty(De,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(le){Oe=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Ue=null,Fe=!1,Ve=null,je={onError:function(e){Me=!0,Ue=e}};function ze(e,t,n,r,i,a,o,u,s){Me=!1,Ue=null,Le.apply(je,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(Be(e)!==e)throw Error(a(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return He(i),e;if(o===r)return He(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Xe=i.unstable_requestPaint,$e=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,_t,Et,xt,St,Tt=!1,It=[],Ct=null,Nt=null,At=null,Rt=new Map,Pt=new Map,Ot=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ut(e){var t=gi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void St(e.priority,(function(){Et(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Vt(e,t,n){Ft(e)&&n.delete(t)}function jt(){Tt=!1,null!==Ct&&Ft(Ct)&&(Ct=null),null!==Nt&&Ft(Nt)&&(Nt=null),null!==At&&Ft(At)&&(At=null),Rt.forEach(Vt),Pt.forEach(Vt)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,jt)))}function Bt(e){function t(t){return zt(t,e)}if(0<It.length){zt(It[0],e);for(var n=1;n<It.length;n++){var r=It[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&zt(Ct,e),null!==Nt&&zt(Nt,e),null!==At&&zt(At,e),Rt.forEach(t),Pt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Ut(n),null===n.blockedOn&&Ot.shift()}var qt=b.ReactCurrentBatchConfig,Ht=!0;function Wt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=1,Gt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Kt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=4,Gt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Gt(e,t,n,r){if(Ht){var i=Yt(e,t,n,r);if(null===i)Hr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return At=Mt(At,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Rt.set(a,Mt(Rt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Pt.set(a,Mt(Pt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&wt(a),null===(a=Yt(e,t,n,r))&&Hr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=gi(e=we(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var $t=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in $t?$t.value:$t.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return U(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=U({},cn,{view:0,detail:0}),hn=an(fn),dn=U({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),pn=an(dn),vn=an(U({},dn,{dataTransfer:0})),mn=an(U({},fn,{relatedTarget:0})),yn=an(U({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=U({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),bn=an(U({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=En[e])&&!!t[e]}function Sn(){return xn}var Tn=U({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),In=an(Tn),Cn=an(U({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=an(U({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),An=an(U({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=U({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=an(Rn),On=[9,13,27,32],Dn=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Un=l&&(!Dn||Ln&&8<Ln&&11>=Ln),Fn=String.fromCharCode(32),Vn=!1;function jn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Wn(e,t,n,r){Te(r),0<(t=Kr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Gn=null;function Qn(e){Fr(e,0)}function Yn(e){if(G(bi(e)))return e}function Xn(e,t){if("change"===e)return t}var $n=!1;if(l){var Jn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;$n=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Gn=Kn=null)}function nr(e){if("value"===e.propertyName&&Yn(Gn)){var t=[];Wn(t,Gn,e,we(e)),Re(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Gn)}function ar(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,gr=null,kr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Kr(yr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},Er={},xr={};function Sr(e){if(Er[e])return Er[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in xr)return Er[e]=n[t];return e}l&&(xr=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Tr=Sr("animationend"),Ir=Sr("animationiteration"),Cr=Sr("animationstart"),Nr=Sr("transitionend"),Ar=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Ar.set(e,t),s(t,[e])}for(var Or=0;Or<Rr.length;Or++){var Dr=Rr[Or];Pr(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Pr(Tr,"onAnimationEnd"),Pr(Ir,"onAnimationIteration"),Pr(Cr,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Ur(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(ze.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Ue;Me=!1,Ue=null,Fe||(Fe=!0,Ve=l)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Ur(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Ur(i,u,c),a=s}}}if(Fe)throw e=Ve,Fe=!1,Ve=null,e}function Vr(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function jr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[zr]){e[zr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||jr(t,!1,e),jr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,jr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Xt(t)){case 1:var i=Wt;break;case 4:i=Kt;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}Re((function(){var r=a,i=we(n),o=[];e:{var u=Ar.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=In;break;case"focusin":c="focus",s=mn;break;case"focusout":c="blur",s=mn;break;case"beforeblur":case"afterblur":s=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Nn;break;case Tr:case Ir:case Cr:s=yn;break;case Nr:s=An;break;case"scroll":s=hn;break;case"wheel":s=Pn;break;case"copy":case"cut":case"paste":s=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Cn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Pe(p,h))&&l.push(Wr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:bi(s),d=null==c?u:bi(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,gi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Gr(d))p++;for(d=0,v=h;v;v=Gr(v))d++;for(;0<p-d;)l=Gr(l),p--;for(;0<d-p;)h=Gr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Gr(l),h=Gr(h)}l=null}else l=null;null!==s&&Qr(o,u,s,l,!1),null!==c&&null!==f&&Qr(o,f,c,l,!0)}if("select"===(s=(u=r?bi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var m=Xn;else if(Hn(u))if($n)m=or;else{m=ir;var y=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(m=ar);switch(m&&(m=m(e,r))?Wn(o,m,n,i):(y&&y(e,u,r),"focusout"===e&&(y=u._wrapperState)&&y.controlled&&"number"===u.type&&ee(u,"number",u.value)),y=r?bi(r):window,e){case"focusin":(Hn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,gr=null);break;case"focusout":gr=yr=mr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,br(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":br(o,n,i)}var g;if(Dn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Bn?jn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Un&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Bn&&(g=en()):(Jt="value"in($t=i)?$t.value:$t.textContent,Bn=!0)),0<(y=Kr(r,k)).length&&(k=new bn(k,e,null,n,i),o.push({event:k,listeners:y}),g?k.data=g:null!==(g=zn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Vn=!0,Fn);case"textInput":return(e=t.data)===Fn&&Vn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!Dn&&jn(e,t)?(e=en(),Zt=Jt=$t=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Un&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Fr(o,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Pe(e,n))&&r.unshift(Wr(e,a,i)),null!=(a=Pe(e,t))&&r.push(Wr(e,a,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Pe(n,a))&&o.unshift(Wr(n,s,u)):i||null!=(s=Pe(n,a))&&o.push(Wr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function $r(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Xr,"")}function Jr(e,t,n){if(t=$r(t),$r(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,mi="__reactListeners$"+fi,yi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var _i=[],Ei=-1;function xi(e){return{current:e}}function Si(e){0>Ei||(e.current=_i[Ei],_i[Ei]=null,Ei--)}function Ti(e,t){Ei++,_i[Ei]=e.current,e.current=t}var Ii={},Ci=xi(Ii),Ni=xi(!1),Ai=Ii;function Ri(e,t){var n=e.type.contextTypes;if(!n)return Ii;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Pi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oi(){Si(Ni),Si(Ci)}function Di(e,t,n){if(Ci.current!==Ii)throw Error(a(168));Ti(Ci,t),Ti(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,q(e)||"Unknown",i));return U({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ii,Ai=Ci.current,Ti(Ci,e),Ti(Ni,Ni.current),!0}function Ui(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Si(Ni),Si(Ci),Ti(Ci,e)):Si(Ni),Ti(Ni,n)}var Fi=null,Vi=!1,ji=!1;function zi(e){null===Fi?Fi=[e]:Fi.push(e)}function Bi(){if(!ji&&null!==Fi){ji=!0;var e=0,t=kt;try{var n=Fi;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,Vi=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),Ge(Ze,Bi),i}finally{kt=t,ji=!1}}return null}var qi=[],Hi=0,Wi=null,Ki=0,Gi=[],Qi=0,Yi=null,Xi=1,$i="";function Ji(e,t){qi[Hi++]=Ki,qi[Hi++]=Wi,Wi=e,Ki=t}function Zi(e,t,n){Gi[Qi++]=Xi,Gi[Qi++]=$i,Gi[Qi++]=Yi,Yi=e;var r=Xi;e=$i;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Xi=1<<32-ot(t)+i|n<<i|r,$i=a+e}else Xi=1<<a|n<<i|r,$i=e}function ea(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function ta(e){for(;e===Wi;)Wi=qi[--Hi],qi[Hi]=null,Ki=qi[--Hi],qi[Hi]=null;for(;e===Yi;)Yi=Gi[--Qi],Gi[Qi]=null,$i=Gi[--Qi],Gi[Qi]=null,Xi=Gi[--Qi],Gi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Rc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Xi,overflow:$i}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function sa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!ua(e,t)){if(sa(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&ua(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(sa(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(sa(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=b.ReactCurrentBatchConfig;function ma(e,t){if(e&&e.defaultProps){for(var n in t=U({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ya=xi(null),ga=null,ka=null,ba=null;function wa(){ba=ka=ga=null}function _a(e){var t=ya.current;Si(ya),e._currentValue=t}function Ea(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function xa(e,t){ga=e,ba=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bu=!0),e.firstContext=null)}function Sa(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Ta=null;function Ia(e){null===Ta?Ta=[e]:Ta.push(e)}function Ca(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ia(t)):(n.next=i.next,i.next=n),t.interleaved=n,Na(e,r)}function Na(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Aa=!1;function Ra(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Oa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Da(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Cs)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Na(e,n)}return null===(i=r.interleaved)?(t.next=t,Ia(r)):(t.next=i.next,i.next=t),r.interleaved=t,Na(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ua(e,t,n,r){var i=e.updateQueue;Aa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=U({},f,h);break e;case 2:Aa=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Ms|=o,e.lanes=o,e.memoizedState=f}}function Fa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Va=(new r.Component).refs;function ja(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:U({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var za={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Oa(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Da(e,a,i))&&(nc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Oa(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Da(e,a,i))&&(nc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Oa(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Da(e,i,r))&&(nc(t,e,r,n),La(t,e,r))}};function Ba(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function qa(e,t,n){var r=!1,i=Ii,a=t.contextType;return"object"===typeof a&&null!==a?a=Sa(a):(i=Pi(t)?Ai:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ri(e,i):Ii),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=za,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ha(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&za.enqueueReplaceState(t,t.state,null)}function Wa(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Va,Ra(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Sa(a):(a=Pi(t)?Ai:Ci.current,i.context=Ri(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ja(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&za.enqueueReplaceState(i,i.state,null),Ua(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ka(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Va&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ga(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function Ya(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===E?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===P&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Ka(e,t,n),r.return=e,r):((r=Dc(n.type,n.key,n.props,null,e.mode,r)).ref=Ka(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Uc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Dc(t.type,t.key,t.props,null,e.mode,n)).ref=Ka(e,null,t),n.return=e,n;case _:return(t=Fc(t,e.mode,n)).return=e,t;case P:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Lc(t,e.mode,n,null)).return=e,t;Ga(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case _:return n.key===i?l(e,t,n,r):null;case P:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);Ga(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);Ga(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,f=a,v=a=0,m=null;null!==f&&v<u.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var y=d(i,f,u[v],s);if(null===y){null===f&&(f=m);break}e&&f&&null===y.alternate&&t(i,f),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y,f=m}if(v===u.length)return n(i,f),ia&&Ji(i,v),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return ia&&Ji(i,v),c}for(f=r(i,f);v<u.length;v++)null!==(m=p(f,i,v,u[v],s))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(i,e)})),ia&&Ji(i,v),c}function m(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,v=u,m=u=0,y=null,g=s.next();null!==v&&!g.done;m++,g=s.next()){v.index>m?(y=v,v=null):y=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=y);break}e&&v&&null===k.alternate&&t(i,v),u=o(k,u,m),null===f?l=k:f.sibling=k,f=k,v=y}if(g.done)return n(i,v),ia&&Ji(i,m),l;if(null===v){for(;!g.done;m++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return ia&&Ji(i,m),l}for(v=r(i,v);!g.done;m++,g=s.next())null!==(g=p(v,i,m,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Ji(i,m),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===E&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===E){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&Qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ka(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===E?((a=Lc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Dc(o.type,o.key,o.props,null,r.mode,s)).ref=Ka(r,a,o),s.return=r,r=s)}return u(r);case _:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Fc(o,r.mode,s)).return=r,r=a}return u(r);case P:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(L(o))return m(r,a,o,s);Ga(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Uc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var Xa=Ya(!0),$a=Ya(!1),Ja={},Za=xi(Ja),eo=xi(Ja),to=xi(Ja);function no(e){if(e===Ja)throw Error(a(174));return e}function ro(e,t){switch(Ti(to,t),Ti(eo,e),Ti(Za,Ja),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Si(Za),Ti(Za,t)}function io(){Si(Za),Si(eo),Si(to)}function ao(e){no(to.current);var t=no(Za.current),n=se(t,e.type);t!==n&&(Ti(eo,e),Ti(Za,n))}function oo(e){eo.current===e&&(Si(Za),Si(eo))}var uo=xi(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=b.ReactCurrentDispatcher,ho=b.ReactCurrentBatchConfig,po=0,vo=null,mo=null,yo=null,go=!1,ko=!1,bo=0,wo=0;function _o(){throw Error(a(321))}function Eo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function xo(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?uu:su,e=n(r,i),ko){o=0;do{if(ko=!1,bo=0,25<=o)throw Error(a(301));o+=1,yo=mo=null,t.updateQueue=null,fo.current=cu,e=n(r,i)}while(ko)}if(fo.current=ou,t=null!==mo&&null!==mo.next,po=0,yo=mo=vo=null,go=!1,t)throw Error(a(300));return e}function So(){var e=0!==bo;return bo=0,e}function To(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?vo.memoizedState=yo=e:yo=yo.next=e,yo}function Io(){if(null===mo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===yo?vo.memoizedState:yo.next;if(null!==t)yo=t,mo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===yo?vo.memoizedState=yo=e:yo=yo.next=e}return yo}function Co(e,t){return"function"===typeof t?t(e):t}function No(e){var t=Io(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=mo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((po&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,vo.lanes|=f,Ms|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(bu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Ms|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ao(e){var t=Io(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(bu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ro(){}function Po(e,t){var n=vo,r=Io(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,bu=!0),r=r.queue,Ho(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,Vo(9,Do.bind(null,n,r,i,t),void 0,null),null===Ns)throw Error(a(349));0!==(30&po)||Oo(n,t,i)}return i}function Oo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Do(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Uo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Uo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Uo(e){var t=Na(e,1);null!==t&&nc(t,e,1,-1)}function Fo(e){var t=To();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=nu.bind(null,vo,e),[t.memoizedState,e]}function Vo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function jo(){return Io().memoizedState}function zo(e,t,n,r){var i=To();vo.flags|=e,i.memoizedState=Vo(1|t,n,void 0,void 0===r?null:r)}function Bo(e,t,n,r){var i=Io();r=void 0===r?null:r;var a=void 0;if(null!==mo){var o=mo.memoizedState;if(a=o.destroy,null!==r&&Eo(r,o.deps))return void(i.memoizedState=Vo(t,n,a,r))}vo.flags|=e,i.memoizedState=Vo(1|t,n,a,r)}function qo(e,t){return zo(8390656,8,e,t)}function Ho(e,t){return Bo(2048,8,e,t)}function Wo(e,t){return Bo(4,2,e,t)}function Ko(e,t){return Bo(4,4,e,t)}function Go(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4,4,Go.bind(null,t,e),n)}function Yo(){}function Xo(e,t){var n=Io();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Eo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function $o(e,t){var n=Io();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Eo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Jo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,bu=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),vo.lanes|=n,Ms|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{kt=n,ho.transition=r}}function eu(){return Io().memoizedState}function tu(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ru(e))iu(t,n);else if(null!==(n=Ca(e,t,n,r))){nc(n,e,r,ec()),au(n,t,r)}}function nu(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ru(e))iu(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o)){var s=t.interleaved;return null===s?(i.next=i,Ia(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ca(e,t,i,r))&&(nc(n,e,r,i=ec()),au(n,t,r))}}function ru(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function iu(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function au(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ou={readContext:Sa,useCallback:_o,useContext:_o,useEffect:_o,useImperativeHandle:_o,useInsertionEffect:_o,useLayoutEffect:_o,useMemo:_o,useReducer:_o,useRef:_o,useState:_o,useDebugValue:_o,useDeferredValue:_o,useTransition:_o,useMutableSource:_o,useSyncExternalStore:_o,useId:_o,unstable_isNewReconciler:!1},uu={readContext:Sa,useCallback:function(e,t){return To().memoizedState=[e,void 0===t?null:t],e},useContext:Sa,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4194308,4,Go.bind(null,t,e),n)},useLayoutEffect:function(e,t){return zo(4194308,4,e,t)},useInsertionEffect:function(e,t){return zo(4,2,e,t)},useMemo:function(e,t){var n=To();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=To();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tu.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},To().memoizedState=e},useState:Fo,useDebugValue:Yo,useDeferredValue:function(e){return To().memoizedState=e},useTransition:function(){var e=Fo(!1),t=e[0];return e=Zo.bind(null,e[1]),To().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=To();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Ns)throw Error(a(349));0!==(30&po)||Oo(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,Vo(9,Do.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=To(),t=Ns.identifierPrefix;if(ia){var n=$i;t=":"+t+"R"+(n=(Xi&~(1<<32-ot(Xi)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},su={readContext:Sa,useCallback:Xo,useContext:Sa,useEffect:Ho,useImperativeHandle:Qo,useInsertionEffect:Wo,useLayoutEffect:Ko,useMemo:$o,useReducer:No,useRef:jo,useState:function(){return No(Co)},useDebugValue:Yo,useDeferredValue:function(e){return Jo(Io(),mo.memoizedState,e)},useTransition:function(){return[No(Co)[0],Io().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Po,useId:eu,unstable_isNewReconciler:!1},cu={readContext:Sa,useCallback:Xo,useContext:Sa,useEffect:Ho,useImperativeHandle:Qo,useInsertionEffect:Wo,useLayoutEffect:Ko,useMemo:$o,useReducer:Ao,useRef:jo,useState:function(){return Ao(Co)},useDebugValue:Yo,useDeferredValue:function(e){var t=Io();return null===mo?t.memoizedState=e:Jo(t,mo.memoizedState,e)},useTransition:function(){return[Ao(Co)[0],Io().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Po,useId:eu,unstable_isNewReconciler:!1};function lu(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function fu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var du="function"===typeof WeakMap?WeakMap:Map;function pu(e,t,n){(n=Oa(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hs||(Hs=!0,Ws=r),hu(0,t)},n}function vu(e,t,n){(n=Oa(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hu(0,t),"function"!==typeof r&&(null===Ks?Ks=new Set([this]):Ks.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Sc.bind(null,e,t,n),t.then(e,e))}function yu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Oa(-1,1)).tag=2,Da(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ku=b.ReactCurrentOwner,bu=!1;function wu(e,t,n,r){t.child=null===e?$a(t,null,n,r):Xa(t,e.child,n,r)}function _u(e,t,n,r,i){n=n.render;var a=t.ref;return xa(t,i),r=xo(e,t,n,r,a,i),n=So(),null===e||bu?(ia&&n&&ea(t),t.flags|=1,wu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Hu(e,t,i))}function Eu(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Pc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Dc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,xu(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Hu(e,t,i)}return t.flags|=1,(e=Oc(a,r)).ref=t.ref,e.return=t,t.child=e}function xu(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(bu=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Hu(e,t,i);0!==(131072&e.flags)&&(bu=!0)}}return Iu(e,t,n,r,i)}function Su(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ti(Os,Ps),Ps|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ti(Os,Ps),Ps|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ti(Os,Ps),Ps|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ti(Os,Ps),Ps|=r;return wu(e,t,i,n),t.child}function Tu(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Iu(e,t,n,r,i){var a=Pi(n)?Ai:Ci.current;return a=Ri(t,a),xa(t,i),n=xo(e,t,n,r,a,i),r=So(),null===e||bu?(ia&&r&&ea(t),t.flags|=1,wu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Hu(e,t,i))}function Cu(e,t,n,r,i){if(Pi(n)){var a=!0;Mi(t)}else a=!1;if(xa(t,i),null===t.stateNode)qu(e,t),qa(t,n,r),Wa(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Sa(c):c=Ri(t,c=Pi(n)?Ai:Ci.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&Ha(t,o,r,c),Aa=!1;var h=t.memoizedState;o.state=h,Ua(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Ni.current||Aa?("function"===typeof l&&(ja(t,n,l,r),s=t.memoizedState),(u=Aa||Ba(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Pa(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:ma(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Sa(s):s=Ri(t,s=Pi(n)?Ai:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&Ha(t,o,r,s),Aa=!1,h=t.memoizedState,o.state=h,Ua(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||Ni.current||Aa?("function"===typeof d&&(ja(t,n,d,r),p=t.memoizedState),(c=Aa||Ba(t,n,c,r,h,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Nu(e,t,n,r,a,i)}function Nu(e,t,n,r,i,a){Tu(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Ui(t,n,!1),Hu(e,t,a);r=t.stateNode,ku.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Xa(t,e.child,null,a),t.child=Xa(t,null,u,a)):wu(e,t,u,a),t.memoizedState=r.state,i&&Ui(t,n,!0),t.child}function Au(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),ro(e,t.containerInfo)}function Ru(e,t,n,r,i){return da(),pa(i),t.flags|=256,wu(e,t,n,r),t.child}var Pu,Ou,Du,Lu={dehydrated:null,treeContext:null,retryLane:0};function Mu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Uu(e,t,n){var r,i=t.pendingProps,o=uo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ti(uo,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,u?(i=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=Mc(s,i,0,null),e=Lc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Mu(n),t.memoizedState=Lu,e):Fu(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,u){if(n)return 256&t.flags?(t.flags&=-257,Vu(e,t,u,r=fu(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Mc({mode:"visible",children:r.children},i,0,null),(o=Lc(o,i,u,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Xa(t,e.child,null,u),t.child.memoizedState=Mu(u),t.memoizedState=Lu,o);if(0===(1&t.mode))return Vu(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,Vu(e,t,u,r=fu(o=Error(a(419)),r,void 0))}if(s=0!==(u&e.childLanes),bu||s){if(null!==(r=Ns)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Na(e,i),nc(r,e,i,-1))}return vc(),Vu(e,t,u,r=fu(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Ic.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Gi[Qi++]=Xi,Gi[Qi++]=$i,Gi[Qi++]=Yi,Xi=e.id,$i=e.overflow,Yi=t),(t=Fu(t,r.children)).flags|=4096,t)}(e,t,s,i,r,o,n);if(u){u=i.fallback,s=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Oc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?u=Oc(r,u):(u=Lc(u,s,n,null)).flags|=2,u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,s=null===(s=e.child.memoizedState)?Mu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Lu,i}return e=(u=e.child).sibling,i=Oc(u,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Fu(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Vu(e,t,n,r){return null!==r&&pa(r),Xa(t,e.child,null,n),(e=Fu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function ju(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ea(e.return,t,n)}function zu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Bu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(wu(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ju(e,n,t);else if(19===e.tag)ju(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ti(uo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),zu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}zu(t,!0,n,null,a);break;case"together":zu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qu(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Hu(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ms|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Wu(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ku(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Gu(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ku(t),null;case 1:case 17:return Pi(t.type)&&Oi(),Ku(t),null;case 3:return r=t.stateNode,io(),Si(Ni),Si(Ci),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(oc(aa),aa=null))),Ku(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Ou(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Ku(t),null}if(e=no(Za.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Vr("cancel",r),Vr("close",r);break;case"iframe":case"object":case"embed":Vr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],r);break;case"source":Vr("error",r);break;case"img":case"image":case"link":Vr("error",r),Vr("load",r);break;case"details":Vr("toggle",r);break;case"input":X(r,o),Vr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Vr("invalid",r);break;case"textarea":ie(r,o),Vr("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Vr("scroll",r)}switch(n){case"input":K(r),Z(r,o,!0);break;case"textarea":K(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[hi]=t,e[di]=r,Pu(e,t),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":Vr("cancel",e),Vr("close",e),i=r;break;case"iframe":case"object":case"embed":Vr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],e);i=r;break;case"source":Vr("error",e),i=r;break;case"img":case"image":case"link":Vr("error",e),Vr("load",e),i=r;break;case"details":Vr("toggle",e),i=r;break;case"input":X(e,r),i=Y(e,r),Vr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=U({},r,{value:void 0}),Vr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Vr("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?me(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Vr("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":K(e),Z(e,r,!1);break;case"textarea":K(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ku(t),null;case 6:if(e&&null!=t.stateNode)Du(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Ku(t),null;case 13:if(Si(uo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),da(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ku(t),o=!1}else null!==aa&&(oc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&uo.current)?0===Ds&&(Ds=3):vc())),null!==t.updateQueue&&(t.flags|=4),Ku(t),null);case 4:return io(),null===e&&Br(t.stateNode.containerInfo),Ku(t),null;case 10:return _a(t.type._context),Ku(t),null;case 19:if(Si(uo),null===(o=t.memoizedState))return Ku(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Wu(o,!1);else{if(0!==Ds||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=so(e))){for(t.flags|=128,Wu(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ti(uo,1&uo.current|2),t.child}e=e.sibling}null!==o.tail&&$e()>Bs&&(t.flags|=128,r=!0,Wu(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Wu(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!ia)return Ku(t),null}else 2*$e()-o.renderingStartTime>Bs&&1073741824!==n&&(t.flags|=128,r=!0,Wu(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=$e(),t.sibling=null,n=uo.current,Ti(uo,r?1&n|2:1&n),t):(Ku(t),null);case 22:case 23:return fc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ps)&&(Ku(t),6&t.subtreeFlags&&(t.flags|=8192)):Ku(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Qu(e,t){switch(ta(t),t.tag){case 1:return Pi(t.type)&&Oi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Si(Ni),Si(Ci),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Si(uo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Si(uo),null;case 4:return io(),null;case 10:return _a(t.type._context),null;case 22:case 23:return fc(),null;default:return null}}Pu=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ou=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=U({},i,{value:void 0}),r=U({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Vr("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Du=function(e,t,n,r){n!==r&&(t.flags|=4)};var Yu=!1,Xu=!1,$u="function"===typeof WeakSet?WeakSet:Set,Ju=null;function Zu(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){xc(e,t,r)}else n.current=null}function es(e,t,n){try{n()}catch(r){xc(e,t,r)}}var ts=!1;function ns(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&es(t,n,a)}i=i.next}while(i!==r)}}function rs(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function is(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function as(e){var t=e.alternate;null!==t&&(e.alternate=null,as(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function os(e){return 5===e.tag||3===e.tag||4===e.tag}function us(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||os(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ss(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ss(e,t,n),e=e.sibling;null!==e;)ss(e,t,n),e=e.sibling}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}var ls=null,fs=!1;function hs(e,t,n){for(n=n.child;null!==n;)ds(e,t,n),n=n.sibling}function ds(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:Xu||Zu(n,t);case 6:var r=ls,i=fs;ls=null,hs(e,t,n),fs=i,null!==(ls=r)&&(fs?(e=ls,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ls.removeChild(n.stateNode));break;case 18:null!==ls&&(fs?(e=ls,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),Bt(e)):si(ls,n.stateNode));break;case 4:r=ls,i=fs,ls=n.stateNode.containerInfo,fs=!0,hs(e,t,n),ls=r,fs=i;break;case 0:case 11:case 14:case 15:if(!Xu&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&es(n,t,o),i=i.next}while(i!==r)}hs(e,t,n);break;case 1:if(!Xu&&(Zu(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){xc(n,t,u)}hs(e,t,n);break;case 21:hs(e,t,n);break;case 22:1&n.mode?(Xu=(r=Xu)||null!==n.memoizedState,hs(e,t,n),Xu=r):hs(e,t,n);break;default:hs(e,t,n)}}function ps(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new $u),t.forEach((function(t){var r=Cc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function vs(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:ls=s.stateNode,fs=!1;break e;case 3:case 4:ls=s.stateNode.containerInfo,fs=!0;break e}s=s.return}if(null===ls)throw Error(a(160));ds(o,u,i),ls=null,fs=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){xc(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ms(t,e),t=t.sibling}function ms(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vs(t,e),ys(e),4&r){try{ns(3,e,e.return),rs(3,e)}catch(m){xc(e,e.return,m)}try{ns(5,e,e.return)}catch(m){xc(e,e.return,m)}}break;case 1:vs(t,e),ys(e),512&r&&null!==n&&Zu(n,n.return);break;case 5:if(vs(t,e),ys(e),512&r&&null!==n&&Zu(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(m){xc(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&$(i,o),ke(s,u);var l=ke(s,o);for(u=0;u<c.length;u+=2){var f=c[u],h=c[u+1];"style"===f?me(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,l)}switch(s){case"input":J(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(m){xc(e,e.return,m)}}break;case 6:if(vs(t,e),ys(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){xc(e,e.return,m)}}break;case 3:if(vs(t,e),ys(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(m){xc(e,e.return,m)}break;case 4:default:vs(t,e),ys(e);break;case 13:vs(t,e),ys(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(zs=$e())),4&r&&ps(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?(Xu=(l=Xu)||f,vs(t,e),Xu=l):vs(t,e),ys(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for(Ju=e,f=e.child;null!==f;){for(h=Ju=f;null!==Ju;){switch(p=(d=Ju).child,d.tag){case 0:case 11:case 14:case 15:ns(4,d,d.return);break;case 1:Zu(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){xc(r,n,m)}}break;case 5:Zu(d,d.return);break;case 22:if(null!==d.memoizedState){ws(h);continue}}null!==p?(p.return=d,Ju=p):ws(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=h.stateNode,u=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=ve("display",u))}catch(m){xc(e,e.return,m)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(m){xc(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:vs(t,e),ys(e),4&r&&ps(e);case 21:}}function ys(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(os(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),cs(e,us(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ss(e,us(e),o);break;default:throw Error(a(161))}}catch(u){xc(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function gs(e,t,n){Ju=e,ks(e,t,n)}function ks(e,t,n){for(var r=0!==(1&e.mode);null!==Ju;){var i=Ju,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Yu;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||Xu;u=Yu;var c=Xu;if(Yu=o,(Xu=s)&&!c)for(Ju=i;null!==Ju;)s=(o=Ju).child,22===o.tag&&null!==o.memoizedState?_s(i):null!==s?(s.return=o,Ju=s):_s(i);for(;null!==a;)Ju=a,ks(a,t,n),a=a.sibling;Ju=i,Yu=u,Xu=c}bs(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Ju=a):bs(e)}}function bs(e){for(;null!==Ju;){var t=Ju;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xu||rs(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xu)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ma(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Fa(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Fa(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(a(163))}Xu||512&t.flags&&is(t)}catch(d){xc(t,t.return,d)}}if(t===e){Ju=null;break}if(null!==(n=t.sibling)){n.return=t.return,Ju=n;break}Ju=t.return}}function ws(e){for(;null!==Ju;){var t=Ju;if(t===e){Ju=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Ju=n;break}Ju=t.return}}function _s(e){for(;null!==Ju;){var t=Ju;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rs(4,t)}catch(s){xc(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){xc(t,i,s)}}var a=t.return;try{is(t)}catch(s){xc(t,a,s)}break;case 5:var o=t.return;try{is(t)}catch(s){xc(t,o,s)}}}catch(s){xc(t,t.return,s)}if(t===e){Ju=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Ju=u;break}Ju=t.return}}var Es,xs=Math.ceil,Ss=b.ReactCurrentDispatcher,Ts=b.ReactCurrentOwner,Is=b.ReactCurrentBatchConfig,Cs=0,Ns=null,As=null,Rs=0,Ps=0,Os=xi(0),Ds=0,Ls=null,Ms=0,Us=0,Fs=0,Vs=null,js=null,zs=0,Bs=1/0,qs=null,Hs=!1,Ws=null,Ks=null,Gs=!1,Qs=null,Ys=0,Xs=0,$s=null,Js=-1,Zs=0;function ec(){return 0!==(6&Cs)?$e():-1!==Js?Js:Js=$e()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Cs)&&0!==Rs?Rs&-Rs:null!==va.transition?(0===Zs&&(Zs=vt()),Zs):0!==(e=kt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function nc(e,t,n,r){if(50<Xs)throw Xs=0,$s=null,Error(a(185));yt(e,n,r),0!==(2&Cs)&&e===Ns||(e===Ns&&(0===(2&Cs)&&(Us|=n),4===Ds&&uc(e,Rs)),rc(e,r),1===n&&0===Cs&&0===(1&t.mode)&&(Bs=$e()+500,Vi&&Bi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===Ns?Rs:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Vi=!0,zi(e)}(sc.bind(null,e)):zi(sc.bind(null,e)),oi((function(){0===(6&Cs)&&Bi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Js=-1,Zs=0,0!==(6&Cs))throw Error(a(327));var n=e.callbackNode;if(_c()&&e.callbackNode!==n)return null;var r=ht(e,e===Ns?Rs:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=mc(e,r);else{t=r;var i=Cs;Cs|=2;var o=pc();for(Ns===e&&Rs===t||(qs=null,Bs=$e()+500,hc(e,t));;)try{gc();break}catch(s){dc(e,s)}wa(),Ss.current=o,Cs=i,null!==As?t=0:(Ns=null,Rs=0,t=Ds)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ac(e,i))),1===t)throw n=Ls,hc(e,0),uc(e,r),rc(e,$e()),n;if(6===t)uc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=mc(e,r))&&(0!==(o=pt(e))&&(r=o,t=ac(e,o))),1===t))throw n=Ls,hc(e,0),uc(e,r),rc(e,$e()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:wc(e,js,qs);break;case 3:if(uc(e,r),(130023424&r)===r&&10<(t=zs+500-$e())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wc.bind(null,e,js,qs),t);break}wc(e,js,qs);break;case 4:if(uc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=$e()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*xs(r/1960))-r)){e.timeoutHandle=ri(wc.bind(null,e,js,qs),r);break}wc(e,js,qs);break;default:throw Error(a(329))}}}return rc(e,$e()),e.callbackNode===n?ic.bind(null,e):null}function ac(e,t){var n=Vs;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=js,js=n,null!==t&&oc(t)),e}function oc(e){null===js?js=e:js.push.apply(js,e)}function uc(e,t){for(t&=~Fs,t&=~Us,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function sc(e){if(0!==(6&Cs))throw Error(a(327));_c();var t=ht(e,0);if(0===(1&t))return rc(e,$e()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=Ls,hc(e,0),uc(e,t),rc(e,$e()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,js,qs),rc(e,$e()),null}function cc(e,t){var n=Cs;Cs|=1;try{return e(t)}finally{0===(Cs=n)&&(Bs=$e()+500,Vi&&Bi())}}function lc(e){null!==Qs&&0===Qs.tag&&0===(6&Cs)&&_c();var t=Cs;Cs|=1;var n=Is.transition,r=kt;try{if(Is.transition=null,kt=1,e)return e()}finally{kt=r,Is.transition=n,0===(6&(Cs=t))&&Bi()}}function fc(){Ps=Os.current,Si(Os)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==As)for(n=As.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oi();break;case 3:io(),Si(Ni),Si(Ci),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Si(uo);break;case 10:_a(r.type._context);break;case 22:case 23:fc()}n=n.return}if(Ns=e,As=e=Oc(e.current,null),Rs=Ps=t,Ds=0,Ls=null,Fs=Us=Ms=0,js=Vs=null,null!==Ta){for(t=0;t<Ta.length;t++)if(null!==(r=(n=Ta[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ta=null}return e}function dc(e,t){for(;;){var n=As;try{if(wa(),fo.current=ou,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,yo=mo=vo=null,ko=!1,bo=0,Ts.current=null,null===n||null===n.return){Ds=1,Ls=t,As=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Rs,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=yu(u);if(null!==p){p.flags&=-257,gu(p,u,s,0,t),1&p.mode&&mu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(c),t.updateQueue=m}else v.add(c);break e}if(0===(1&t)){mu(o,l,t),vc();break e}c=Error(a(426))}else if(ia&&1&s.mode){var y=yu(u);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),gu(y,u,s,0,t),pa(lu(c,s));break e}}o=c=lu(c,s),4!==Ds&&(Ds=2),null===Vs?Vs=[o]:Vs.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,pu(0,c,t));break e;case 1:s=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Ks||!Ks.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vu(o,s,t));break e}}o=o.return}while(null!==o)}bc(n)}catch(b){t=b,As===n&&null!==n&&(As=n=n.return);continue}break}}function pc(){var e=Ss.current;return Ss.current=ou,null===e?ou:e}function vc(){0!==Ds&&3!==Ds&&2!==Ds||(Ds=4),null===Ns||0===(268435455&Ms)&&0===(268435455&Us)||uc(Ns,Rs)}function mc(e,t){var n=Cs;Cs|=2;var r=pc();for(Ns===e&&Rs===t||(qs=null,hc(e,t));;)try{yc();break}catch(i){dc(e,i)}if(wa(),Cs=n,Ss.current=r,null!==As)throw Error(a(261));return Ns=null,Rs=0,Ds}function yc(){for(;null!==As;)kc(As)}function gc(){for(;null!==As&&!Ye();)kc(As)}function kc(e){var t=Es(e.alternate,e,Ps);e.memoizedProps=e.pendingProps,null===t?bc(e):As=t,Ts.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Gu(n,t,Ps)))return void(As=n)}else{if(null!==(n=Qu(n,t)))return n.flags&=32767,void(As=n);if(null===e)return Ds=6,void(As=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(As=t);As=t=e}while(null!==t);0===Ds&&(Ds=5)}function wc(e,t,n){var r=kt,i=Is.transition;try{Is.transition=null,kt=1,function(e,t,n,r){do{_c()}while(null!==Qs);if(0!==(6&Cs))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Ns&&(As=Ns=null,Rs=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gs||(Gs=!0,Nc(tt,(function(){return _c(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Is.transition,Is.transition=null;var u=kt;kt=1;var s=Cs;Cs|=4,Ts.current=null,function(e,t){if(ei=Ht,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Ht=!1,Ju=t;null!==Ju;)if(e=(t=Ju).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Ju=e;else for(;null!==Ju;){t=Ju;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,y=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:ma(t.type,m),y);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(w){xc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Ju=e;break}Ju=t.return}v=ts,ts=!1}(e,n),ms(n,e),pr(ti),Ht=!!ei,ti=ei=null,e.current=n,gs(n,e,i),Xe(),Cs=s,kt=u,Is.transition=o}else e.current=n;if(Gs&&(Gs=!1,Qs=e,Ys=i),0===(o=e.pendingLanes)&&(Ks=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,$e()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r((i=t[n]).value,{componentStack:i.stack,digest:i.digest});if(Hs)throw Hs=!1,e=Ws,Ws=null,e;0!==(1&Ys)&&0!==e.tag&&_c(),0!==(1&(o=e.pendingLanes))?e===$s?Xs++:(Xs=0,$s=e):Xs=0,Bi()}(e,t,n,r)}finally{Is.transition=i,kt=r}return null}function _c(){if(null!==Qs){var e=bt(Ys),t=Is.transition,n=kt;try{if(Is.transition=null,kt=16>e?16:e,null===Qs)var r=!1;else{if(e=Qs,Qs=null,Ys=0,0!==(6&Cs))throw Error(a(331));var i=Cs;for(Cs|=4,Ju=e.current;null!==Ju;){var o=Ju,u=o.child;if(0!==(16&Ju.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Ju=l;null!==Ju;){var f=Ju;switch(f.tag){case 0:case 11:case 15:ns(8,f,o)}var h=f.child;if(null!==h)h.return=f,Ju=h;else for(;null!==Ju;){var d=(f=Ju).sibling,p=f.return;if(as(f),f===l){Ju=null;break}if(null!==d){d.return=p,Ju=d;break}Ju=p}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Ju=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Ju=u;else e:for(;null!==Ju;){if(0!==(2048&(o=Ju).flags))switch(o.tag){case 0:case 11:case 15:ns(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Ju=g;break e}Ju=o.return}}var k=e.current;for(Ju=k;null!==Ju;){var b=(u=Ju).child;if(0!==(2064&u.subtreeFlags)&&null!==b)b.return=u,Ju=b;else e:for(u=k;null!==Ju;){if(0!==(2048&(s=Ju).flags))try{switch(s.tag){case 0:case 11:case 15:rs(9,s)}}catch(_){xc(s,s.return,_)}if(s===u){Ju=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,Ju=w;break e}Ju=s.return}}if(Cs=i,Bi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(_){}r=!0}return r}finally{kt=n,Is.transition=t}}return!1}function Ec(e,t,n){e=Da(e,t=pu(0,t=lu(n,t),1),1),t=ec(),null!==e&&(yt(e,1,t),rc(e,t))}function xc(e,t,n){if(3===e.tag)Ec(e,e,n);else for(;null!==t;){if(3===t.tag){Ec(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ks||!Ks.has(r))){t=Da(t,e=vu(t,e=lu(n,e),1),1),e=ec(),null!==t&&(yt(t,1,e),rc(t,e));break}}t=t.return}}function Sc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Ns===e&&(Rs&n)===n&&(4===Ds||3===Ds&&(130023424&Rs)===Rs&&500>$e()-zs?hc(e,0):Fs|=n),rc(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=ec();null!==(e=Na(e,t))&&(yt(e,t,n),rc(e,n))}function Ic(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function Cc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Tc(e,n)}function Nc(e,t){return Ge(e,t)}function Ac(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(e,t,n,r){return new Ac(e,t,n,r)}function Pc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Rc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Dc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Pc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case E:return Lc(n.children,i,o,t);case x:u=8,i|=8;break;case S:return(e=Rc(12,n,t,2|i)).elementType=S,e.lanes=o,e;case N:return(e=Rc(13,n,t,i)).elementType=N,e.lanes=o,e;case A:return(e=Rc(19,n,t,i)).elementType=A,e.lanes=o,e;case O:return Mc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:u=10;break e;case I:u=9;break e;case C:u=11;break e;case R:u=14;break e;case P:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Rc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Lc(e,t,n,r){return(e=Rc(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=Rc(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function Uc(e,t,n){return(e=Rc(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Rc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function jc(e,t,n,r,i,a,o,u,s){return e=new Vc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Rc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ra(a),e}function zc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Bc(e){if(!e)return Ii;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Pi(n))return Li(e,n,t)}return t}function qc(e,t,n,r,i,a,o,u,s){return(e=jc(n,r,!0,e,0,a,0,u,s)).context=Bc(null),n=e.current,(a=Oa(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Da(n,a,i),e.current.lanes=i,yt(e,i,r),rc(e,r),e}function Hc(e,t,n,r){var i=t.current,a=ec(),o=tc(i);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Oa(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Da(i,t,o))&&(nc(e,i,o,a),La(e,i,o)),o}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Kc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){Kc(e,t),(e=e.alternate)&&Kc(e,t)}Es=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)bu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bu=!1,function(e,t,n){switch(t.tag){case 3:Au(t),da();break;case 5:ao(t);break;case 1:Pi(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ti(ya,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ti(uo,1&uo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Uu(e,t,n):(Ti(uo,1&uo.current),null!==(e=Hu(e,t,n))?e.sibling:null);Ti(uo,1&uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Bu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ti(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Su(e,t,n)}return Hu(e,t,n)}(e,t,n);bu=0!==(131072&e.flags)}else bu=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Ki,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qu(e,t),e=t.pendingProps;var i=Ri(t,Ci.current);xa(t,n),i=xo(null,t,r,e,i,n);var o=So();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pi(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ra(t),i.updater=za,t.stateNode=i,i._reactInternals=t,Wa(t,r,e,n),t=Nu(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),wu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qu(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Pc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===R)return 14}return 2}(r),e=ma(r,e),i){case 0:t=Iu(null,t,r,e,n);break e;case 1:t=Cu(null,t,r,e,n);break e;case 11:t=_u(null,t,r,e,n);break e;case 14:t=Eu(null,t,r,ma(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Iu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 3:e:{if(Au(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Pa(e,t),Ua(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ru(e,t,r,n,i=lu(Error(a(423)),t));break e}if(r!==i){t=Ru(e,t,r,n,i=lu(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=$a(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Hu(e,t,n);break e}wu(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Tu(e,t),wu(e,t,u,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Uu(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Xa(t,null,r,n):wu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_u(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 7:return wu(e,t,t.pendingProps,n),t.child;case 8:case 12:return wu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Ti(ya,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ni.current){t=Hu(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Oa(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Ea(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),Ea(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}wu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,xa(t,n),r=r(i=Sa(i)),t.flags|=1,wu(e,t,r,n),t.child;case 14:return i=ma(r=t.type,t.pendingProps),Eu(e,t,r,i=ma(r.type,i),n);case 15:return xu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ma(r,i),qu(e,t),t.tag=1,Pi(r)?(e=!0,Mi(t)):e=!1,xa(t,n),qa(t,r,i),Wa(t,r,i,n),Nu(null,t,r,!0,e,n);case 19:return Bu(e,t,n);case 22:return Su(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Xc(e){this._internalRoot=e}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Wc(o);u.call(e)}}Hc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Wc(o);a.call(e)}}var o=qc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,Br(8===e.nodeType?e.parentNode:e),lc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Wc(s);u.call(e)}}var s=jc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=s,e[pi]=s.current,Br(8===e.nodeType?e.parentNode:e),lc((function(){Hc(t,s,n,r)})),s}(n,t,e,i,r);return Wc(o)}Xc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Hc(e,t,null,null)},Xc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;lc((function(){Hc(null,e,null,null)})),t[pi]=null}},Xc.prototype.unstable_scheduleHydration=function(e){if(e){var t=xt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Ut(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),rc(t,$e()),0===(6&Cs)&&(Bs=$e()+500,Bi()))}break;case 13:lc((function(){var t=Na(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Gc(e,1)}},_t=function(e){if(13===e.tag){var t=Na(e,134217728);if(null!==t)nc(t,e,134217728,ec());Gc(e,134217728)}},Et=function(e){if(13===e.tag){var t=tc(e),n=Na(e,t);if(null!==n)nc(n,e,t,ec());Gc(e,t)}},xt=function(){return kt},St=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},_e=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));G(r),J(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=cc,Ne=lc;var tl={usingClientEntryPoint:!1,Events:[ki,bi,wi,Te,Ie,cc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$c(t))throw Error(a(200));return zc(e,t,null,n)},t.createRoot=function(e,t){if(!$c(e))throw Error(a(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=jc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return lc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!$c(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,o,u),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Xc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(a(40));return!!e._reactRootContainer&&(lc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.jsx=c,t.jsxs=c},117:function(e,t){var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=y.prototype;var b=k.prototype=new g;b.constructor=k,v(b,y.prototype),b.isPureReactComponent=!0;var w=Array.isArray,_=Object.prototype.hasOwnProperty,E={current:null},x={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,i)&&!x.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:E.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var I=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+C(s,0):a,w(o)?(i="",null!=e&&(i=e.replace(I,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(T(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(I,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+C(u=e[c],c);s+=N(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=N(u=u.value,t,i,l=a+C(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},O={transition:null},D={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:O,ReactCurrentOwner:E};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=E.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)_.call(t,c)&&!x.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){e.exports=n(117)},184:function(e,t,n){e.exports=n(374)},813:function(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(m=!1,b(e),!v)if(null!==r(c))v=!0,O(_);else{var t=r(l);null!==t&&D(w,t.startTime-e)}}function _(e,n){v=!1,m&&(m=!1,g(T),T=-1),p=!0;var a=d;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!N());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&D(w,f.startTime-n),s=!1}return s}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var E,x=!1,S=null,T=-1,I=5,C=-1;function N(){return!(t.unstable_now()-C<I)}function A(){if(null!==S){var e=t.unstable_now();C=e;var n=!0;try{n=S(!0,e)}finally{n?E():(x=!1,S=null)}}else x=!1}if("function"===typeof k)E=function(){k(A)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,P=R.port2;R.port1.onmessage=A,E=function(){P.postMessage(null)}}else E=function(){y(A,0)};function O(e){S=e,x||(x=!0,E())}function D(e,n){T=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,O(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(m?(g(T),T=-1):m=!0,D(w,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,O(_))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".f11733a3.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="wordfight:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var u,s;if(void 0!==a)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var f=c[l];if(f.getAttribute("src")==r||f.getAttribute("data-webpack")==t+a){u=f;break}}u||(s=!0,(u=document.createElement("script")).charset="utf-8",u.timeout=120,n.nc&&u.setAttribute("nonce",n.nc),u.setAttribute("data-webpack",t+a),u.src=r),e[r]=[i];var h=function(t,n){u.onerror=u.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],u.parentNode&&u.parentNode.removeChild(u),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=h.bind(null,u.onerror),u.onload=h.bind(null,u.onload),s&&document.head.appendChild(u)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/wordfight/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),u=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;u.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",u.name="ChunkLoadError",u.type=a,u.request=o,i[1](u)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],u=r[1],s=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in u)n.o(u,i)&&(n.m[i]=u[i]);if(s)s(n)}for(t&&t(r);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkwordfight=self.webpackChunkwordfight||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){var e=n(791),t=n(250);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){if(e){if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){u=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}}(e,t)||u(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function l(){l=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(C){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i=t&&t.prototype instanceof d?t:d,a=Object.create(i.prototype),o=new S(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return I()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=_(o,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=f(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=s;var h={};function d(){}function p(){}function v(){}var m={};u(m,i,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(T([])));g&&g!==t&&n.call(g,i)&&(m=g);var k=v.prototype=d.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(i,a,o,u){var s=f(e[i],e,a);if("throw"!==s.type){var l=s.arg,h=l.value;return h&&"object"==c(h)&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){r("next",e,o,u)}),(function(e){r("throw",e,o,u)})):t.resolve(h).then((function(e){l.value=e,o(l)}),(function(e){return r("throw",e,o,u)}))}u(s.arg)}var i;this._invoke=function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return h;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=f(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,h;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function T(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:I}}function I(){return{value:void 0,done:!0}}return p.prototype=v,u(k,"constructor",v),u(v,"constructor",p),p.displayName=u(v,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,o,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},b(w.prototype),u(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new w(s(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(k),u(k,o,"Generator"),u(k,i,(function(){return this})),u(k,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=T,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},e}function f(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){f(a,r,i,o,u,"next",e)}function u(e){f(a,r,i,o,u,"throw",e)}o(void 0)}))}}function d(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var p=n(184);var v=function(e){var t=e.blocks,n=e.index,r=e.setBlocks,i=e.turn,o=e.setWord,u=e.user,s=t[n],c=s.clicked,l=void 0!==c&&c,f=s.allegiance,h=s.surrounded,v={background:f===u?h?"#d10d0d":"#db4d4d":"none"===f?"white":h?"#0e75e3":"#5ba3f0",color:"black",opacity:l?.05:1,fontWeight:l?"":"bold",cursor:l||i!==u?"default":"pointer"},m=function(e){r((function(t){return t.map((function(t){return t.index===s.index?a(a({},t),{},{clicked:e}):t}))}))};return(0,p.jsx)("td",{style:v,onClick:function(){i&&(l?(m(!1),o((function(e){return e.filter((function(e){return e.index!=s.index}))}))):(o((function(e){return[].concat(d(e),[s])})),m(!0)))},children:s.letter},n)};var m=function(e){var t=e.turn,n=e.setWord,r=e.blocks,i=e.setBlocks,a=e.usedWords,o=e.players,u=e.user;return(0,p.jsx)("table",{className:"blockGrid",children:(0,p.jsx)("tbody",{children:function(){for(var e=[],s=function(t){e.push(r.filter((function(e){return Math.floor(e.index/5)===t})))},c=0;c<5;c++)s(c);return e.map((function(e,s){return(0,p.jsx)("tr",{children:e.map((function(e,s){return(0,p.jsx)(v,{usedWords:a,blocks:r,index:e.index,players:o,setBlocks:i,turn:t,setWord:n,user:u},s)}))},s)}))}()})})};function y(e){var t=e.onClick,n=e.text,r=e.style;return(0,p.jsx)("div",{className:"customButton",onClick:t,style:a(a({},{border:"1.5px solid black",borderRadius:"5px",backgroundColor:"white",color:"black"}),r),children:n})}function g(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=u(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t,n){return t&&b(e.prototype,t),n&&b(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e,t){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},E(e,t)}function x(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E(e,t)}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}function T(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function I(e,t){if(t&&("object"===c(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _(e)}function C(e){var t=T();return function(){var n,r=S(e);if(t){var i=S(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return I(this,n)}}function N(e,t,n){return N=T()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&E(i,n.prototype),i},N.apply(null,arguments)}function A(e){var t="function"===typeof Map?new Map:void 0;return A=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return N(e,arguments,S(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),E(r,e)},A(e)}var R=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},P={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(R(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw new O;var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},O=function(e){x(n,e);var t=C(n);function n(){var e;return k(this,n),(e=t.apply(this,arguments)).name="DecodeBase64StringError",e}return w(n)}(A(Error)),D=function(e){return function(e){var t=R(e);return P.encodeByteArray(t,!0)}(e).replace(/\./g,"")},L=function(e){try{return P.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};var M=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},U=function(){try{return M()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"/wordfight",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&L(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},F=function(e){var t,n;return null===(n=null===(t=U())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},V=function(e){var t=F(e);if(t){var n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));var r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]}},j=function(){var e;return null===(e=U())||void 0===e?void 0:e.config},z=function(e){var t;return null===(t=U())||void 0===t?void 0:t["_".concat(e)]},B=function(){function e(){var t=this;k(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return w(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function q(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[D(JSON.stringify({alg:"none",type:"JWT"})),D(JSON.stringify(a)),""].join(".")}function H(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function W(){return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent}function K(){return!function(){var e,t=null===(e=U())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function G(){try{return"object"===typeof indexedDB}catch(e){return!1}}var Q=function(e){x(n,e);var t=C(n);function n(e,r,i){var a;return k(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(_(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(_(a),Y.prototype.create),a}return w(n)}(A(Error)),Y=function(){function e(t,n,r){k(this,e),this.service=t,this.serviceName=n,this.errors=r}return w(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?X(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new Q(n,a,t);return o}}]),e}();function X(e,t){return e.replace($,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var $=/\{\$([^}]+)}/g;function J(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Z(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(ee(u)&&ee(s)){if(!Z(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function ee(e){return null!==e&&"object"===typeof e}function te(e){for(var t=[],n=function(){var e=s(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function ne(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=s(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function re(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var ie=function(){function e(t,n){var r=this;k(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return w(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=g(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=ae),void 0===r.error&&(r.error=ae),void 0===r.complete&&(r.complete=ae);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function ae(){}function oe(e){return e&&e._delegate?e._delegate:e}var ue=function(){function e(t,n,r){k(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return w(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),se="[DEFAULT]",ce=function(){function e(t,n){k(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return w(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new B;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:se})}catch(c){}var t,n=g(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=s(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(c){}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=h(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(d(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),d(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=g(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=s(i.value,2),c=u[0],l=u[1],f=this.normalizeInstanceIdentifier(c);r===f&&l.resolve(a)}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=g(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(o){}}}catch(u){i.e(u)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===se?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(o){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se;return this.component?this.component.multipleInstances?e:se:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var le,fe,he=function(){function e(t){k(this,e),this.name=t,this.providers=new Map}return w(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new ce(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),de=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(fe||(fe={}));var pe={debug:fe.DEBUG,verbose:fe.VERBOSE,info:fe.INFO,warn:fe.WARN,error:fe.ERROR,silent:fe.SILENT},ve=fe.INFO,me=(r(le={},fe.DEBUG,"log"),r(le,fe.VERBOSE,"log"),r(le,fe.INFO,"info"),r(le,fe.WARN,"warn"),r(le,fe.ERROR,"error"),le),ye=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=me[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},ge=function(){function e(t){k(this,e),this.name=t,this._logLevel=ve,this._logHandler=ye,this._userLogHandler=null,de.push(this)}return w(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in fe))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?pe[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,fe.DEBUG].concat(t)),this._logHandler.apply(this,[this,fe.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,fe.VERBOSE].concat(t)),this._logHandler.apply(this,[this,fe.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,fe.INFO].concat(t)),this._logHandler.apply(this,[this,fe.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,fe.WARN].concat(t)),this._logHandler.apply(this,[this,fe.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,fe.ERROR].concat(t)),this._logHandler.apply(this,[this,fe.ERROR].concat(t))}}]),e}();var ke,be;var we=new WeakMap,_e=new WeakMap,Ee=new WeakMap,xe=new WeakMap,Se=new WeakMap;var Te={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return _e.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Ee.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ne(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function Ie(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(be||(be=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Ae(this),n),Ne(we.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ne(e.apply(Ae(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[Ae(this),t].concat(r));return Ee.set(a,t.sort?t.sort():[t]),Ne(a)}}function Ce(e){return"function"===typeof e?Ie(e):(e instanceof IDBTransaction&&function(e){if(!_e.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));_e.set(e,t)}}(e),t=e,(ke||(ke=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,Te):e);var t}function Ne(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(Ne(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&we.set(t,e)})).catch((function(){})),Se.set(t,e),t}(e);if(xe.has(e))return xe.get(e);var t=Ce(e);return t!==e&&(xe.set(e,t),Se.set(t,e)),t}var Ae=function(e){return Se.get(e)};var Re,Pe,Oe=["get","getKey","getAll","getAllKeys","count"],De=["put","add","delete","clear"],Le=new Map;function Me(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(Le.get(t))return Le.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=De.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||Oe.includes(n))){var a=function(){var e=h(l().mark((function e(t){var a,o,u,s,c,f,h=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=h.length,c=new Array(s>1?s-1:0),f=1;f<s;f++)c[f-1]=h[f];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return Le.set(t,a),a}}}Te=function(e){return a(a({},e),{},{get:function(t,n,r){return Me(t,n)||e.get(t,n,r)},has:function(t,n){return!!Me(t,n)||e.has(t,n)}})}(Te);var Ue=function(){function e(t){k(this,e),this.container=t}return w(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Fe="@firebase/app",Ve="0.11.4",je=new ge("@firebase/app"),ze="[DEFAULT]",Be=(r(Re={},Fe,"fire-core"),r(Re,"@firebase/app-compat","fire-core-compat"),r(Re,"@firebase/analytics","fire-analytics"),r(Re,"@firebase/analytics-compat","fire-analytics-compat"),r(Re,"@firebase/app-check","fire-app-check"),r(Re,"@firebase/app-check-compat","fire-app-check-compat"),r(Re,"@firebase/auth","fire-auth"),r(Re,"@firebase/auth-compat","fire-auth-compat"),r(Re,"@firebase/database","fire-rtdb"),r(Re,"@firebase/data-connect","fire-data-connect"),r(Re,"@firebase/database-compat","fire-rtdb-compat"),r(Re,"@firebase/functions","fire-fn"),r(Re,"@firebase/functions-compat","fire-fn-compat"),r(Re,"@firebase/installations","fire-iid"),r(Re,"@firebase/installations-compat","fire-iid-compat"),r(Re,"@firebase/messaging","fire-fcm"),r(Re,"@firebase/messaging-compat","fire-fcm-compat"),r(Re,"@firebase/performance","fire-perf"),r(Re,"@firebase/performance-compat","fire-perf-compat"),r(Re,"@firebase/remote-config","fire-rc"),r(Re,"@firebase/remote-config-compat","fire-rc-compat"),r(Re,"@firebase/storage","fire-gcs"),r(Re,"@firebase/storage-compat","fire-gcs-compat"),r(Re,"@firebase/firestore","fire-fst"),r(Re,"@firebase/firestore-compat","fire-fst-compat"),r(Re,"@firebase/vertexai","fire-vertex"),r(Re,"fire-js","fire-js"),r(Re,"firebase","fire-js-all"),Re),qe=new Map,He=new Map,We=new Map;function Ke(e,t){try{e.container.addComponent(t)}catch(n){je.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Ge(e){var t=e.name;if(We.has(t))return je.debug("There were multiple attempts to register component ".concat(t,".")),!1;We.set(t,e);var n,r=g(qe.values());try{for(r.s();!(n=r.n()).done;){Ke(n.value,e)}}catch(o){r.e(o)}finally{r.f()}var i,a=g(He.values());try{for(a.s();!(i=a.n()).done;){Ke(i.value,e)}}catch(o){a.e(o)}finally{a.f()}return!0}function Qe(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Ye(e){return null!==e&&void 0!==e&&void 0!==e.settings}var Xe=(r(Pe={},"no-app","No Firebase App '{$appName}' has been created - call initializeApp() first"),r(Pe,"bad-app-name","Illegal App name: '{$appName}'"),r(Pe,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),r(Pe,"app-deleted","Firebase App named '{$appName}' already deleted"),r(Pe,"server-app-deleted","Firebase Server App has been deleted"),r(Pe,"no-options","Need to provide options, when not being deployed to hosting via source."),r(Pe,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),r(Pe,"invalid-log-argument","First argument to `onLog` must be null or a function."),r(Pe,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),r(Pe,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),r(Pe,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),r(Pe,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),r(Pe,"finalization-registry-not-supported","FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry."),r(Pe,"invalid-server-app-environment","FirebaseServerApp is not for use in browser environments."),Pe),$e=new Y("app","Firebase",Xe),Je=function(){function e(t,n,r){var i=this;k(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ue("app",(function(){return i}),"PUBLIC"))}return w(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw $e.create("app-deleted",{appName:this._name})}}]),e}();var Ze="11.6.0";function et(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){var r=t;t={name:r}}var i=Object.assign({name:ze,automaticDataCollectionEnabled:!1},t),a=i.name;if("string"!==typeof a||!a)throw $e.create("bad-app-name",{appName:String(a)});if(n||(n=j()),!n)throw $e.create("no-options");var o=qe.get(a);if(o){if(Z(n,o.options)&&Z(i,o.config))return o;throw $e.create("duplicate-app",{appName:a})}var u,s=new he(a),c=g(We.values());try{for(c.s();!(u=c.n()).done;){var l=u.value;s.addComponent(l)}}catch(h){c.e(h)}finally{c.f()}var f=new Je(n,i,s);return qe.set(a,f),f}function tt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ze,t=qe.get(e);if(!t&&e===ze&&j())return et();if(!t)throw $e.create("no-app",{appName:e});return t}function nt(e,t,n){var r,i=null!==(r=Be[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void je.warn(u.join(" "))}Ge(new ue("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}var rt="firebase-heartbeat-store",it=null;function at(){return it||(it=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=Ne(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(Ne(u.result),e.oldVersion,e.newVersion,Ne(u.transaction),e)})),r&&u.addEventListener("blocked",(function(e){return r(e.oldVersion,e.newVersion,e)})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(e){return a(e.oldVersion,e.newVersion,e)}))})).catch((function(){})),s}("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)try{e.createObjectStore(rt)}catch(n){console.warn(n)}}}).catch((function(e){throw $e.create("idb-open",{originalErrorMessage:e.message})}))),it}function ot(e){return ut.apply(this,arguments)}function ut(){return ut=h(l().mark((function e(t){var n,r,i,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,at();case 3:return n=e.sent,r=n.transaction(rt),e.next=7,r.objectStore(rt).get(lt(t));case 7:return i=e.sent,e.next=10,r.done;case 10:return e.abrupt("return",i);case 13:e.prev=13,e.t0=e.catch(0),e.t0 instanceof Q?je.warn(e.t0.message):(a=$e.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),je.warn(a.message));case 16:case"end":return e.stop()}}),e,null,[[0,13]])}))),ut.apply(this,arguments)}function st(e,t){return ct.apply(this,arguments)}function ct(){return ct=h(l().mark((function e(t,n){var r,i,a,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,at();case 3:return r=e.sent,i=r.transaction(rt,"readwrite"),a=i.objectStore(rt),e.next=8,a.put(n,lt(t));case 8:return e.next=10,i.done;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),e.t0 instanceof Q?je.warn(e.t0.message):(o=$e.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),je.warn(o.message));case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),ct.apply(this,arguments)}function lt(e){return"".concat(e.name,"!").concat(e.options.appId)}var ft=function(){function e(t){var n=this;k(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new vt(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return w(e,[{key:"triggerHeartbeat",value:function(){var e=h(l().mark((function e(){var t,n,r,i,a,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r=this.container.getProvider("platform-logger").getImmediate(),i=r.getPlatformInfoString(),a=ht(),null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)){e.next=10;break}return e.next=7,this._heartbeatsCachePromise;case 7:if(this._heartbeatsCache=e.sent,null!=(null===(n=this._heartbeatsCache)||void 0===n?void 0:n.heartbeats)){e.next=10;break}return e.abrupt("return");case 10:if(this._heartbeatsCache.lastSentHeartbeatDate!==a&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===a}))){e.next=14;break}return e.abrupt("return");case 14:this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>30&&(o=yt(this._heartbeatsCache.heartbeats),this._heartbeatsCache.heartbeats.splice(o,1));case 16:return e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 19:e.prev=19,e.t0=e.catch(0),je.warn(e.t0);case 22:case"end":return e.stop()}}),e,this,[[0,19]])})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=h(l().mark((function e(){var t,n,r,i,a,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,null!==this._heartbeatsCache){e.next=4;break}return e.next=4,this._heartbeatsCachePromise;case 4:if(null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)&&0!==this._heartbeatsCache.heartbeats.length){e.next=6;break}return e.abrupt("return","");case 6:if(n=ht(),r=dt(this._heartbeatsCache.heartbeats),i=r.heartbeatsToSend,a=r.unsentEntries,o=D(JSON.stringify({version:2,heartbeats:i})),this._heartbeatsCache.lastSentHeartbeatDate=n,!(a.length>0)){e.next=16;break}return this._heartbeatsCache.heartbeats=a,e.next=14,this._storage.overwrite(this._heartbeatsCache);case 14:e.next=18;break;case 16:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 18:return e.abrupt("return",o);case 21:return e.prev=21,e.t0=e.catch(0),je.warn(e.t0),e.abrupt("return","");case 25:case"end":return e.stop()}}),e,this,[[0,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function ht(){return(new Date).toISOString().substring(0,10)}function dt(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=g(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),mt(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),mt(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var u=o();if("break"===u)break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var pt,vt=function(){function e(t){k(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return w(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=h(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(G()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=h(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,ot(this.app);case 9:if(!(null===(t=e.sent)||void 0===t?void 0:t.heartbeats)){e.next=14;break}return e.abrupt("return",t);case 14:return e.abrupt("return",{heartbeats:[]});case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=h(l().mark((function e(t){var n,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",st(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=h(l().mark((function e(t){var n,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",st(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(d(r.heartbeats),d(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function mt(e){return D(JSON.stringify({version:2,heartbeats:e})).length}function yt(e){if(0===e.length)return-1;for(var t=0,n=e[0].date,r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}pt="",Ge(new ue("platform-logger",(function(e){return new Ue(e)}),"PRIVATE")),Ge(new ue("heartbeat",(function(e){return new ft(e)}),"PRIVATE")),nt(Fe,Ve,pt),nt(Fe,Ve,"esm2017"),nt("fire-js","");function gt(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=S(e)););return e}function kt(){return kt="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=gt(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},kt.apply(this,arguments)}nt("firebase","11.6.0","app");var bt,wt,_t="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Et={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var a=e.g[3],o=t+(a^n&(i^a))+r[0]+3614090360&4294967295;o=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=n+(o<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^a&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~a))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((a=(t=n+((o=t+(i^(n|~a))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=a+((o=i+(t^(a|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var a=0|e[i];r&&a==t||(n[i]=a,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}(t,(function(){this.blockSize=-1})),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,a=this.h,o=0;o<t;){if(0==a)for(;o<=r;)n(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(i[a++]=e.charCodeAt(o++),a==this.blockSize){n(this,i),a=0;break}}else for(;o<t;)if(i[a++]=e[o++],a==this.blockSize){n(this,i),a=0;break}}this.h=a,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function a(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new r([0|e],0>e?-1:0)})):new r([0|e],0>e?-1:0)}function o(e){if(isNaN(e)||!isFinite(e))return u;if(0>e)return h(o(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var u=a(0),s=a(1),c=a(16777216);function l(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function f(e){return-1==e.h}function h(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(s)}function d(e,t){return e.add(h(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function v(e,t){this.g=e,this.h=t}function m(e,t){if(l(t))throw Error("division by zero");if(l(e))return new v(u,u);if(f(e))return t=m(h(e),t),new v(h(t.g),h(t.h));if(f(t))return t=m(e,h(t)),new v(h(t.g),t.h);if(30<e.g.length){if(f(e)||f(t))throw Error("slowDivide_ only works with positive integers.");for(var n=s,r=t;0>=r.l(e);)n=y(n),r=y(r);var i=g(n,1),a=g(r,1);for(r=g(r,2),n=g(n,2);!l(r);){var c=a.add(r);0>=c.l(e)&&(i=i.add(n),a=c),r=g(r,1),n=g(n,1)}return t=d(e,i.j(t)),new v(i,t)}for(i=u;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(a=o(n)).j(t);f(c)||0<c.l(e);)c=(a=o(n-=r)).j(t);l(a)&&(a=s),i=i.add(a),e=d(e,c)}return new v(i,e)}function y(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function g(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,a=[],o=0;o<i;o++)a[o]=0<t?e.i(o+n)>>>t|e.i(o+n+1)<<32-t:e.i(o+n);return new r(a,e.h)}(e=r.prototype).m=function(){if(f(this))return-h(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(l(this))return"0";if(f(this))return"-"+h(this).toString(e);for(var t=o(Math.pow(e,6)),n=this,r="";;){var i=m(n,t).g,a=((0<(n=d(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(l(n=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return f(e=d(this,e))?-1:l(e)?0:1},e.abs=function(){return f(this)?h(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,a=0;a<=t;a++){var o=i+(65535&this.i(a))+(65535&e.i(a)),u=(o>>>16)+(this.i(a)>>>16)+(e.i(a)>>>16);i=u>>>16,o&=65535,u&=65535,n[a]=u<<16|o}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(l(this)||l(e))return u;if(f(this))return f(e)?h(this).j(h(e)):h(h(this).j(e));if(f(e))return h(this.j(h(e)));if(0>this.l(c)&&0>e.l(c))return o(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var a=0;a<e.g.length;a++){var s=this.i(i)>>>16,d=65535&this.i(i),v=e.i(a)>>>16,m=65535&e.i(a);n[2*i+2*a]+=d*m,p(n,2*i+2*a),n[2*i+2*a+1]+=s*m,p(n,2*i+2*a+1),n[2*i+2*a+1]+=d*v,p(n,2*i+2*a+1),n[2*i+2*a+2]+=s*v,p(n,2*i+2*a+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return m(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,wt=Et.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=o,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=o(Math.pow(n,8)),i=u,a=0;a<t.length;a+=8){var s=Math.min(8,t.length-a),c=parseInt(t.substring(a,a+s),n);8>s?(s=o(Math.pow(n,s)),i=i.j(s).add(o(c))):i=(i=i.j(r)).add(o(c))}return i},bt=Et.Integer=r}).apply("undefined"!==typeof _t?_t:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var xt,St,Tt,It,Ct,Nt,At,Rt,Pt,Ot="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Dt={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Ot&&Ot];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var a=0;a<e.length-1;a++){var o=e[a];if(!(o in i))break e;i=i[o]}(r=r(a=i[e=e[e.length-1]]))!=a&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(e,t){return t}))}}));var r=r||{},i=this||self;function a(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function u(e,t,n){return e.call.apply(e.bind,arguments)}function c(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function l(e,t,n){return(l=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?u:c).apply(null,arguments)}function f(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function h(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function d(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function p(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(a(r)){var i=e.length||0,o=r.length||0;e.length=i+o;for(var u=0;u<o;u++)e[i+u]=r[u]}else e.push(r)}}var v=function(){function e(t,n){k(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return w(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}();function m(e){return/^[\s\xa0]*$/.test(e)}function y(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function b(e){return b[" "](e),e}b[" "]=function(){};var _=-1!=y().indexOf("Gecko")&&!(-1!=y().toLowerCase().indexOf("webkit")&&-1==y().indexOf("Edge"))&&!(-1!=y().indexOf("Trident")||-1!=y().indexOf("MSIE"))&&-1==y().indexOf("Edge");function E(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function T(e){var t={};for(var n in e)t[n]=e[n];return t}var I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<I.length;a++)n=I[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function A(e){var t=1;e=e.split(":");for(var n=[];0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function R(e){i.setTimeout((function(){throw e}),0)}function P(){var e=F,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var O,D=function(){function e(){k(this,e),this.h=this.g=null}return w(e,[{key:"add",value:function(e,t){var n=L.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),L=new v((function(){return new M}),(function(e){return e.reset()})),M=function(){function e(){k(this,e),this.next=this.g=this.h=null}return w(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}(),U=!1,F=new D,V=function(){var e=i.Promise.resolve(void 0);O=function(){e.then(j)}},j=function(){for(var e;e=P();){try{e.h.call(e.g)}catch(n){R(n)}var t=L;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}U=!1};function z(){this.s=this.s,this.C=this.C}function B(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}z.prototype.s=!1,z.prototype.ma=function(){this.s||(this.s=!0,this.N())},z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},B.prototype.h=function(){this.defaultPrevented=!0};var q=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{var n=function(){};i.addEventListener("test",n,t),i.removeEventListener("test",n,t)}catch(n){}return e}();function H(e,t){if(B.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(_){e:{try{b(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:W[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&H.aa.h.call(this)}}h(H,B);var W={2:"touch",3:"pen",4:"mouse"};H.prototype.h=function(){H.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var K="closure_listenable_"+(1e6*Math.random()|0),G=0;function Q(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++G,this.da=this.fa=!1}function Y(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function X(e){this.src=e,this.g={},this.h=0}function $(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Array.prototype.indexOf.call(i,t,void 0);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Y(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function J(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.da&&a.listener==t&&a.capture==!!n&&a.ha==r)return i}return-1}X.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=J(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new Q(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var Z="closure_lm_"+(1e6*Math.random()|0),ee={};function te(e,t,n,r,i){if(r&&r.once)return re(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)te(e,t[a],n,r,i);return null}return n=le(n),e&&e[K]?e.K(t,n,o(r)?!!r.capture:!!r,i):ne(e,t,n,!1,r,i)}function ne(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var u=o(i)?!!i.capture:!!i,s=se(e);if(s||(e[Z]=s=new X(e)),(n=s.add(t,n,r,u,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=ue;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)q||(i=u),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(oe(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function re(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)re(e,t[a],n,r,i);return null}return n=le(n),e&&e[K]?e.L(t,n,o(r)?!!r.capture:!!r,i):ne(e,t,n,!0,r,i)}function ie(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)ie(e,t[a],n,r,i);else r=o(r)?!!r.capture:!!r,n=le(n),e&&e[K]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=J(a=e.g[t],n,r,i))&&(Y(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=se(e))&&(t=e.g[t.toString()],e=-1,t&&(e=J(t,n,r,i)),(n=-1<e?t[e]:null)&&ae(n))}function ae(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[K])$(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(oe(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=se(t))?($(n,e),0==n.h&&(n.src=null,t[Z]=null)):Y(e)}}}function oe(e){return e in ee?ee[e]:ee[e]="on"+e}function ue(e,t){if(e.da)e=!0;else{t=new H(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&ae(e),e=n.call(r,t)}return e}function se(e){return(e=e[Z])instanceof X?e:null}var ce="__closure_events_fn_"+(1e9*Math.random()>>>0);function le(e){return"function"===typeof e?e:(e[ce]||(e[ce]=function(t){return e.handleEvent(t)}),e[ce])}function fe(){z.call(this),this.i=new X(this),this.M=this,this.F=null}function he(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new B(t,e);else if(t instanceof B)t.target=t.target||e;else{var i=t;N(t=new B(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=de(o,r,!0,t)&&i}if(i=de(o=t.g=e,r,!0,t)&&i,i=de(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=de(o=t.g=n[a],r,!1,t)&&i}function de(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.da&&o.capture==n){var u=o.listener,s=o.ha||o.src;o.fa&&$(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}function pe(e,t,n){if("function"===typeof e)n&&(e=l(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=l(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function ve(e){e.g=pe((function(){e.g=null,e.i&&(e.i=!1,ve(e))}),e.l);var t=e.h;e.h=null,e.m.apply(null,t)}h(fe,z),fe.prototype[K]=!0,fe.prototype.removeEventListener=function(e,t,n,r){ie(this,e,t,n,r)},fe.prototype.N=function(){if(fe.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Y(n[r]);delete t.g[e],t.h--}}this.F=null},fe.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},fe.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var me=function(e){x(n,e);var t=C(n);function n(e,r){var i;return k(this,n),(i=t.call(this)).m=e,i.l=r,i.h=null,i.i=!1,i.g=null,i}return w(n,[{key:"j",value:function(e){this.h=arguments,this.g?this.i=!0:ve(this)}},{key:"N",value:function(){kt(S(n.prototype),"N",this).call(this),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(z);function ye(e){z.call(this),this.h=e,this.g={}}h(ye,z);var ge=[];function ke(e){E(e.g,(function(e,t){this.g.hasOwnProperty(t)&&ae(e)}),e),e.g={}}ye.prototype.N=function(){ye.aa.N.call(this),ke(this)},ye.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var be=i.JSON.stringify,we=i.JSON.parse,_e=function(){function e(){k(this,e)}return w(e,[{key:"stringify",value:function(e){return i.JSON.stringify(e,void 0)}},{key:"parse",value:function(e){return i.JSON.parse(e,void 0)}}]),e}();function Ee(){}function xe(e){return e.h||(e.h=e.i())}function Se(){}Ee.prototype.h=null;var Te={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ie(){B.call(this,"d")}function Ce(){B.call(this,"c")}h(Ie,B),h(Ce,B);var Ne={},Ae=null;function Re(){return Ae=Ae||new fe}function Pe(e){B.call(this,Ne.La,e)}function Oe(e){var t=Re();he(t,new Pe(t))}function De(e,t){B.call(this,Ne.STAT_EVENT,e),this.stat=t}function Le(e){var t=Re();he(t,new De(t,e))}function Me(e,t){B.call(this,Ne.Ma,e),this.size=t}function Ue(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout((function(){e()}),t)}function Fe(){this.g=!0}function Ve(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return be(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}Ne.La="serverreachability",h(Pe,B),Ne.STAT_EVENT="statevent",h(De,B),Ne.Ma="timingevent",h(Me,B),Fe.prototype.xa=function(){this.g=!1},Fe.prototype.info=function(){};var je,ze={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Be={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function qe(){}function He(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new ye(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new We}function We(){this.i=null,this.g="",this.h=!1}h(qe,Ee),qe.prototype.g=function(){return new XMLHttpRequest},qe.prototype.i=function(){return{}},je=new qe;var Ke={},Ge={};function Qe(e,t,n){e.L=1,e.v=wt(vt(t)),e.m=n,e.P=!0,Ye(e,null)}function Ye(e,t){e.F=Date.now(),Je(e),e.A=vt(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),Kt(n.i,"t",r),e.C=0,n=e.j.J,e.h=new We,e.g=Dn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new me(l(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(ge[0]=i.toString()),i=ge);for(var a=0;a<i.length;a++){var o=te(n,i[a],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}t=e.H?T(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Oe(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.i,e.u,e.A,e.l,e.R,e.m)}function Xe(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function $e(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ge:(n=Number(t.substring(n,r)),isNaN(n)?Ke:(r+=1)+n>t.length?Ge:(t=t.slice(r,r+n),e.C=r+n,t))}function Je(e){e.S=Date.now()+e.I,Ze(e,e.I)}function Ze(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ue(l(e.ba,e),t)}function et(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function tt(e){0==e.j.G||e.J||Nn(e.j,e)}function nt(e){et(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ke(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function rt(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||st(n.h,e)))if(!e.K&&st(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Cn(n),gn(n)}Sn(n),Le(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ue(l(n.Za,n),6e3));if(1>=ut(n.h)&&n.ca){try{n.ca()}catch(a){}n.ca=void 0}}else Rn(n,11)}else if((e.K||n.g==e)&&Cn(n),!m(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.T=a[0],a=a[1],2==n.G)if("c"==a[0]){n.K=a[1],n.ia=a[2];var o=a[3];null!=o&&(n.la=o,n.j.info("VER="+n.la));var u=a[4];null!=u&&(n.Aa=u,n.j.info("SVER="+n.Aa));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var f=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(f){var h=r.h;h.g||-1==f.indexOf("spdy")&&-1==f.indexOf("quic")&&-1==f.indexOf("h2")||(h.j=h.l,h.g=new Set,h.h&&(ct(h,h.h),h.h=null))}if(r.D){var d=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;d&&(r.ya=d,bt(r.I,r.D,d))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var p=e;if((r=n).qa=On(r,r.J?r.ia:null,r.W),p.K){lt(r.h,p);var v=p,y=r.L;y&&(v.I=y),v.B&&(et(v),Je(v)),r.g=p}else xn(r);0<n.i.length&&bn(n)}else"stop"!=a[0]&&"close"!=a[0]||Rn(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Rn(n,7):yn(n):"noop"!=a[0]&&n.l&&n.l.ta(a),n.v=0)}Oe()}catch(a){}}He.prototype.ca=function(e){e=e.target;var t=this.M;t&&3==dn(e)?t.j():this.Y(e)},He.prototype.Y=function(e){try{if(e==this.g)e:{var t=dn(this.g),n=this.g.Ba();this.g.Z();if(!(3>t)&&(3!=t||this.g&&(this.h.h||this.g.oa()||pn(this.g)))){this.J||4!=t||7==n||Oe(),et(this);var r=this.g.Z();this.X=r;t:if(Xe(this)){var a=pn(this.g);e="";var o=a.length,u=4==dn(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){nt(this),tt(this);var s="";break t}this.h.i=new i.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:!(u&&n==o-1)});a.length=0,this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.oa();if(this.o=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.i,this.u,this.A,this.l,this.R,t,r),this.o){if(this.T&&!this.K){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!m(c)){var f=c;break t}}f=null}if(!(r=f)){this.o=!1,this.s=3,Le(12),nt(this),tt(this);break e}Ve(this.i,this.l,r,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,rt(this,r)}if(this.P){var h;for(r=!0;!this.J&&this.C<s.length;){if((h=$e(this,s))==Ge){4==t&&(this.s=4,Le(14),r=!1),Ve(this.i,this.l,null,"[Incomplete Response]");break}if(h==Ke){this.s=4,Le(15),Ve(this.i,this.l,s,"[Invalid Chunk]"),r=!1;break}Ve(this.i,this.l,h,null),rt(this,h)}if(Xe(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=t||0!=s.length||this.h.h||(this.s=1,Le(16),r=!1),this.o=this.o&&r,r){if(0<s.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+s.length),Tn(d),d.M=!0,Le(11))}}else Ve(this.i,this.l,s,"[Invalid Chunked Response]"),nt(this),tt(this)}else Ve(this.i,this.l,s,null),rt(this,s);4==t&&nt(this),this.o&&!this.J&&(4==t?Nn(this.j,this):(this.o=!1,Je(this)))}else(function(e){var t={};e=(e.g&&2<=dn(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(var n=0;n<e.length;n++)if(!m(e[n])){var r=A(e[n]),i=r[0];if("string"===typeof(r=r[1])){r=r.trim();var a=t[i]||[];t[i]=a,a.push(r)}}!function(e,t){for(var n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==r&&0<s.indexOf("Unknown SID")?(this.s=3,Le(12)):(this.s=0,Le(13)),nt(this),tt(this)}}}catch(t){}},He.prototype.cancel=function(){this.J=!0,nt(this)},He.prototype.ba=function(){this.B=null;var e=Date.now();0<=e-this.S?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.i,this.A),2!=this.L&&(Oe(),Le(17)),nt(this),this.s=2,tt(this)):Ze(this,this.S-e)};var it=w((function e(t,n){k(this,e),this.g=t,this.map=n}));function at(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ot(e){return!!e.h||!!e.g&&e.g.size>=e.j}function ut(e){return e.h?1:e.g?e.g.size:0}function st(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function ct(e,t){e.g?e.g.add(t):e.h=t}function lt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function ft(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=g(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return d(e.i)}function ht(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(a(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(a(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(a(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}at.prototype.cancel=function(){if(this.i=ft(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=g(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}};var dt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function pt(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof pt){this.h=e.h,mt(this,e.j),this.o=e.o,this.g=e.g,yt(this,e.s),this.l=e.l;var t=e.i,n=new Bt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),gt(this,n),this.m=e.m}else e&&(t=String(e).match(dt))?(this.h=!1,mt(this,t[1]||"",!0),this.o=_t(t[2]||""),this.g=_t(t[3]||"",!0),yt(this,t[4]),this.l=_t(t[5]||"",!0),gt(this,t[6]||"",!0),this.m=_t(t[7]||"")):(this.h=!1,this.i=new Bt(null,this.h))}function vt(e){return new pt(e)}function mt(e,t,n){e.j=n?_t(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function yt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function gt(e,t,n){t instanceof Bt?(e.i=t,function(e,t){t&&!e.j&&(qt(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Ht(this,t),Kt(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Et(t,jt)),e.i=new Bt(t,e.h))}function bt(e,t,n){e.i.set(t,n)}function wt(e){return bt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function _t(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Et(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Pt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Pt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}pt.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Et(t,Ut,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(Et(t,Ut,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Et(n,"/"==n.charAt(0)?Vt:Ft,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",Et(n,zt)),e.join("")};var Lt,Ut=/[#\/\?@]/g,Ft=/[#\?:]/g,Vt=/[#\?]/g,jt=/[#\?@]/g,zt=/#/g;function Bt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function qt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Ht(e,t){qt(e),t=Gt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Wt(e,t){return qt(e),t=Gt(e,t),e.g.has(t)}function Kt(e,t,n){Ht(e,t),0<n.length&&(e.i=null,e.g.set(Gt(e,t),d(n)),e.h+=n.length)}function Gt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Qt(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(a){}}function Yt(){this.g=new _e}function Xt(e,t,n){var r=n||"";try{ht(e,(function(e,n){var i=e;o(e)&&(i=be(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function $t(e){this.l=e.Ub||null,this.j=e.eb||!1}function Jt(e,t){fe.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Zt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function en(e){e.readyState=4,e.l=null,e.j=null,e.v=null,tn(e)}function tn(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function nn(e){var t="";return E(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function rn(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=nn(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):bt(e,t,n))}function an(e){fe.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=Bt.prototype).add=function(e,t){qt(this),this.i=null,e=Gt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){qt(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},e.na=function(){qt(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},e.V=function(e){qt(this);var t=[];if("string"===typeof e)Wt(this,e)&&(t=t.concat(this.g.get(Gt(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return qt(this),this.i=null,Wt(this,e=Gt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.V(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")},h($t,Ee),$t.prototype.g=function(){return new Jt(this.l,this.j)},$t.prototype.i=(Lt={},function(){return Lt}),h(Jt,fe),(e=Jt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,tn(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,en(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,tn(this)),this.g&&(this.readyState=3,tn(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Zt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?en(this):tn(this),3==this.readyState&&Zt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,en(this))},e.Qa=function(e){this.g&&(this.response=e,en(this))},e.ga=function(){this.g&&en(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Jt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),h(an,fe);var on=/^https?$/i,un=["POST","PUT"];function sn(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,cn(e),fn(e)}function cn(e){e.A||(e.A=!0,he(e,"complete"),he(e,"error"))}function ln(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=dn(e)||2!=e.Z()))if(e.u&&4==dn(e))pe(e.Ea,0,e);else if(he(e,"readystatechange"),4==dn(e)){e.h=!1;try{var t,n=e.Z();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var a=!0;break e;default:a=!1}if(!(t=a)){var o;if(o=0===n){var u=String(e.D).match(dt)[1]||null;!u&&i.self&&i.self.location&&(u=i.self.location.protocol.slice(0,-1)),o=!on.test(u?u.toLowerCase():"")}t=o}if(t)he(e,"complete"),he(e,"success");else{e.m=6;try{var s=2<dn(e)?e.g.statusText:""}catch(c){s=""}e.l=s+" ["+e.Z()+"]",cn(e)}}finally{fn(e)}}}function fn(e,t){if(e.g){hn(e);var n=e.g,r=e.v[0]?function(){}:null;e.g=null,e.v=null,t||he(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function hn(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function dn(e){return e.g?e.g.readyState:0}function pn(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Mt){return null}}function vn(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function mn(e){this.Aa=0,this.i=[],this.j=new Fe,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=vn("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=vn("baseRetryDelayMs",5e3,e),this.cb=vn("retryDelaySeedMs",1e4,e),this.Wa=vn("forwardChannelMaxRetries",2,e),this.wa=vn("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new at(e&&e.concurrentRequestLimit),this.Da=new Yt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function yn(e){if(kn(e),3==e.G){var t=e.U++,n=vt(e.I);if(bt(n,"SID",e.K),bt(n,"RID",t),bt(n,"TYPE","terminate"),_n(e,n),(t=new He(e,e.j,t)).L=2,t.v=wt(vt(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=Dn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),Je(t)}Pn(e)}function gn(e){e.g&&(Tn(e),e.g.cancel(),e.g=null)}function kn(e){gn(e),e.u&&(i.clearTimeout(e.u),e.u=null),Cn(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function bn(e){if(!ot(e.h)&&!e.s){e.s=!0;var t=e.Ga;O||V(),U||(O(),U=!0),F.add(t,e),e.B=0}}function wn(e,t){var n;n=t?t.l:e.U++;var r=vt(e.I);bt(r,"SID",e.K),bt(r,"RID",n),bt(r,"AID",e.T),_n(e,r),e.m&&e.o&&rn(r,e.m,e.o),n=new He(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=En(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),ct(e.h,n),Qe(n,r,t)}function _n(e,t){e.H&&E(e.H,(function(e,n){bt(t,n,e)})),e.l&&ht({},(function(e,n){bt(t,n,e)}))}function En(e,t,n){n=Math.min(e.i.length,n);var r=e.l?l(e.l.Na,e.l,e):null;e:for(var i=e.i,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].g,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].g,f=i[s].map;if(0>(c-=a))a=Math.max(0,i[s].g-100),u=!1;else try{Xt(f,o,"req"+c+"_")}catch(h){r&&r(f)}}if(u){r=o.join("&");break e}}return e=e.i.splice(0,n),t.D=e,r}function xn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;O||V(),U||(O(),U=!0),F.add(t,e),e.v=0}}function Sn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Ue(l(e.Fa,e),An(e,e.v)),e.v++,!0)}function Tn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function In(e){e.g=new He(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=vt(e.qa);bt(t,"RID","rpc"),bt(t,"SID",e.K),bt(t,"AID",e.T),bt(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&bt(t,"TO",e.ja),bt(t,"TYPE","xmlhttp"),_n(e,t),e.m&&e.o&&rn(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=wt(vt(t)),n.m=null,n.P=!0,Ye(n,e)}function Cn(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function Nn(e,t){var n=null;if(e.g==t){Cn(e),Tn(e),e.g=null;var r=2}else{if(!st(e.h,t))return;n=t.D,lt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;he(r=Re(),new Me(r,n)),bn(e)}else xn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(ut(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Ue(l(e.Ga,e,t),An(e,e.B)),e.B++,!0))}(e,t)||2==r&&Sn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:Rn(e,5);break;case 4:Rn(e,10);break;case 3:Rn(e,6);break;default:Rn(e,2)}}function An(e,t){var n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function Rn(e,t){if(e.j.info("Error code "+t),2==t){var n=l(e.fb,e),r=e.Xa,a=!r;r=new pt(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||mt(r,"https"),wt(r),a?function(e,t){var n=new Fe;if(i.Image){var r=new Image;r.onload=f(Qt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=f(Qt,n,"TestLoadImage: error",!1,t,r),r.onabort=f(Qt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=f(Qt,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Fe;var n=new AbortController,r=setTimeout((function(){n.abort(),Qt(0,0,!1,t)}),1e4);fetch(e,{signal:n.signal}).then((function(e){clearTimeout(r),e.ok?Qt(0,0,!0,t):Qt(0,0,!1,t)})).catch((function(){clearTimeout(r),Qt(0,0,!1,t)}))}(r.toString(),n)}else Le(2);e.G=0,e.l&&e.l.sa(t),Pn(e),kn(e)}function Pn(e){if(e.G=0,e.ka=[],e.l){var t=ft(e.h);0==t.length&&0==e.i.length||(p(e.ka,t),p(e.ka,e.i),e.h.i.length=0,d(e.i),e.i.length=0),e.l.ra()}}function On(e,t,n){var r=n instanceof pt?vt(n):new pt(n);if(""!=r.g)t&&(r.g=t+"."+r.g),yt(r,r.s);else{var a=i.location;r=a.protocol,t=t?t+"."+a.hostname:a.hostname,a=+a.port;var o=new pt(null);r&&mt(o,r),t&&(o.g=t),a&&yt(o,a),n&&(o.l=n),r=o}return n=e.D,t=e.ya,n&&t&&bt(r,n,t),bt(r,"VER",e.la),_n(e,r),r}function Dn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new an(new $t({eb:n})):new an(e.pa)).Ha(e.J),t}function Ln(){}function Mn(){}function Un(e,t){fe.call(this),this.g=new mn(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!m(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!m(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new jn(this)}function Fn(e){Ie.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Vn(){Ce.call(this),this.status=1}function jn(e){this.g=e}(e=an.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():je.g(),this.v=this.o?xe(this.o):xe(je),this.g.onreadystatechange=l(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(c){return void sn(this,c)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var a in r)n.set(a,r[a]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var o,u=g(r.keys());try{for(u.s();!(o=u.n()).done;){var c=o.value;n.set(c,r.get(c))}}catch(m){u.e(m)}finally{u.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),a=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(un,t,void 0))||r||a||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var f,h=g(n);try{for(h.s();!(f=h.n()).done;){var d=s(f.value,2),p=d[0],v=d[1];this.g.setRequestHeader(p,v)}}catch(m){h.e(m)}finally{h.f()}this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{hn(this),this.u=!0,this.g.send(e),this.u=!1}catch(c){sn(this,c)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,he(this,"complete"),he(this,"abort"),fn(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),fn(this,!0)),an.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?ln(this):this.bb())},e.bb=function(){ln(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<dn(this)?this.g.status:-1}catch(Lt){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(Lt){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),we(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=mn.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Le(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=On(this,null,this.W),bn(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;var t=new He(this,this.j,e),n=this.o;if(this.S&&(n?N(n=T(n),this.S):n=this.S),null!==this.m||this.O||(t.H=n,n=null),this.P)e:{for(var r=0,i=0;i<this.i.length;i++){var a=this.i[i];if(void 0===(a="__data__"in a.map&&"string"===typeof(a=a.map.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.i.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=En(this,t,r),bt(i=vt(this.I),"RID",e),bt(i,"CVER",22),this.D&&bt(i,"X-HTTP-Session-Id",this.D),_n(this,i),n&&(this.O?r="headers="+encodeURIComponent(String(nn(n)))+"&"+r:this.m&&rn(i,this.m,n)),ct(this.h,t),this.Ua&&bt(i,"TYPE","init"),this.P?(bt(i,"$req",r),bt(i,"SID","null"),t.T=!0,Qe(t,i,null)):Qe(t,i,r),this.G=2}}else 3==this.G&&(e?wn(this,e):0==this.i.length||ot(this.h)||wn(this))},e.Fa=function(){if(this.u=null,In(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Ue(l(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Le(10),gn(this),In(this))},e.Za=function(){null!=this.C&&(this.C=null,gn(this),Sn(this),Le(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Le(2)):(this.j.info("Failed to ping google.com"),Le(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=Ln.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},Mn.prototype.g=function(e,t){return new Un(e,t)},h(Un,fe),Un.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Un.prototype.close=function(){yn(this.g)},Un.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=be(e),e=n);t.i.push(new it(t.Ya++,e)),3==t.G&&bn(t)},Un.prototype.N=function(){this.g.l=null,delete this.j,yn(this.g),delete this.g,Un.aa.N.call(this)},h(Fn,Ie),h(Vn,Ce),h(jn,Ln),jn.prototype.ua=function(){he(this.g,"a")},jn.prototype.ta=function(e){he(this.g,new Fn(e))},jn.prototype.sa=function(e){he(this.g,new Vn)},jn.prototype.ra=function(){he(this.g,"b")},Mn.prototype.createWebChannel=Mn.prototype.g,Un.prototype.send=Un.prototype.o,Un.prototype.open=Un.prototype.m,Un.prototype.close=Un.prototype.close,Rt=Dt.createWebChannelTransport=function(){return new Mn},At=Dt.getStatEventTarget=function(){return Re()},Nt=Dt.Event=Ne,Ct=Dt.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ze.NO_ERROR=0,ze.TIMEOUT=8,ze.HTTP_ERROR=6,It=Dt.ErrorCode=ze,Be.COMPLETE="complete",Tt=Dt.EventType=Be,Se.EventType=Te,Te.OPEN="a",Te.CLOSE="b",Te.ERROR="c",Te.MESSAGE="d",fe.prototype.listen=fe.prototype.K,St=Dt.WebChannel=Se,Dt.FetchXmlHttpFactory=$t,an.prototype.listenOnce=an.prototype.L,an.prototype.getLastError=an.prototype.Ka,an.prototype.getLastErrorCode=an.prototype.Ba,an.prototype.getStatus=an.prototype.Z,an.prototype.getResponseJson=an.prototype.Oa,an.prototype.getResponseText=an.prototype.oa,an.prototype.send=an.prototype.ea,an.prototype.setWithCredentials=an.prototype.Ha,xt=Dt.XhrIo=an}).apply("undefined"!==typeof Ot?Ot:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var Lt="@firebase/firestore",Mt="4.7.10",Ut=function(){function e(t){k(this,e),this.uid=t}return w(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Ut.UNAUTHENTICATED=new Ut(null),Ut.GOOGLE_CREDENTIALS=new Ut("google-credentials-uid"),Ut.FIRST_PARTY=new Ut("first-party-uid"),Ut.MOCK_USER=new Ut("mock-user");var Ft="11.5.0",Vt=new ge("@firebase/firestore");function jt(){return Vt.logLevel}function zt(e){if(Vt.logLevel<=fe.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Ht);Vt.debug.apply(Vt,["Firestore (".concat(Ft,"): ").concat(e)].concat(d(i)))}}function Bt(e){if(Vt.logLevel<=fe.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Ht);Vt.error.apply(Vt,["Firestore (".concat(Ft,"): ").concat(e)].concat(d(i)))}}function qt(e){if(Vt.logLevel<=fe.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Ht);Vt.warn.apply(Vt,["Firestore (".concat(Ft,"): ").concat(e)].concat(d(i)))}}function Ht(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Wt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Ft,") INTERNAL ASSERTION FAILED: ")+e;throw Bt(t),new Error(t)}function Kt(e,t){e||Wt()}function Gt(e,t){return e}var Qt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Yt=function(e){x(n,e);var t=C(n);function n(e,r){var i;return k(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return w(n)}(Q),Xt=w((function e(){var t=this;k(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),$t=w((function e(t,n){k(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),Jt=function(){function e(){k(this,e)}return w(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Ut.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Zt=function(){function e(t){k(this,e),this.token=t,this.changeListener=null}return w(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),en=function(){function e(t){k(this,e),this.t=t,this.currentUser=Ut.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return w(e,[{key:"start",value:function(e,t){var n=this;Kt(void 0===this.o);var r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new Xt;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new Xt,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(h(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){zt("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.o&&(n.auth.addAuthTokenListener(n.o),o())};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(zt("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Xt)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(zt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Kt("string"==typeof n.accessToken),new $t(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Kt(null===e||"string"==typeof e),new Ut(e)}}]),e}(),tn=function(){function e(t,n,r){k(this,e),this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=Ut.FIRST_PARTY,this.T=new Map}return w(e,[{key:"I",value:function(){return this.P?this.P():null}},{key:"headers",get:function(){this.T.set("X-Goog-AuthUser",this.l);var e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}]),e}(),nn=function(){function e(t,n,r){k(this,e),this.l=t,this.h=n,this.P=r}return w(e,[{key:"getToken",value:function(){return Promise.resolve(new tn(this.l,this.h,this.P))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Ut.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),rn=w((function e(t){k(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),an=function(){function e(t,n){k(this,e),this.A=n,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,Ye(t)&&t.settings.appCheckToken&&(this.V=t.settings.appCheckToken)}return w(e,[{key:"start",value:function(e,t){var n=this;Kt(void 0===this.o);var r=function(e){null!=e.error&&zt("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.R;return n.R=e.token,zt("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){zt("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.o&&n.appCheck.addTokenListener(n.o)};this.A.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.A.getImmediate({optional:!0});e?i(e):zt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this;if(this.V)return Promise.resolve(new rn(this.V));var t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Kt("string"==typeof t.token),e.R=t.token,new rn(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}]),e}();function on(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}function un(){return new TextEncoder}var sn=function(){function e(){k(this,e)}return w(e,null,[{key:"newId",value:function(){for(var e=62*Math.floor(256/62),t="";t.length<20;)for(var n=on(40),r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62));return t}}]),e}();function cn(e,t){return e<t?-1:e>t?1:0}function ln(e,t){for(var n=0;n<e.length&&n<t.length;){var r=e.codePointAt(n),i=t.codePointAt(n);if(r!==i){if(r<128&&i<128)return cn(r,i);var a=un(),o=hn(a.encode(fn(e,n)),a.encode(fn(t,n)));return 0!==o?o:cn(r,i)}n+=r>65535?2:1}return cn(e.length,t.length)}function fn(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function hn(e,t){for(var n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return cn(e[n],t[n]);return cn(e.length,t.length)}function dn(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}var pn=-62135596800,vn=1e6,mn=function(){function e(t,n){if(k(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Yt(Qt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Yt(Qt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<pn)throw new Yt(Qt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Yt(Qt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return w(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/vn}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?cn(this.nanoseconds,e.nanoseconds):cn(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds-pn;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor((t-1e3*n)*vn))}}]),e}(),yn=function(){function e(t){k(this,e),this.timestamp=t}return w(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new mn(0,0))}},{key:"max",value:function(){return new e(new mn(253402300799,999999999))}}]),e}(),gn="__name__",kn=function(){function e(t,n,r){k(this,e),void 0===n?n=0:n>t.length&&Wt(),void 0===r?r=t.length-n:r>t.length-n&&Wt(),this.segments=t,this.offset=n,this.len=r}return w(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(t,n){for(var r=Math.min(t.length,n.length),i=0;i<r;i++){var a=e.compareSegments(t.get(i),n.get(i));if(0!==a)return a}return cn(t.length,n.length)}},{key:"compareSegments",value:function(t,n){var r=e.isNumericId(t),i=e.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?e.extractNumericId(t).compare(e.extractNumericId(n)):ln(t,n)}},{key:"isNumericId",value:function(e){return e.startsWith("__id")&&e.endsWith("__")}},{key:"extractNumericId",value:function(e){return bt.fromString(e.substring(4,e.length-2))}}]),e}(),bn=function(e){x(n,e);var t=C(n);function n(){return k(this,n),t.apply(this,arguments)}return w(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"toUriEncodedString",value:function(){return this.toArray().map(encodeURIComponent).join("/")}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new Yt(Qt.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,d(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(kn),wn=/^[_a-zA-Z][_a-zA-Z0-9]*$/,_n=function(e){x(n,e);var t=C(n);function n(){return k(this,n),t.apply(this,arguments)}return w(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&this.get(0)===gn}}],[{key:"isValidIdentifier",value:function(e){return wn.test(e)}},{key:"keyField",value:function(){return new n([gn])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new Yt(Qt.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new Yt(Qt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new Yt(Qt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new Yt(Qt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(kn),En=function(){function e(t){k(this,e),this.path=t}return w(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===bn.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(bn.fromString(t))}},{key:"fromName",value:function(t){return new e(bn.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(bn.emptyPath())}},{key:"comparator",value:function(e,t){return bn.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new bn(t.slice()))}}]),e}(),xn=-1,Sn=w((function e(t,n,r,i){k(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));Sn.UNKNOWN_ID=-1;function Tn(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=yn.fromTimestamp(1e9===r?new mn(n+1,0):new mn(n,r));return new Cn(i,En.empty(),t)}function In(e){return new Cn(e.readTime,e.key,xn)}var Cn=function(){function e(t,n,r){k(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return w(e,null,[{key:"min",value:function(){return new e(yn.min(),En.empty(),xn)}},{key:"max",value:function(){return new e(yn.max(),En.empty(),xn)}}]),e}();function Nn(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=En.comparator(e.documentKey,t.documentKey))?n:cn(e.largestBatchId,t.largestBatchId)}var An="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Rn=function(){function e(){k(this,e),this.onCommittedListeners=[]}return w(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function Pn(e){return On.apply(this,arguments)}function On(){return(On=h(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===Qt.FAILED_PRECONDITION&&t.message===An){e.next=2;break}throw t;case 2:zt("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Dn=function(){function e(t){var n=this;k(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return w(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&Wt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=g(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(u){var s=u;n(t[s]).next((function(t){a[s]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u(s)}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}();function Ln(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Mn(e){return"IndexedDbTransactionError"===e.name}var Un=function(){function e(t,n){var r=this;k(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.oe(e)},this._e=function(e){return n.writeSequenceNumber(e)})}return w(e,[{key:"oe",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this._e&&this._e(e),e}}]),e}();Un.ae=-1;var Fn=-1;function Vn(e){return null==e}function jn(e){return 0===e&&1/e==-1/0}function zn(e){return"number"==typeof e&&Number.isInteger(e)&&!jn(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var Bn="\x01";function qn(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Wn(t)),t=Hn(e.get(n),t);return Wn(t)}function Hn(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case Bn:n+="\x01\x11";break;default:n+=a}}return n}function Wn(e){return e+Bn+"\x01"}var Kn="remoteDocuments",Gn="owner",Qn="mutationQueues",Yn="mutations";var Xn="documentMutations",$n="remoteDocumentsV14",Jn="remoteDocumentGlobal",Zn="targets",er="targetDocuments",tr="targetGlobal",nr="collectionParents",rr="clientMetadata",ir="bundles",ar="namedQueries",or="indexConfiguration",ur="indexState",sr="indexEntries",cr="documentOverlays",lr="globals",fr=[Qn,Yn,Xn,Kn,Zn,Gn,tr,er].concat([rr]).concat([Jn]).concat([nr]).concat([ir,ar]),hr=([].concat(d(fr),[cr]),[Qn,Yn,Xn,$n,Zn,Gn,tr,er,rr,Jn,nr,ir,ar,cr]),dr=hr,pr=[].concat(dr,[or,ur,sr]);[].concat(d(pr),[lr]);function vr(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function mr(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function yr(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var gr=function(){function e(t,n){k(this,e),this.comparator=t,this.root=n||br.EMPTY}return w(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,br.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,br.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new kr(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new kr(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new kr(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new kr(this.root,e,this.comparator,!0)}}]),e}(),kr=function(){function e(t,n,r,i){k(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return w(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),br=function(){function e(t,n,r,i,a){k(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return w(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Wt();if(this.right.isRed())throw Wt();var e=this.left.check();if(e!==this.right.check())throw Wt();return e+(this.isRed()?0:1)}}]),e}();br.EMPTY=null,br.RED=!0,br.BLACK=!1,br.EMPTY=new(function(){function e(){k(this,e),this.size=0}return w(e,[{key:"key",get:function(){throw Wt()}},{key:"value",get:function(){throw Wt()}},{key:"color",get:function(){throw Wt()}},{key:"left",get:function(){throw Wt()}},{key:"right",get:function(){throw Wt()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new br(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var wr=function(){function e(t){k(this,e),this.comparator=t,this.data=new gr(this.comparator)}return w(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new _r(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new _r(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),_r=function(){function e(t){k(this,e),this.iter=t}return w(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();var Er=function(){function e(t){k(this,e),this.fields=t,t.sort(_n.comparator)}return w(e,[{key:"unionWith",value:function(t){var n,r=new wr(_n.comparator),i=g(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=g(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=g(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return dn(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),xr=function(e){x(n,e);var t=C(n);function n(){var e;return k(this,n),(e=t.apply(this,arguments)).name="Base64DecodeError",e}return w(n)}(A(Error));var Sr=function(e){function t(e){k(this,t),this.binaryString=e}return w(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return cn(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){var n=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new xr("Invalid base64 string: "+e):e}}(e);return new t(n)}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Sr.EMPTY_BYTE_STRING=new Sr("");var Tr=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ir(e){if(Kt(!!e),"string"==typeof e){var t=0,n=Tr.exec(e);if(Kt(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Cr(e.seconds),nanos:Cr(e.nanos)}}function Cr(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Nr(e){return"string"==typeof e?Sr.fromBase64String(e):Sr.fromUint8Array(e)}var Ar="server_timestamp",Rr="__type__",Pr="__previous_value__",Or="__local_write_time__";function Dr(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[Rr])||void 0===n?void 0:n.stringValue)===Ar}function Lr(e){var t=e.mapValue.fields[Pr];return Dr(t)?Lr(t):t}function Mr(e){var t=Ir(e.mapValue.fields[Or].timestampValue);return new mn(t.seconds,t.nanos)}var Ur=w((function e(t,n,r,i,a,o,u,s,c){k(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=s,this.useFetchStreams=c})),Fr="(default)",Vr=function(){function e(t,n){k(this,e),this.projectId=t,this.database=n||Fr}return w(e,[{key:"isDefaultDatabase",get:function(){return this.database===Fr}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}(),jr="__type__",zr="__max__",Br={mapValue:{fields:{__type__:{stringValue:zr}}}},qr="__vector__",Hr="value";function Wr(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Dr(e)?4:si(e)?9007199254740991:oi(e)?10:11:Wt()}function Kr(e,t){if(e===t)return!0;var n=Wr(e);if(n!==Wr(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Mr(e).isEqual(Mr(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Ir(e.timestampValue),r=Ir(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Nr(e.bytesValue).isEqual(Nr(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Cr(e.geoPointValue.latitude)===Cr(t.geoPointValue.latitude)&&Cr(e.geoPointValue.longitude)===Cr(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Cr(e.integerValue)===Cr(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Cr(e.doubleValue),r=Cr(t.doubleValue);return n===r?jn(n)===jn(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return dn(e.arrayValue.values||[],t.arrayValue.values||[],Kr);case 10:case 11:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(vr(n)!==vr(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Kr(n[i],r[i])))return!1;return!0}(e,t);default:return Wt()}}function Gr(e,t){return void 0!==(e.values||[]).find((function(e){return Kr(e,t)}))}function Qr(e,t){if(e===t)return 0;var n=Wr(e),r=Wr(t);if(n!==r)return cn(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return cn(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Cr(e.integerValue||e.doubleValue),r=Cr(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Yr(e.timestampValue,t.timestampValue);case 4:return Yr(Mr(e),Mr(t));case 5:return ln(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Nr(e),r=Nr(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=cn(n[i],r[i]);if(0!==a)return a}return cn(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=cn(Cr(e.latitude),Cr(t.latitude));return 0!==n?n:cn(Cr(e.longitude),Cr(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Xr(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,a,o=e.fields||{},u=t.fields||{},s=null===(n=o[Hr])||void 0===n?void 0:n.arrayValue,c=null===(r=u[Hr])||void 0===r?void 0:r.arrayValue,l=cn((null===(i=null==s?void 0:s.values)||void 0===i?void 0:i.length)||0,(null===(a=null==c?void 0:c.values)||void 0===a?void 0:a.length)||0);return 0!==l?l:Xr(s,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Br.mapValue&&t===Br.mapValue)return 0;if(e===Br.mapValue)return 1;if(t===Br.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=ln(r[o],a[o]);if(0!==u)return u;var s=Qr(n[r[o]],i[a[o]]);if(0!==s)return s}return cn(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Wt()}}function Yr(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return cn(e,t);var n=Ir(e),r=Ir(t),i=cn(n.seconds,r.seconds);return 0!==i?i:cn(n.nanos,r.nanos)}function Xr(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Qr(n[i],r[i]);if(a)return a}return cn(n.length,r.length)}function $r(e){return Jr(e)}function Jr(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Ir(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Nr(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return En.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){var t,n="[",r=!0,i=g(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=Jr(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=g(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(Jr(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):Wt()}function Zr(e){switch(Wr(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:var t=Lr(e);return t?16+Zr(t):16;case 5:return 2*e.stringValue.length;case 6:return Nr(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((function(e,t){return e+Zr(t)}),0)}(e.arrayValue);case 10:case 11:return function(e){var t=0;return mr(e.fields,(function(e,n){t+=e.length+Zr(n)})),t}(e.mapValue);default:throw Wt()}}function ei(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function ti(e){return!!e&&"integerValue"in e}function ni(e){return!!e&&"arrayValue"in e}function ri(e){return!!e&&"nullValue"in e}function ii(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function ai(e){return!!e&&"mapValue"in e}function oi(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[jr])||void 0===n?void 0:n.stringValue)===qr}function ui(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return mr(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=ui(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=ui(e.arrayValue.values[r]);return n}return Object.assign({},e)}function si(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===zr}Pt={},r(Pt,jr,{stringValue:qr}),r(Pt,Hr,{arrayValue:{}});var ci=function(){function e(t){k(this,e),this.value=t}return w(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!ai(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ui(t)}},{key:"setAll",value:function(e){var t=this,n=_n.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=ui(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());ai(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Kr(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];ai(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){mr(t,(function(t,n){return e[t]=n}));var r,i=g(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(ui(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function li(e){var t=[];return mr(e.fields,(function(e,n){var r=new _n([e]);if(ai(n)){var i=li(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=g(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new Er(t)}var fi=function(){function e(t,n,r,i,a,o,u){k(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=u}return w(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(yn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=ci.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=ci.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=yn.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,yn.min(),yn.min(),yn.min(),ci.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,yn.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,yn.min(),yn.min(),ci.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,yn.min(),yn.min(),ci.empty(),2)}}]),e}(),hi=w((function e(t,n){k(this,e),this.position=t,this.inclusive=n}));function di(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?En.comparator(En.fromName(o.referenceValue),n.key):Qr(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function pi(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Kr(e.position[n],t.position[n]))return!1;return!0}var vi=w((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";k(this,e),this.field=t,this.dir=n}));function mi(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var yi=w((function e(){k(this,e)})),gi=function(e){x(n,e);var t=C(n);function n(e,r,i){var a;return k(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return w(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Qr(t,this.value)):null!==t&&Wr(this.value)===Wr(t)&&this.matchesComparison(Qr(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Wt()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Ti(e,t,r):"array-contains"===t?new Ai(e,r):"in"===t?new Ri(e,r):"not-in"===t?new Pi(e,r):"array-contains-any"===t?new Oi(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new Ii(e,n):new Ci(e,n)}}]),n}(yi),ki=function(e){x(n,e);var t=C(n);function n(e,r){var i;return k(this,n),(i=t.call(this)).filters=e,i.op=r,i.ce=null,i}return w(n,[{key:"matches",value:function(e){return bi(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.ce||(this.ce=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.ce}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(yi);function bi(e){return"and"===e.op}function wi(e){return _i(e)&&bi(e)}function _i(e){var t,n=g(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof ki)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function Ei(e){if(e instanceof gi)return e.field.canonicalString()+e.op.toString()+$r(e.value);if(wi(e))return e.filters.map((function(e){return Ei(e)})).join(",");var t=e.filters.map((function(e){return Ei(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function xi(e,t){return e instanceof gi?function(e,t){return t instanceof gi&&e.op===t.op&&e.field.isEqual(t.field)&&Kr(e.value,t.value)}(e,t):e instanceof ki?function(e,t){return t instanceof ki&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&xi(n,t.filters[r])}),!0)}(e,t):void Wt()}function Si(e){return e instanceof gi?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat($r(e.value))}(e):e instanceof ki?function(e){return e.op.toString()+" {"+e.getFilters().map(Si).join(" ,")+"}"}(e):"Filter"}var Ti=function(e){x(n,e);var t=C(n);function n(e,r,i){var a;return k(this,n),(a=t.call(this,e,r,i)).key=En.fromName(i.referenceValue),a}return w(n,[{key:"matches",value:function(e){var t=En.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(gi),Ii=function(e){x(n,e);var t=C(n);function n(e,r){var i;return k(this,n),(i=t.call(this,e,"in",r)).keys=Ni("in",r),i}return w(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(gi),Ci=function(e){x(n,e);var t=C(n);function n(e,r){var i;return k(this,n),(i=t.call(this,e,"not-in",r)).keys=Ni("not-in",r),i}return w(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(gi);function Ni(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return En.fromName(e.referenceValue)}))}var Ai=function(e){x(n,e);var t=C(n);function n(e,r){return k(this,n),t.call(this,e,"array-contains",r)}return w(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return ni(t)&&Gr(t.arrayValue,this.value)}}]),n}(gi),Ri=function(e){x(n,e);var t=C(n);function n(e,r){return k(this,n),t.call(this,e,"in",r)}return w(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Gr(this.value.arrayValue,t)}}]),n}(gi),Pi=function(e){x(n,e);var t=C(n);function n(e,r){return k(this,n),t.call(this,e,"not-in",r)}return w(n,[{key:"matches",value:function(e){if(Gr(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Gr(this.value.arrayValue,t)}}]),n}(gi),Oi=function(e){x(n,e);var t=C(n);function n(e,r){return k(this,n),t.call(this,e,"array-contains-any",r)}return w(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!ni(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Gr(t.value.arrayValue,e)}))}}]),n}(gi),Di=w((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;k(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.le=null}));function Li(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new Di(e,t,n,r,i,a,o)}function Mi(e){var t=Gt(e);if(null===t.le){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return Ei(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Vn(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return $r(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return $r(e)})).join(",")),t.le=n}return t.le}function Ui(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!mi(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!xi(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!pi(e.startAt,t.startAt)&&pi(e.endAt,t.endAt)}function Fi(e){return En.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}var Vi=w((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;k(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}));function ji(e,t,n,r,i,a,o,u){return new Vi(e,t,n,r,i,a,o,u)}function zi(e){return new Vi(e)}function Bi(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function qi(e){return null!==e.collectionGroup}function Hi(e){var t=Gt(e);if(null===t.he){t.he=[];var n,r=new Set,i=g(t.explicitOrderBy);try{for(i.s();!(n=i.n()).done;){var a=n.value;t.he.push(a),r.add(a.field.canonicalString())}}catch(s){i.e(s)}finally{i.f()}var o=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",u=function(e){var t=new wr(_n.comparator);return e.filters.forEach((function(e){e.getFlattenedFilters().forEach((function(e){e.isInequality()&&(t=t.add(e.field))}))})),t}(t);u.forEach((function(e){r.has(e.canonicalString())||e.isKeyField()||t.he.push(new vi(e,o))})),r.has(_n.keyField().canonicalString())||t.he.push(new vi(_n.keyField(),o))}return t.he}function Wi(e){var t=Gt(e);return t.Pe||(t.Pe=Ki(t,Hi(e))),t.Pe}function Ki(e,t){if("F"===e.limitType)return Li(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);t=t.map((function(e){var t="desc"===e.dir?"asc":"desc";return new vi(e.field,t)}));var n=e.endAt?new hi(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new hi(e.startAt.position,e.startAt.inclusive):null;return Li(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}function Gi(e,t){var n=e.filters.concat([t]);return new Vi(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Qi(e,t,n){return new Vi(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Yi(e,t){return Ui(Wi(e),Wi(t))&&e.limitType===t.limitType}function Xi(e){return"".concat(Mi(Wi(e)),"|lt:").concat(e.limitType)}function $i(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return Si(e)})).join(", "),"]")),Vn(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return $r(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return $r(e)})).join(",")),"Target(".concat(t,")")}(Wi(e)),"; limitType=").concat(e.limitType,")")}function Ji(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):En.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=g(Hi(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=g(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=di(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Hi(e),t))&&!(e.endAt&&!function(e,t,n){var r=di(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Hi(e),t))}(e,t)}function Zi(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function ea(e){return function(t,n){var r,i=!1,a=g(Hi(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=ta(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function ta(e,t,n){var r=e.field.isKeyField()?En.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Qr(r,i):Wt()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Wt()}}var na=function(){function e(t,n){k(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return w(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=g(n);try{for(i.s();!(r=i.n()).done;){var a=s(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(c){i.e(c)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){mr(this.inner,(function(t,n){var r,i=g(n);try{for(i.s();!(r=i.n()).done;){var a=s(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(c){i.e(c)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return yr(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),ra=new gr(En.comparator);function ia(){return ra}var aa=new gr(En.comparator);function oa(){for(var e=aa,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function ua(e){var t=aa;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function sa(){return la()}function ca(){return la()}function la(){return new na((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var fa=new gr(En.comparator),ha=new wr(En.comparator);function da(){for(var e=ha,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var pa=new wr(cn);function va(){return pa}function ma(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:jn(t)?"-0":t}}function ya(e){return{integerValue:""+e}}function ga(e,t){return zn(t)?ya(t):ma(e,t)}var ka=w((function e(){k(this,e),this._=void 0}));function ba(e,t,n){return e instanceof Ea?function(e,t){var n,i={fields:(n={},r(n,Rr,{stringValue:Ar}),r(n,Or,{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}),n)};return t&&Dr(t)&&(t=Lr(t)),t&&(i.fields[Pr]=t),{mapValue:i}}(n,t):e instanceof xa?Sa(e,t):e instanceof Ta?Ia(e,t):function(e,t){var n=_a(e,t),r=Na(n)+Na(e.Ie);return ti(n)&&ti(e.Ie)?ya(r):ma(e.serializer,r)}(e,t)}function wa(e,t,n){return e instanceof xa?Sa(e,t):e instanceof Ta?Ia(e,t):n}function _a(e,t){return e instanceof Ca?function(e){return ti(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}var Ea=function(e){x(n,e);var t=C(n);function n(){return k(this,n),t.apply(this,arguments)}return w(n)}(ka),xa=function(e){x(n,e);var t=C(n);function n(e){var r;return k(this,n),(r=t.call(this)).elements=e,r}return w(n)}(ka);function Sa(e,t){var n,r=Aa(t),i=g(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return Kr(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Ta=function(e){x(n,e);var t=C(n);function n(e){var r;return k(this,n),(r=t.call(this)).elements=e,r}return w(n)}(ka);function Ia(e,t){var n,r=Aa(t),i=g(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!Kr(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Ca=function(e){x(n,e);var t=C(n);function n(e,r){var i;return k(this,n),(i=t.call(this)).serializer=e,i.Ie=r,i}return w(n)}(ka);function Na(e){return Cr(e.integerValue||e.doubleValue)}function Aa(e){return ni(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Ra=w((function e(t,n){k(this,e),this.version=t,this.transformResults=n})),Pa=function(){function e(t,n){k(this,e),this.updateTime=t,this.exists=n}return w(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Oa(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Da=w((function e(){k(this,e)}));function La(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Ga(e.key,Pa.none()):new ja(e.key,e.data,Pa.none());var n,r=e.data,i=ci.empty(),a=new wr(_n.comparator),o=g(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new za(e.key,i,new Er(a.toArray()),Pa.none())}function Ma(e,t,n){e instanceof ja?function(e,t,n){var r=e.value.clone(),i=qa(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof za?function(e,t,n){if(Oa(e.precondition,t)){var r=qa(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Ba(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Ua(e,t,n,r){return e instanceof ja?function(e,t,n,r){if(!Oa(e.precondition,t))return n;var i=e.value.clone(),a=Ha(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof za?function(e,t,n,r){if(!Oa(e.precondition,t))return n;var i=Ha(e.fieldTransforms,r,t),a=t.data;return a.setAll(Ba(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return Oa(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Fa(e,t){var n,r=null,i=g(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=_a(a.transform,o||null);null!=u&&(null===r&&(r=ci.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function Va(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&dn(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof xa&&t instanceof xa||e instanceof Ta&&t instanceof Ta?dn(e.elements,t.elements,Kr):e instanceof Ca&&t instanceof Ca?Kr(e.Ie,t.Ie):e instanceof Ea&&t instanceof Ea}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var ja=function(e){x(n,e);var t=C(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return k(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return w(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Da),za=function(e){x(n,e);var t=C(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return k(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return w(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(Da);function Ba(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function qa(e,t,n){var r=new Map;Kt(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,wa(o,u,n[i]))}return r}function Ha(e,t,n){var r,i=new Map,a=g(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,ba(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var Wa,Ka,Ga=function(e){x(n,e);var t=C(n);function n(e,r){var i;return k(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return w(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Da),Qa=function(e){x(n,e);var t=C(n);function n(e,r){var i;return k(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return w(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Da),Ya=function(){function e(t,n,r,i){k(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return w(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Ma(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=g(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=Ua(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=g(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=Ua(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=ca();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=La(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(yn.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),da())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&dn(this.mutations,e.mutations,(function(e,t){return Va(e,t)}))&&dn(this.baseMutations,e.baseMutations,(function(e,t){return Va(e,t)}))}}]),e}(),Xa=function(){function e(t,n,r,i){k(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return w(e,null,[{key:"from",value:function(t,n,r){Kt(t.mutations.length===r.length);for(var i=fa,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),$a=function(){function e(t,n){k(this,e),this.largestBatchId=t,this.mutation=n}return w(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),Ja=w((function e(t,n){k(this,e),this.count=t,this.unchangedNames=n}));function Za(e){switch(e){case Qt.OK:return Wt();case Qt.CANCELLED:case Qt.UNKNOWN:case Qt.DEADLINE_EXCEEDED:case Qt.RESOURCE_EXHAUSTED:case Qt.INTERNAL:case Qt.UNAVAILABLE:case Qt.UNAUTHENTICATED:return!1;case Qt.INVALID_ARGUMENT:case Qt.NOT_FOUND:case Qt.ALREADY_EXISTS:case Qt.PERMISSION_DENIED:case Qt.FAILED_PRECONDITION:case Qt.ABORTED:case Qt.OUT_OF_RANGE:case Qt.UNIMPLEMENTED:case Qt.DATA_LOSS:return!0;default:return Wt()}}function eo(e){if(void 0===e)return Bt("GRPC error has no .code"),Qt.UNKNOWN;switch(e){case Wa.OK:return Qt.OK;case Wa.CANCELLED:return Qt.CANCELLED;case Wa.UNKNOWN:return Qt.UNKNOWN;case Wa.DEADLINE_EXCEEDED:return Qt.DEADLINE_EXCEEDED;case Wa.RESOURCE_EXHAUSTED:return Qt.RESOURCE_EXHAUSTED;case Wa.INTERNAL:return Qt.INTERNAL;case Wa.UNAVAILABLE:return Qt.UNAVAILABLE;case Wa.UNAUTHENTICATED:return Qt.UNAUTHENTICATED;case Wa.INVALID_ARGUMENT:return Qt.INVALID_ARGUMENT;case Wa.NOT_FOUND:return Qt.NOT_FOUND;case Wa.ALREADY_EXISTS:return Qt.ALREADY_EXISTS;case Wa.PERMISSION_DENIED:return Qt.PERMISSION_DENIED;case Wa.FAILED_PRECONDITION:return Qt.FAILED_PRECONDITION;case Wa.ABORTED:return Qt.ABORTED;case Wa.OUT_OF_RANGE:return Qt.OUT_OF_RANGE;case Wa.UNIMPLEMENTED:return Qt.UNIMPLEMENTED;case Wa.DATA_LOSS:return Qt.DATA_LOSS;default:return Wt()}}(Ka=Wa||(Wa={}))[Ka.OK=0]="OK",Ka[Ka.CANCELLED=1]="CANCELLED",Ka[Ka.UNKNOWN=2]="UNKNOWN",Ka[Ka.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ka[Ka.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ka[Ka.NOT_FOUND=5]="NOT_FOUND",Ka[Ka.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ka[Ka.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ka[Ka.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ka[Ka.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ka[Ka.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ka[Ka.ABORTED=10]="ABORTED",Ka[Ka.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ka[Ka.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ka[Ka.INTERNAL=13]="INTERNAL",Ka[Ka.UNAVAILABLE=14]="UNAVAILABLE",Ka[Ka.DATA_LOSS=15]="DATA_LOSS";var to=null,no=new bt([4294967295,4294967295],0);function ro(e){var t=un().encode(e),n=new wt;return n.update(t),new Uint8Array(n.digest())}function io(e){var t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new bt([n,r],0),new bt([i,a],0)]}var ao=function(){function e(t,n,r){if(k(this,e),this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new oo("Invalid padding: ".concat(n));if(r<0)throw new oo("Invalid hash count: ".concat(r));if(t.length>0&&0===this.hashCount)throw new oo("Invalid hash count: ".concat(r));if(0===t.length&&0!==n)throw new oo("Invalid padding when bitmap length is 0: ".concat(n));this.Ee=8*t.length-n,this.de=bt.fromNumber(this.Ee)}return w(e,[{key:"Ae",value:function(e,t,n){var r=e.add(t.multiply(bt.fromNumber(n)));return 1===r.compare(no)&&(r=new bt([r.getBits(0),r.getBits(1)],0)),r.modulo(this.de).toNumber()}},{key:"Re",value:function(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}},{key:"mightContain",value:function(e){if(0===this.Ee)return!1;for(var t=s(io(ro(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Ae(n,r,i);if(!this.Re(a))return!1}return!0}},{key:"insert",value:function(e){if(0!==this.Ee)for(var t=s(io(ro(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Ae(n,r,i);this.Ve(a)}}},{key:"Ve",value:function(e){var t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}],[{key:"create",value:function(t,n,r){var i=t%8==0?0:8-t%8,a=new e(new Uint8Array(Math.ceil(t/8)),i,n);return r.forEach((function(e){return a.insert(e)})),a}}]),e}(),oo=function(e){x(n,e);var t=C(n);function n(){var e;return k(this,n),(e=t.apply(this,arguments)).name="BloomFilterError",e}return w(n)}(A(Error)),uo=function(){function e(t,n,r,i,a){k(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return w(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,so.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(yn.min(),i,new gr(cn),ia(),da())}}]),e}(),so=function(){function e(t,n,r,i,a){k(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return w(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,da(),da(),da())}}]),e}(),co=w((function e(t,n,r,i){k(this,e),this.me=t,this.removedTargetIds=n,this.key=r,this.fe=i})),lo=w((function e(t,n){k(this,e),this.targetId=t,this.ge=n})),fo=w((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Sr.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;k(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),ho=function(){function e(){k(this,e),this.pe=0,this.ye=mo(),this.we=Sr.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}return w(e,[{key:"current",get:function(){return this.Se}},{key:"resumeToken",get:function(){return this.we}},{key:"De",get:function(){return 0!==this.pe}},{key:"ve",get:function(){return this.be}},{key:"Ce",value:function(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}},{key:"Fe",value:function(){var e=da(),t=da(),n=da();return this.ye.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Wt()}})),new so(this.we,this.Se,e,t,n)}},{key:"Me",value:function(){this.be=!1,this.ye=mo()}},{key:"xe",value:function(e,t){this.be=!0,this.ye=this.ye.insert(e,t)}},{key:"Oe",value:function(e){this.be=!0,this.ye=this.ye.remove(e)}},{key:"Ne",value:function(){this.pe+=1}},{key:"Be",value:function(){this.pe-=1,Kt(this.pe>=0)}},{key:"Le",value:function(){this.be=!0,this.Se=!0}}]),e}(),po=function(){function e(t){k(this,e),this.ke=t,this.qe=new Map,this.Qe=ia(),this.$e=vo(),this.Ue=vo(),this.Ke=new gr(cn)}return w(e,[{key:"We",value:function(e){var t,n=g(e.me);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.fe&&e.fe.isFoundDocument()?this.Ge(r,e.fe):this.ze(r,e.key,e.fe)}}catch(u){n.e(u)}finally{n.f()}var i,a=g(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.ze(o,e.key,e.fe)}}catch(u){a.e(u)}finally{a.f()}}},{key:"je",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.He(n);switch(e.state){case 0:t.Je(n)&&r.Ce(e.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(e.resumeToken);break;case 2:r.Be(),r.De||t.removeTarget(n);break;case 3:t.Je(n)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:t.Je(n)&&(t.Ye(n),r.Ce(e.resumeToken));break;default:Wt()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((function(e,r){n.Je(r)&&t(r)}))}},{key:"Ze",value:function(e){var t=e.targetId,n=e.ge.count,r=this.Xe(t);if(r){var i=r.target;if(Fi(i))if(0===n){var a=new En(i.path);this.ze(t,a,fi.newNoDocument(a,yn.min()))}else Kt(1===n);else{var o=this.et(t);if(o!==n){var u=this.tt(e),s=u?this.nt(u,e,o):1;if(0!==s){this.Ye(t);var c=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,c)}null==to||to.rt(function(e,t,n,r,i){var a,o,u,s,c,l,f={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(f.bloomFilter={applied:0===i,hashCount:null!==(a=null==h?void 0:h.hashCount)&&void 0!==a?a:0,bitmapLength:null!==(s=null===(u=null===(o=null==h?void 0:h.bits)||void 0===o?void 0:o.bitmap)||void 0===u?void 0:u.length)&&void 0!==s?s:0,padding:null!==(l=null===(c=null==h?void 0:h.bits)||void 0===c?void 0:c.padding)&&void 0!==l?l:0,mightContain:function(e){var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),f}(o,e.ge,this.ke.it(),u,s))}}}}},{key:"tt",value:function(e){var t=e.ge.unchangedNames;if(!t||!t.bits)return null;var n,r,i=t.bits,a=i.bitmap,o=void 0===a?"":a,u=i.padding,s=void 0===u?0:u,c=t.hashCount,l=void 0===c?0:c;try{n=Nr(o).toUint8Array()}catch(e){if(e instanceof xr)return qt("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{r=new ao(n,s,l)}catch(e){return qt(e instanceof oo?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===r.Ee?null:r}},{key:"nt",value:function(e,t,n){return t.ge.count===n-this.st(e,t.targetId)?0:2}},{key:"st",value:function(e,t){var n=this,r=this.ke.getRemoteKeysForTarget(t),i=0;return r.forEach((function(r){var a=n.ke.it(),o="projects/".concat(a.projectId,"/databases/").concat(a.database,"/documents/").concat(r.path.canonicalString());e.mightContain(o)||(n.ze(t,r,null),i++)})),i}},{key:"ot",value:function(e){var t=this,n=new Map;this.qe.forEach((function(r,i){var a=t.Xe(i);if(a){if(r.current&&Fi(a.target)){var o=new En(a.target.path);t._t(o).has(i)||t.ut(i,o)||t.ze(i,o,fi.newNoDocument(o,e))}r.ve&&(n.set(i,r.Fe()),r.Me())}}));var r=da();this.Ue.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Xe(e);return!n||"TargetPurposeLimboResolution"===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.Qe.forEach((function(t,n){return n.setReadTime(e)}));var i=new uo(e,n,this.Ke,this.Qe,r);return this.Qe=ia(),this.$e=vo(),this.Ue=vo(),this.Ke=new gr(cn),i}},{key:"Ge",value:function(e,t){if(this.Je(e)){var n=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,n),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ue=this.Ue.insert(t.key,this.ct(t.key).add(e))}}},{key:"ze",value:function(e,t,n){if(this.Je(e)){var r=this.He(e);this.ut(e,t)?r.xe(t,1):r.Oe(t),this.Ue=this.Ue.insert(t,this.ct(t).delete(e)),this.Ue=this.Ue.insert(t,this.ct(t).add(e)),n&&(this.Qe=this.Qe.insert(t,n))}}},{key:"removeTarget",value:function(e){this.qe.delete(e)}},{key:"et",value:function(e){var t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Ne",value:function(e){this.He(e).Ne()}},{key:"He",value:function(e){var t=this.qe.get(e);return t||(t=new ho,this.qe.set(e,t)),t}},{key:"ct",value:function(e){var t=this.Ue.get(e);return t||(t=new wr(cn),this.Ue=this.Ue.insert(e,t)),t}},{key:"_t",value:function(e){var t=this.$e.get(e);return t||(t=new wr(cn),this.$e=this.$e.insert(e,t)),t}},{key:"Je",value:function(e){var t=null!==this.Xe(e);return t||zt("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Xe",value:function(e){var t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}},{key:"Ye",value:function(e){var t=this;this.qe.set(e,new ho),this.ke.getRemoteKeysForTarget(e).forEach((function(n){t.ze(e,n,null)}))}},{key:"ut",value:function(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}]),e}();function vo(){return new gr(En.comparator)}function mo(){return new gr(En.comparator)}var yo={asc:"ASCENDING",desc:"DESCENDING"},go={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ko={and:"AND",or:"OR"},bo=w((function e(t,n){k(this,e),this.databaseId=t,this.useProto3Json=n}));function wo(e,t){return e.useProto3Json||Vn(t)?t:{value:t}}function _o(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Eo(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function xo(e,t){return _o(e,t.toTimestamp())}function So(e){return Kt(!!e),yn.fromTimestamp(function(e){var t=Ir(e);return new mn(t.seconds,t.nanos)}(e))}function To(e,t){return Io(e,t).canonicalString()}function Io(e,t){var n=function(e){return new bn(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Co(e){var t=bn.fromString(e);return Kt(Qo(t)),t}function No(e,t){return To(e.databaseId,t.path)}function Ao(e,t){var n=Co(t);if(n.get(1)!==e.databaseId.projectId)throw new Yt(Qt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Yt(Qt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new En(Do(n))}function Ro(e,t){return To(e.databaseId,t)}function Po(e){var t=Co(e);return 4===t.length?bn.emptyPath():Do(t)}function Oo(e){return new bn(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Do(e){return Kt(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Lo(e,t,n){return{name:No(e,t),fields:n.value.mapValue.fields}}function Mo(e,t){var n;if(t instanceof ja)n={update:Lo(e,t.key,t.value)};else if(t instanceof Ga)n={delete:No(e,t.key)};else if(t instanceof za)n={update:Lo(e,t.key,t.data),updateMask:Go(t.fieldMask)};else{if(!(t instanceof Qa))return Wt();n={verify:No(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Ea)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof xa)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Ta)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ca)return{fieldPath:t.field.canonicalString(),increment:n.Ie};throw Wt()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:xo(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Wt()}(e,t.precondition)),n}function Uo(e,t){return{documents:[Ro(e,t.path)]}}function Fo(e,t){var n,r={structuredQuery:{}},i=t.path;null!==t.collectionGroup?(n=i,r.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n=i.popLast(),r.structuredQuery.from=[{collectionId:i.lastSegment()}]),r.parent=Ro(e,n);var a=function(e){if(0!==e.length)return Ko(ki.create(e,"and"))}(t.filters);a&&(r.structuredQuery.where=a);var o=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Ho(e.field),direction:zo(e.dir)}}(e)}))}(t.orderBy);o&&(r.structuredQuery.orderBy=o);var u=wo(e,t.limit);return null!==u&&(r.structuredQuery.limit=u),t.startAt&&(r.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(r.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ht:r,parent:n}}function Vo(e){var t=Po(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Kt(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=jo(e);return t instanceof ki&&wi(t)?t.getFilters():[t]}(n.where));var u=[];n.orderBy&&(u=function(e){return e.map((function(e){return function(e){return new vi(Wo(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)}))}(n.orderBy));var s=null;n.limit&&(s=function(e){var t;return Vn(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new hi(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new hi(n,t)}(n.endAt)),ji(t,i,u,o,s,"F",c,l)}function jo(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Wo(e.unaryFilter.field);return gi.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Wo(e.unaryFilter.field);return gi.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Wo(e.unaryFilter.field);return gi.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Wo(e.unaryFilter.field);return gi.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Wt()}}(e):void 0!==e.fieldFilter?function(e){return gi.create(Wo(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Wt()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return ki.create(e.compositeFilter.filters.map((function(e){return jo(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Wt()}}(e.compositeFilter.op))}(e):Wt()}function zo(e){return yo[e]}function Bo(e){return go[e]}function qo(e){return ko[e]}function Ho(e){return{fieldPath:e.canonicalString()}}function Wo(e){return _n.fromServerFormat(e.fieldPath)}function Ko(e){return e instanceof gi?function(e){if("=="===e.op){if(ii(e.value))return{unaryFilter:{field:Ho(e.field),op:"IS_NAN"}};if(ri(e.value))return{unaryFilter:{field:Ho(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(ii(e.value))return{unaryFilter:{field:Ho(e.field),op:"IS_NOT_NAN"}};if(ri(e.value))return{unaryFilter:{field:Ho(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ho(e.field),op:Bo(e.op),value:e.value}}}(e):e instanceof ki?function(e){var t=e.getFilters().map((function(e){return Ko(e)}));return 1===t.length?t[0]:{compositeFilter:{op:qo(e.op),filters:t}}}(e):Wt()}function Go(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Qo(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var Yo=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:yn.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:yn.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Sr.EMPTY_BYTE_STRING,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;k(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=s}return w(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}},{key:"withExpectedCount",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}]),e}(),Xo=w((function e(t){k(this,e),this.Tt=t}));function $o(e){var t=Vo({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Qi(t,t.limit,"L"):t}var Jo=function(){function e(){k(this,e)}return w(e,[{key:"At",value:function(e,t){this.Rt(e,t),t.Vt()}},{key:"Rt",value:function(e,t){if("nullValue"in e)this.ft(t,5);else if("booleanValue"in e)this.ft(t,10),t.gt(e.booleanValue?1:0);else if("integerValue"in e)this.ft(t,15),t.gt(Cr(e.integerValue));else if("doubleValue"in e){var n=Cr(e.doubleValue);isNaN(n)?this.ft(t,13):(this.ft(t,15),jn(n)?t.gt(0):t.gt(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ft(t,20),"string"==typeof r&&(r=Ir(r)),t.yt("".concat(r.seconds||"")),t.gt(r.nanos||0)}else if("stringValue"in e)this.wt(e.stringValue,t),this.St(t);else if("bytesValue"in e)this.ft(t,30),t.bt(Nr(e.bytesValue)),this.St(t);else if("referenceValue"in e)this.Dt(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ft(t,45),t.gt(i.latitude||0),t.gt(i.longitude||0)}else"mapValue"in e?si(e)?this.ft(t,Number.MAX_SAFE_INTEGER):oi(e)?this.vt(e.mapValue,t):(this.Ct(e.mapValue,t),this.St(t)):"arrayValue"in e?(this.Ft(e.arrayValue,t),this.St(t)):Wt()}},{key:"wt",value:function(e,t){this.ft(t,25),this.Mt(e,t)}},{key:"Mt",value:function(e,t){t.yt(e)}},{key:"Ct",value:function(e,t){var n=e.fields||{};this.ft(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.wt(a,t),this.Rt(n[a],t)}}},{key:"vt",value:function(e,t){var n,r,i=e.fields||{};this.ft(t,53);var a=Hr,o=(null===(r=null===(n=i[a].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.ft(t,15),t.gt(Cr(o)),this.wt(a,t),this.Rt(i[a],t)}},{key:"Ft",value:function(e,t){var n=e.values||[];this.ft(t,50);var r,i=g(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.Rt(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"Dt",value:function(e,t){var n=this;this.ft(t,37),En.fromName(e).path.forEach((function(e){n.ft(t,60),n.Mt(e,t)}))}},{key:"ft",value:function(e,t){e.gt(t)}},{key:"St",value:function(e){e.gt(2)}}]),e}();Jo.xt=new Jo;var Zo=function(){function e(){k(this,e),this.Tn=new eu}return w(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.Tn.add(t),Dn.resolve()}},{key:"getCollectionParents",value:function(e,t){return Dn.resolve(this.Tn.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Dn.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Dn.resolve()}},{key:"deleteAllFieldIndexes",value:function(e){return Dn.resolve()}},{key:"createTargetIndexes",value:function(e,t){return Dn.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Dn.resolve(null)}},{key:"getIndexType",value:function(e,t){return Dn.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return Dn.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Dn.resolve(null)}},{key:"getMinOffset",value:function(e,t){return Dn.resolve(Cn.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return Dn.resolve(Cn.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return Dn.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Dn.resolve()}}]),e}(),eu=function(){function e(){k(this,e),this.index={}}return w(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new wr(bn.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new wr(bn.comparator)).toArray()}}]),e}();new Uint8Array(0);var tu={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},nu=41943040,ru=function(){function e(t,n,r){k(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return w(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();ru.DEFAULT_COLLECTION_PERCENTILE=10,ru.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ru.DEFAULT=new ru(nu,ru.DEFAULT_COLLECTION_PERCENTILE,ru.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ru.DISABLED=new ru(-1,0,0);var iu=function(){function e(t){k(this,e),this.$n=t}return w(e,[{key:"next",value:function(){return this.$n+=2,this.$n}}],[{key:"Un",value:function(){return new e(0)}},{key:"Kn",value:function(){return new e(-1)}}]),e}();var au="LruGarbageCollector",ou=1048576;function uu(e,t){var n=s(e,2),r=n[0],i=n[1],a=s(t,2),o=a[0],u=a[1],c=cn(r,o);return 0===c?cn(i,u):c}var su=function(){function e(t){k(this,e),this.Hn=t,this.buffer=new wr(uu),this.Jn=0}return w(e,[{key:"Yn",value:function(){return++this.Jn}},{key:"Zn",value:function(e){var t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();uu(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),cu=function(){function e(t,n,r){k(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Xn=null}return w(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.er(6e4)}},{key:"stop",value:function(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}},{key:"started",get:function(){return null!==this.Xn}},{key:"er",value:function(e){var t=this;zt(au,"Garbage collection scheduled in ".concat(e,"ms")),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,h(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Xn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!Mn(e.t0)){e.next=12;break}zt(au,"Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,Pn(e.t0);case 14:return e.next=16,t.er(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),lu=function(){function e(t,n){k(this,e),this.tr=t,this.params=n}return w(e,[{key:"calculateTargetCount",value:function(e,t){return this.tr.nr(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Dn.resolve(Un.ae);var r=new su(t);return this.tr.forEachTarget(e,(function(e){return r.Zn(e.sequenceNumber)})).next((function(){return n.tr.rr(e,(function(e){return r.Zn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.tr.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.tr.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(zt("LruGarbageCollector","Garbage collection skipped; disabled"),Dn.resolve(tu)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(zt("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),tu):n.ir(e,t)}))}},{key:"getCacheSize",value:function(e){return this.tr.getCacheSize(e)}},{key:"ir",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(zt("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),jt()<=fe.DEBUG&&zt("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),Dn.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}();function fu(e,t){return new lu(e,t)}var hu=function(){function e(){k(this,e),this.changes=new na((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return w(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,fi.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Dn.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}();var du=w((function e(t,n){k(this,e),this.overlayedDocument=t,this.mutatedFields=n})),pu=function(){function e(t,n,r,i){k(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return w(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&Ua(r.mutation,e,Er.empty(),mn.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,da()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:da(),i=sa();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=oa();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=sa();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,da())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=ia(),a=la(),o=la();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof za)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),Ua(o.mutation,t,o.mutation.getFieldMask(),mn.now())):a.set(t.key,Er.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new du(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=la(),i=new gr((function(e,t){return e-t})),a=da();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=g(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||Er.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||da()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=ca();c.forEach((function(e){if(!a.has(e)){var n=La(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return Dn.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){return function(e){return En.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):qi(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):Dn.resolve(sa()),u=xn,s=a;return o.next((function(t){return Dn.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?Dn.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,da())})).next((function(e){return{batchId:u,changes:ua(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new En(t)).next((function(e){var t=oa();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n,r){var i=this,a=t.collectionGroup,o=oa();return this.indexManager.getCollectionParents(e,a).next((function(u){return Dn.forEach(u,(function(u){var s=function(e,t){return new Vi(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,u.child(a));return i.getDocumentsMatchingCollectionQuery(e,s,n,r).next((function(e){e.forEach((function(e,t){o=o.insert(e,t)}))}))})).next((function(){return o}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n,r){var i,a=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(o){return i=o,a.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)})).next((function(e){i.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,fi.newInvalidDocument(r)))}));var n=oa();return e.forEach((function(e,r){var a=i.get(e);void 0!==a&&Ua(a.mutation,r,Er.empty(),mn.now()),Ji(t,r)&&(n=n.insert(e,r))})),n}))}}]),e}(),vu=function(){function e(t){k(this,e),this.serializer=t,this.dr=new Map,this.Ar=new Map}return w(e,[{key:"getBundleMetadata",value:function(e,t){return Dn.resolve(this.dr.get(t))}},{key:"saveBundleMetadata",value:function(e,t){return this.dr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:So(e.createTime)}}(t)),Dn.resolve()}},{key:"getNamedQuery",value:function(e,t){return Dn.resolve(this.Ar.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.Ar.set(t.name,function(e){return{name:e.name,query:$o(e.bundledQuery),readTime:So(e.readTime)}}(t)),Dn.resolve()}}]),e}(),mu=function(){function e(){k(this,e),this.overlays=new gr(En.comparator),this.Rr=new Map}return w(e,[{key:"getOverlay",value:function(e,t){return Dn.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=sa();return Dn.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.Et(e,t,i)})),Dn.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.Rr.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.Rr.delete(n)),Dn.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=sa(),i=t.length+1,a=new En(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return Dn.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new gr((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=sa(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=sa(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return Dn.resolve(s)}},{key:"Et",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.Rr.get(r.largestBatchId).delete(n.key);this.Rr.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new $a(t,n));var a=this.Rr.get(t);void 0===a&&(a=da(),this.Rr.set(t,a)),this.Rr.set(t,a.add(n.key))}}]),e}(),yu=function(){function e(){k(this,e),this.sessionToken=Sr.EMPTY_BYTE_STRING}return w(e,[{key:"getSessionToken",value:function(e){return Dn.resolve(this.sessionToken)}},{key:"setSessionToken",value:function(e,t){return this.sessionToken=t,Dn.resolve()}}]),e}(),gu=function(){function e(){k(this,e),this.Vr=new wr(ku.mr),this.gr=new wr(ku.pr)}return w(e,[{key:"isEmpty",value:function(){return this.Vr.isEmpty()}},{key:"addReference",value:function(e,t){var n=new ku(e,t);this.Vr=this.Vr.add(n),this.gr=this.gr.add(n)}},{key:"yr",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.wr(new ku(e,t))}},{key:"Sr",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"br",value:function(e){var t=this,n=new En(new bn([])),r=new ku(n,e),i=new ku(n,e+1),a=[];return this.gr.forEachInRange([r,i],(function(e){t.wr(e),a.push(e.key)})),a}},{key:"Dr",value:function(){var e=this;this.Vr.forEach((function(t){return e.wr(t)}))}},{key:"wr",value:function(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}},{key:"vr",value:function(e){var t=new En(new bn([])),n=new ku(t,e),r=new ku(t,e+1),i=da();return this.gr.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new ku(e,0),n=this.Vr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),ku=function(){function e(t,n){k(this,e),this.key=t,this.Cr=n}return w(e,null,[{key:"mr",value:function(e,t){return En.comparator(e.key,t.key)||cn(e.Cr,t.Cr)}},{key:"pr",value:function(e,t){return cn(e.Cr,t.Cr)||En.comparator(e.key,t.key)}}]),e}(),bu=function(){function e(t,n){k(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.Fr=1,this.Mr=new wr(ku.mr)}return w(e,[{key:"checkEmpty",value:function(e){return Dn.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new Ya(i,t,n,r);this.mutationQueue.push(a);var o,u=g(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.Mr=this.Mr.add(new ku(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return Dn.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Dn.resolve(this.Or(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.Nr(n),i=r<0?0:r;return Dn.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Dn.resolve(0===this.mutationQueue.length?Fn:this.Fr-1)}},{key:"getAllMutationBatches",value:function(e){return Dn.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new ku(t,0),i=new ku(t,Number.POSITIVE_INFINITY),a=[];return this.Mr.forEachInRange([r,i],(function(e){var t=n.Or(e.Cr);a.push(t)})),Dn.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new wr(cn);return t.forEach((function(e){var t=new ku(e,0),i=new ku(e,Number.POSITIVE_INFINITY);n.Mr.forEachInRange([t,i],(function(e){r=r.add(e.Cr)}))})),Dn.resolve(this.Br(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;En.isDocumentKey(i)||(i=i.child(""));var a=new ku(new En(i),0),o=new wr(cn);return this.Mr.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Cr)),!0)}),a),Dn.resolve(this.Br(o))}},{key:"Br",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.Or(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Kt(0===this.Lr(t.batchId,"removed")),this.mutationQueue.shift();var r=this.Mr;return Dn.forEach(t.mutations,(function(i){var a=new ku(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.Mr=r}))}},{key:"qn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new ku(t,0),r=this.Mr.firstAfterOrEqual(n);return Dn.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,Dn.resolve()}},{key:"Lr",value:function(e,t){return this.Nr(e)}},{key:"Nr",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"Or",value:function(e){var t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),wu=function(){function e(t){k(this,e),this.kr=t,this.docs=new gr(En.comparator),this.size=0}return w(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.kr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Dn.resolve(n?n.document.mutableCopy():fi.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=ia();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():fi.newInvalidDocument(e))})),Dn.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=ia(),a=t.path,o=new En(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(o);u.hasNext();){var s=u.getNext(),c=s.key,l=s.value.document;if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||Nn(In(l),n)<=0||(r.has(l.key)||Ji(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return Dn.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){Wt()}},{key:"qr",value:function(e,t){return Dn.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new _u(this)}},{key:"getSize",value:function(e){return Dn.resolve(this.size)}}]),e}(),_u=function(e){x(n,e);var t=C(n);function n(e){var r;return k(this,n),(r=t.call(this)).Ir=e,r}return w(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Ir.addEntry(e,i)):t.Ir.removeEntry(r)})),Dn.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Ir.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Ir.getEntries(e,t)}}]),n}(hu),Eu=function(){function e(t){k(this,e),this.persistence=t,this.Qr=new na((function(e){return Mi(e)}),Ui),this.lastRemoteSnapshotVersion=yn.min(),this.highestTargetId=0,this.$r=0,this.Ur=new gu,this.targetCount=0,this.Kr=iu.Un()}return w(e,[{key:"forEachTarget",value:function(e,t){return this.Qr.forEach((function(e,n){return t(n)})),Dn.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Dn.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Dn.resolve(this.$r)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Kr.next(),Dn.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.$r&&(this.$r=t),Dn.resolve()}},{key:"zn",value:function(e){this.Qr.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Kr=new iu(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.zn(t),this.targetCount+=1,Dn.resolve()}},{key:"updateTargetData",value:function(e,t){return this.zn(t),Dn.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Qr.delete(t.target),this.Ur.br(t.targetId),this.targetCount-=1,Dn.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Qr.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Qr.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),Dn.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Dn.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Qr.get(t)||null;return Dn.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Ur.yr(t,n),Dn.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Ur.Sr(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Dn.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Ur.br(t),Dn.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Ur.vr(t);return Dn.resolve(n)}},{key:"containsKey",value:function(e,t){return Dn.resolve(this.Ur.containsKey(t))}}]),e}(),xu=function(){function e(t,n){var r=this;k(this,e),this.Wr={},this.overlays={},this.Gr=new Un(0),this.zr=!1,this.zr=!0,this.jr=new yu,this.referenceDelegate=t(this),this.Hr=new Eu(this),this.indexManager=new Zo,this.remoteDocumentCache=function(e){return new wu(e)}((function(e){return r.referenceDelegate.Jr(e)})),this.serializer=new Xo(n),this.Yr=new vu(this.serializer)}return w(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.zr=!1,Promise.resolve()}},{key:"started",get:function(){return this.zr}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new mu,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Wr[e.toKey()];return n||(n=new bu(t,this.referenceDelegate),this.Wr[e.toKey()]=n),n}},{key:"getGlobalsCache",value:function(){return this.jr}},{key:"getTargetCache",value:function(){return this.Hr}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Yr}},{key:"runTransaction",value:function(e,t,n){var r=this;zt("MemoryPersistence","Starting transaction:",e);var i=new Su(this.Gr.next());return this.referenceDelegate.Zr(),n(i).next((function(e){return r.referenceDelegate.Xr(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"ei",value:function(e,t){return Dn.or(Object.values(this.Wr).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Su=function(e){x(n,e);var t=C(n);function n(e){var r;return k(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return w(n)}(Rn),Tu=function(){function e(t){k(this,e),this.persistence=t,this.ti=new gu,this.ni=null}return w(e,[{key:"ii",get:function(){if(this.ni)return this.ni;throw Wt()}},{key:"addReference",value:function(e,t,n){return this.ti.addReference(n,t),this.ii.delete(n.toString()),Dn.resolve()}},{key:"removeReference",value:function(e,t,n){return this.ti.removeReference(n,t),this.ii.add(n.toString()),Dn.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.ii.add(t.toString()),Dn.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.ti.br(t.targetId).forEach((function(e){return n.ii.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.ii.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Zr",value:function(){this.ni=new Set}},{key:"Xr",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Dn.forEach(this.ii,(function(r){var i=En.fromPath(r);return t.si(e,i).next((function(e){e||n.removeEntry(i,yn.min())}))})).next((function(){return t.ni=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.si(e,t).next((function(e){e?n.ii.delete(t.toString()):n.ii.add(t.toString())}))}},{key:"Jr",value:function(e){return 0}},{key:"si",value:function(e,t){var n=this;return Dn.or([function(){return Dn.resolve(n.ti.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.ei(e,t)}])}}],[{key:"ri",value:function(t){return new e(t)}}]),e}(),Iu=function(){function e(t,n){k(this,e),this.persistence=t,this.oi=new na((function(e){return qn(e.path)}),(function(e,t){return e.isEqual(t)})),this.garbageCollector=fu(this,n)}return w(e,[{key:"Zr",value:function(){}},{key:"Xr",value:function(e){return Dn.resolve()}},{key:"forEachTarget",value:function(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}},{key:"nr",value:function(e){var t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"sr",value:function(e){var t=0;return this.rr(e,(function(e){t++})).next((function(){return t}))}},{key:"rr",value:function(e,t){var n=this;return Dn.forEach(this.oi,(function(r,i){return n.ar(e,r,i).next((function(e){return e?Dn.resolve():t(i)}))}))}},{key:"removeTargets",value:function(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=0,i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.qr(e,(function(i){return n.ar(e,i,t).next((function(e){e||(r++,a.removeEntry(i,yn.min()))}))})).next((function(){return a.apply(e)})).next((function(){return r}))}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.oi.set(t,e.currentSequenceNumber),Dn.resolve()}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}},{key:"addReference",value:function(e,t,n){return this.oi.set(n,e.currentSequenceNumber),Dn.resolve()}},{key:"removeReference",value:function(e,t,n){return this.oi.set(n,e.currentSequenceNumber),Dn.resolve()}},{key:"updateLimboDocument",value:function(e,t){return this.oi.set(t,e.currentSequenceNumber),Dn.resolve()}},{key:"Jr",value:function(e){var t=e.key.toString().length;return e.isFoundDocument()&&(t+=Zr(e.data.value)),t}},{key:"ar",value:function(e,t,n){var r=this;return Dn.or([function(){return r.persistence.ei(e,t)},function(){return r.persistence.getTargetCache().containsKey(e,t)},function(){var e=r.oi.get(t);return Dn.resolve(void 0!==e&&e>n)}])}},{key:"getCacheSize",value:function(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}],[{key:"ri",value:function(t,n){return new e(t,n)}}]),e}();var Cu=function(){function e(t,n,r,i){k(this,e),this.targetId=t,this.fromCache=n,this.Hi=r,this.Ji=i}return w(e,null,[{key:"Yi",value:function(t,n){var r,i=da(),a=da(),o=g(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),Nu=function(){function e(){k(this,e),this._documentReadCount=0}return w(e,[{key:"documentReadCount",get:function(){return this._documentReadCount}},{key:"incrementDocumentReadCount",value:function(e){this._documentReadCount+=e}}]),e}(),Au=function(){function e(){k(this,e),this.Zi=!1,this.Xi=!1,this.es=100,this.ts=K()?8:Ln(H())>0?6:4}return w(e,[{key:"initialize",value:function(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this,a={result:null};return this.rs(e,t).next((function(e){a.result=e})).next((function(){if(!a.result)return i.ss(e,t,r,n).next((function(e){a.result=e}))})).next((function(){if(!a.result){var n=new Nu;return i._s(e,t,n).next((function(r){if(a.result=r,i.Xi)return i.us(e,t,n,r.size)}))}})).next((function(){return a.result}))}},{key:"us",value:function(e,t,n,r){return n.documentReadCount<this.es?(jt()<=fe.DEBUG&&zt("QueryEngine","SDK will not create cache indexes for query:",$i(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),Dn.resolve()):(jt()<=fe.DEBUG&&zt("QueryEngine","Query:",$i(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.ts*r?(jt()<=fe.DEBUG&&zt("QueryEngine","The SDK decides to create cache indexes for query:",$i(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Wi(t))):Dn.resolve())}},{key:"rs",value:function(e,t){var n=this;if(Bi(t))return Dn.resolve(null);var r=Wi(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=Qi(t,null,"F"),r=Wi(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=da.apply(void 0,d(i));return n.ns.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.cs(t,i);return n.ls(t,o,a,r.readTime)?n.rs(e,Qi(t,null,"F")):n.hs(e,o,t,r)}))}))})))}))}},{key:"ss",value:function(e,t,n,r){var i=this;return Bi(t)||r.isEqual(yn.min())?Dn.resolve(null):this.ns.getDocuments(e,n).next((function(a){var o=i.cs(t,a);return i.ls(t,o,n,r)?Dn.resolve(null):(jt()<=fe.DEBUG&&zt("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),$i(t)),i.hs(e,o,t,Tn(r,xn)).next((function(e){return e})))}))}},{key:"cs",value:function(e,t){var n=new wr(ea(e));return t.forEach((function(t,r){Ji(e,r)&&(n=n.add(r))})),n}},{key:"ls",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"_s",value:function(e,t,n){return jt()<=fe.DEBUG&&zt("QueryEngine","Using full collection scan to execute query:",$i(t)),this.ns.getDocumentsMatchingQuery(e,t,Cn.min(),n)}},{key:"hs",value:function(e,t,n,r){return this.ns.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),Ru="LocalStore",Pu=function(){function e(t,n,r,i){k(this,e),this.persistence=t,this.Ps=n,this.serializer=i,this.Ts=new gr(cn),this.Is=new na((function(e){return Mi(e)}),Ui),this.Es=new Map,this.ds=t.getRemoteDocumentCache(),this.Hr=t.getTargetCache(),this.Yr=t.getBundleCache(),this.As(r)}return w(e,[{key:"As",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new pu(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Ts)}))}}]),e}();function Ou(e,t,n,r){return new Pu(e,t,n,r)}function Du(e,t){return Lu.apply(this,arguments)}function Lu(){return(Lu=h(l().mark((function e(t,n){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gt(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.As(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=da(),s=g(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=g(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(b){f.e(b)}finally{f.f()}}}catch(b){s.e(b)}finally{s.f()}var d,p=g(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,y=g(v.mutations);try{for(y.s();!(m=y.n()).done;){var k=m.value;u=u.add(k.key)}}catch(b){y.e(b)}finally{y.f()}}}catch(b){p.e(b)}finally{p.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{Rs:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mu(e,t){var n=Gt(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.ds.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Dn.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);Kt(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=da(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function Uu(e){var t=Gt(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Hr.getLastRemoteSnapshotVersion(e)}))}function Fu(e,t){var n=Gt(e),r=t.snapshotVersion,i=n.Ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.ds.newChangeBuffer({trackRemovals:!0});i=n.Ts;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Hr.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Hr.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(u)?c=c.withResumeToken(Sr.EMPTY_BYTE_STRING,yn.min()).withLastLimboFreeSnapshotVersion(yn.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Hr.updateTargetData(e,c))}}));var u=ia(),s=da();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Vu(e,a,t.documentUpdates).next((function(e){u=e.Vs,s=e.fs}))),!r.isEqual(yn.min())){var c=n.Hr.getLastRemoteSnapshotVersion(e).next((function(t){return n.Hr.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return Dn.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.Ts=i,e}))}function Vu(e,t,n){var r=da(),i=da();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=ia();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(yn.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):zt(Ru,"Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{Vs:r,fs:i}}))}function ju(e,t){var n=Gt(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=Fn),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function zu(e,t){var n=Gt(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Hr.getTargetData(e,t).next((function(i){return i?(r=i,Dn.resolve(r)):n.Hr.allocateTargetId(e).next((function(i){return r=new Yo(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Hr.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Ts.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ts=n.Ts.insert(e.targetId,e),n.Is.set(t,e.targetId)),e}))}function Bu(e,t,n){return qu.apply(this,arguments)}function qu(){return(qu=h(l().mark((function e(t,n,r){var i,a,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Gt(t),a=i.Ts.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Mn(e.t1)){e.next=12;break}throw e.t1;case 12:zt(Ru,"Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Ts=i.Ts.remove(n),i.Is.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function Hu(e,t,n){var r=Gt(e),i=yn.min(),a=da();return r.persistence.runTransaction("Execute query","readwrite",(function(e){return function(e,t,n){var r=Gt(e),i=r.Is.get(n);return void 0!==i?Dn.resolve(r.Ts.get(i)):r.Hr.getTargetData(t,n)}(r,e,Wi(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Ps.getDocumentsMatchingQuery(e,t,n?i:yn.min(),n?a:da())})).next((function(e){return Wu(r,Zi(t),e),{documents:e,gs:a}}))}))}function Wu(e,t,n){var r=e.Es.get(t)||yn.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Es.set(t,r)}var Ku=function(){function e(){k(this,e),this.activeTargetIds=va()}return w(e,[{key:"Ds",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"vs",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"bs",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),Gu=function(){function e(){k(this,e),this.ho=new Ku,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return w(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t&&this.ho.Ds(e),this.Po[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Po[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.ho.vs(e)}},{key:"isLocalQueryTarget",value:function(e){return this.ho.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Po[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.ho.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.ho.activeTargetIds.has(e)}},{key:"start",value:function(){return this.ho=new Ku,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),Qu=function(){function e(){k(this,e)}return w(e,[{key:"To",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Yu="ConnectivityMonitor",Xu=function(){function e(){var t=this;k(this,e),this.Io=function(){return t.Eo()},this.Ao=function(){return t.Ro()},this.Vo=[],this.mo()}return w(e,[{key:"To",value:function(e){this.Vo.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}},{key:"mo",value:function(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}},{key:"Eo",value:function(){zt(Yu,"Network connectivity changed: AVAILABLE");var e,t=g(this.Vo);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Ro",value:function(){zt(Yu,"Network connectivity changed: UNAVAILABLE");var e,t=g(this.Vo);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"D",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),$u=null;function Ju(){return null===$u?$u=268435456+Math.round(2147483648*Math.random()):$u++,"0x"+$u.toString(16)}var Zu="RestConnection",es={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},ts=function(){function e(t){k(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.po=n+"://"+t.host,this.yo="projects/".concat(r,"/databases/").concat(i),this.wo=this.databaseId.database===Fr?"project_id=".concat(r):"project_id=".concat(r,"&database_id=").concat(i)}return w(e,[{key:"fo",get:function(){return!1}},{key:"So",value:function(e,t,n,r,i){var a=Ju(),o=this.bo(e,t.toUriEncodedString());zt(Zu,"Sending RPC '".concat(e,"' ").concat(a,":"),o,n);var u={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(u,r,i),this.vo(e,o,u,n).then((function(t){return zt(Zu,"Received RPC '".concat(e,"' ").concat(a,": "),t),t}),(function(t){throw qt(Zu,"RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"Co",value:function(e,t,n,r,i,a){return this.So(e,t,n,r,i)}},{key:"Do",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ft,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"bo",value:function(e,t){var n=es[e];return"".concat(this.po,"/v1/").concat(t,":").concat(n)}},{key:"terminate",value:function(){}}]),e}(),ns=function(){function e(t){k(this,e),this.Fo=t.Fo,this.Mo=t.Mo}return w(e,[{key:"xo",value:function(e){this.Oo=e}},{key:"No",value:function(e){this.Bo=e}},{key:"Lo",value:function(e){this.ko=e}},{key:"onMessage",value:function(e){this.qo=e}},{key:"close",value:function(){this.Mo()}},{key:"send",value:function(e){this.Fo(e)}},{key:"Qo",value:function(){this.Oo()}},{key:"$o",value:function(){this.Bo()}},{key:"Uo",value:function(e){this.ko(e)}},{key:"Ko",value:function(e){this.qo(e)}}]),e}(),rs="WebChannelConnection",is=function(e){x(n,e);var t=C(n);function n(e){var r;return k(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r.longPollingOptions=e.longPollingOptions,r}return w(n,[{key:"vo",value:function(e,t,n,r){var i=Ju();return new Promise((function(a,o){var u=new xt;u.setWithCredentials(!0),u.listenOnce(Tt.COMPLETE,(function(){try{switch(u.getLastErrorCode()){case It.NO_ERROR:var t=u.getResponseJson();zt(rs,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case It.TIMEOUT:zt(rs,"RPC '".concat(e,"' ").concat(i," timed out")),o(new Yt(Qt.DEADLINE_EXCEEDED,"Request time out"));break;case It.HTTP_ERROR:var n=u.getStatus();if(zt(rs,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",u.getResponseText()),n>0){var r=u.getResponseJson();Array.isArray(r)&&(r=r[0]);var s=null==r?void 0:r.error;if(s&&s.status&&s.message){var c=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(Qt).indexOf(t)>=0?t:Qt.UNKNOWN}(s.status);o(new Yt(c,s.message))}else o(new Yt(Qt.UNKNOWN,"Server responded with status "+u.getStatus()))}else o(new Yt(Qt.UNAVAILABLE,"Connection failed."));break;default:Wt()}}finally{zt(rs,"RPC '".concat(e,"' ").concat(i," completed."))}}));var s=JSON.stringify(r);zt(rs,"RPC '".concat(e,"' ").concat(i," sending request:"),r),u.send(t,"POST",s,n,15)}))}},{key:"Wo",value:function(e,t,n){var r=Ju(),i=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Rt(),o=At(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},s=this.longPollingOptions.timeoutSeconds;void 0!==s&&(u.longPollingTimeout=Math.round(1e3*s)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Do(u.initMessageHeaders,t,n),u.encodeInitMessageHeaders=!0;var c=i.join("");zt(rs,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),u);var l=a.createWebChannel(c,u),f=!1,h=!1,d=new ns({Fo:function(t){h?zt(rs,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(f||(zt(rs,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),l.open(),f=!0),zt(rs,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),l.send(t))},Mo:function(){return l.close()}}),p=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return p(l,St.EventType.OPEN,(function(){h||(zt(rs,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),d.Qo())})),p(l,St.EventType.CLOSE,(function(){h||(h=!0,zt(rs,"RPC '".concat(e,"' stream ").concat(r," transport closed")),d.Uo())})),p(l,St.EventType.ERROR,(function(t){h||(h=!0,qt(rs,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),d.Uo(new Yt(Qt.UNAVAILABLE,"The operation could not be completed")))})),p(l,St.EventType.MESSAGE,(function(t){var n;if(!h){var i=t.data[0];Kt(!!i);var a=i,o=(null==a?void 0:a.error)||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){zt(rs,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);var u=o.status,s=function(e){var t=Wa[e];if(void 0!==t)return eo(t)}(u),c=o.message;void 0===s&&(s=Qt.INTERNAL,c="Unknown error status: "+u+" with message "+o.message),h=!0,d.Uo(new Yt(s,c)),l.close()}else zt(rs,"RPC '".concat(e,"' stream ").concat(r," received:"),i),d.Ko(i)}})),p(o,Nt.STAT_EVENT,(function(t){t.stat===Ct.PROXY?zt(rs,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Ct.NOPROXY&&zt(rs,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){d.$o()}),0),d}}]),n}(ts);function as(){return"undefined"!=typeof document?document:null}function os(e){return new bo(e,!0)}var us=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;k(this,e),this.Ti=t,this.timerId=n,this.Go=r,this.zo=i,this.jo=a,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}return w(e,[{key:"reset",value:function(){this.Ho=0}},{key:"Zo",value:function(){this.Ho=this.jo}},{key:"Xo",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),i=Math.max(0,n-r);i>0&&zt("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Ho," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,i,(function(){return t.Yo=Date.now(),e()})),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}},{key:"t_",value:function(){null!==this.Jo&&(this.Jo.skipDelay(),this.Jo=null)}},{key:"cancel",value:function(){null!==this.Jo&&(this.Jo.cancel(),this.Jo=null)}},{key:"e_",value:function(){return(Math.random()-.5)*this.Ho}}]),e}(),ss="PersistentStream",cs=function(){function e(t,n,r,i,a,o,u,s){k(this,e),this.Ti=t,this.n_=r,this.r_=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new us(t,n)}return w(e,[{key:"u_",value:function(){return 1===this.state||5===this.state||this.c_()}},{key:"c_",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){this.__=0,4!==this.state?this.auth():this.l_()}},{key:"stop",value:function(){var e=h(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.u_(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"h_",value:function(){this.state=0,this.a_.reset()}},{key:"P_",value:function(){var e=this;this.c_()&&null===this.s_&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,(function(){return e.T_()})))}},{key:"I_",value:function(e){this.E_(),this.stream.send(e)}},{key:"T_",value:function(){var e=h(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.c_()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"E_",value:function(){this.s_&&(this.s_.cancel(),this.s_=null)}},{key:"d_",value:function(){this.o_&&(this.o_.cancel(),this.o_=null)}},{key:"close",value:function(){var e=h(l().mark((function e(t,n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.E_(),this.d_(),this.a_.cancel(),this.i_++,4!==t?this.a_.reset():n&&n.code===Qt.RESOURCE_EXHAUSTED?(Bt(n.toString()),Bt("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):n&&n.code===Qt.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.A_(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Lo(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"A_",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.R_(this.i_),n=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=s(t,2),i=r[0],a=r[1];e.i_===n&&e.V_(i,a)}),(function(n){t((function(){var t=new Yt(Qt.UNKNOWN,"Fetching auth token failed: "+n.message);return e.m_(t)}))}))}},{key:"V_",value:function(e,t){var n=this,r=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo((function(){r((function(){return n.listener.xo()}))})),this.stream.No((function(){r((function(){return n.state=2,n.o_=n.Ti.enqueueAfterDelay(n.r_,1e4,(function(){return n.c_()&&(n.state=3),Promise.resolve()})),n.listener.No()}))})),this.stream.Lo((function(e){r((function(){return n.m_(e)}))})),this.stream.onMessage((function(e){r((function(){return 1==++n.__?n.g_(e):n.onNext(e)}))}))}},{key:"l_",value:function(){var e=this;this.state=5,this.a_.Xo(h(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"m_",value:function(e){return zt(ss,"close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"R_",value:function(e){var t=this;return function(n){t.Ti.enqueueAndForget((function(){return t.i_===e?n():(zt(ss,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),ls=function(e){x(n,e);var t=C(n);function n(e,r,i,a,o,u){var s;return k(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s}return w(n,[{key:"f_",value:function(e,t){return this.connection.Wo("Listen",e,t)}},{key:"g_",value:function(e){return this.onNext(e)}},{key:"onNext",value:function(e){this.a_.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Wt()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(Kt(void 0===t||"string"==typeof t),Sr.fromBase64String(t||"")):(Kt(void 0===t||t instanceof Buffer||t instanceof Uint8Array),Sr.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?Qt.UNKNOWN:eo(e.code);return new Yt(t,e.message||"")}(o);n=new fo(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=Ao(e,s.document.name),l=So(s.document.updateTime),f=s.document.createTime?So(s.document.createTime):yn.min(),h=new ci({mapValue:{fields:s.document.fields}}),d=fi.newFoundDocument(c,l,f,h),p=s.targetIds||[],v=s.removedTargetIds||[];n=new co(p,v,d.key,d)}else if("documentDelete"in t){t.documentDelete;var m=t.documentDelete;m.document;var y=Ao(e,m.document),g=m.readTime?So(m.readTime):yn.min(),k=fi.newNoDocument(y,g),b=m.removedTargetIds||[];n=new co([],b,k.key,k)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var _=Ao(e,w.document),E=w.removedTargetIds||[];n=new co([],E,_,null)}else{if(!("filter"in t))return Wt();t.filter;var x=t.filter;x.targetId;var S=x.count,T=void 0===S?0:S,I=x.unchangedNames,C=new Ja(T,I),N=x.targetId;n=new lo(N,C)}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return yn.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?yn.min():t.readTime?So(t.readTime):yn.min()}(e);return this.listener.p_(t,n)}},{key:"y_",value:function(e){var t={};t.database=Oo(this.serializer),t.addTarget=function(e,t){var n,r=t.target;if((n=Fi(r)?{documents:Uo(e,r)}:{query:Fo(e,r).ht}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Eo(e,t.resumeToken);var i=wo(e,t.expectedCount);null!==i&&(n.expectedCount=i)}else if(t.snapshotVersion.compareTo(yn.min())>0){n.readTime=_o(e,t.snapshotVersion.toTimestamp());var a=wo(e,t.expectedCount);null!==a&&(n.expectedCount=a)}return n}(this.serializer,e);var n=function(e,t){var n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Wt()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.I_(t)}},{key:"w_",value:function(e){var t={};t.database=Oo(this.serializer),t.removeTarget=e,this.I_(t)}}]),n}(cs),fs=function(e){x(n,e);var t=C(n);function n(e,r,i,a,o,u){var s;return k(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s}return w(n,[{key:"S_",get:function(){return this.__>0}},{key:"start",value:function(){this.lastStreamToken=void 0,kt(S(n.prototype),"start",this).call(this)}},{key:"A_",value:function(){this.S_&&this.b_([])}},{key:"f_",value:function(e,t){return this.connection.Wo("Write",e,t)}},{key:"g_",value:function(e){return Kt(!!e.streamToken),this.lastStreamToken=e.streamToken,Kt(!e.writeResults||0===e.writeResults.length),this.listener.D_()}},{key:"onNext",value:function(e){Kt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();var t=function(e,t){return e&&e.length>0?(Kt(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?So(e.updateTime):So(t);return n.isEqual(yn.min())&&(n=So(t)),new Ra(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=So(e.commitTime);return this.listener.v_(n,t)}},{key:"C_",value:function(){var e={};e.database=Oo(this.serializer),this.I_(e)}},{key:"b_",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Mo(t.serializer,e)}))};this.I_(n)}}]),n}(cs),hs=function(e){x(n,e);var t=C(n);function n(e,r,i,a){var o;return k(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.serializer=a,o.F_=!1,o}return w(n,[{key:"M_",value:function(){if(this.F_)throw new Yt(Qt.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"So",value:function(e,t,n,r){var i=this;return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=s(a,2),u=o[0],c=o[1];return i.connection.So(e,Io(t,n),r,u,c)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Qt.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new Yt(Qt.UNKNOWN,e.toString())}))}},{key:"Co",value:function(e,t,n,r,i){var a=this;return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(o){var u=s(o,2),c=u[0],l=u[1];return a.connection.Co(e,Io(t,n),r,c,l,i)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Qt.UNAUTHENTICATED&&(a.authCredentials.invalidateToken(),a.appCheckCredentials.invalidateToken()),e):new Yt(Qt.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.F_=!0,this.connection.terminate()}}]),n}(w((function e(){k(this,e)}))),ds=function(){function e(t,n){k(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}return w(e,[{key:"B_",value:function(){var e=this;0===this.x_&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.O_=null,e.k_("Backend didn't respond within 10 seconds."),e.L_("Offline"),Promise.resolve()})))}},{key:"q_",value:function(e){"Online"===this.state?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.L_("Offline")))}},{key:"set",value:function(e){this.Q_(),this.x_=0,"Online"===e&&(this.N_=!1),this.L_(e)}},{key:"L_",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"k_",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.N_?(Bt(t),this.N_=!1):zt("OnlineStateTracker",t)}},{key:"Q_",value:function(){null!==this.O_&&(this.O_.cancel(),this.O_=null)}}]),e}(),ps="RemoteStore",vs=w((function e(t,n,r,i,a){var o=this;k(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=a,this.z_.To((function(e){r.enqueueAndForget(h(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Ts(o),!e.t0){e.next=5;break}return zt(ps,"Restarting streams for network reachability change."),e.next=5,function(){var e=h(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Gt(t)).W_.add(4),e.next=4,gs(n);case 4:return n.j_.set("Unknown"),n.W_.delete(4),e.next=8,ms(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.j_=new ds(r,i)}));function ms(e){return ys.apply(this,arguments)}function ys(){return(ys=h(l().mark((function e(t){var n,r,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ts(t)){e.next=18;break}n=g(t.G_),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])})))).apply(this,arguments)}function gs(e){return ks.apply(this,arguments)}function ks(){return(ks=h(l().mark((function e(t){var n,r,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=g(t.G_),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})))).apply(this,arguments)}function bs(e,t){var n=Gt(e);n.K_.has(t.targetId)||(n.K_.set(t.targetId,t),Ss(n)?xs(n):rc(n).c_()&&_s(n,t))}function ws(e,t){var n=Gt(e),r=rc(n);n.K_.delete(t),r.c_()&&Es(n,t),0===n.K_.size&&(r.c_()?r.P_():Ts(n)&&n.j_.set("Unknown"))}function _s(e,t){if(e.H_.Ne(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(yn.min())>0){var n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}rc(e).y_(t)}function Es(e,t){e.H_.Ne(t),rc(e).w_(t)}function xs(e){e.H_=new po({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},lt:function(t){return e.K_.get(t)||null},it:function(){return e.datastore.serializer.databaseId}}),rc(e).start(),e.j_.B_()}function Ss(e){return Ts(e)&&!rc(e).u_()&&e.K_.size>0}function Ts(e){return 0===Gt(e).W_.size}function Is(e){e.H_=void 0}function Cs(e){return Ns.apply(this,arguments)}function Ns(){return(Ns=h(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.j_.set("Online");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function As(e){return Rs.apply(this,arguments)}function Rs(){return(Rs=h(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.K_.forEach((function(e,n){_s(t,e)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ps(e,t){return Os.apply(this,arguments)}function Os(){return(Os=h(l().mark((function e(t,n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Is(t),Ss(t)?(t.j_.q_(n),xs(t)):t.j_.set("Unknown");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ds(e,t,n){return Ls.apply(this,arguments)}function Ls(){return Ls=h(l().mark((function e(t,n,r){var i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.j_.set("Online"),!(n instanceof fo&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=h(l().mark((function e(t,n){var r,i,a,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=g(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.K_.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.K_.delete(o),t.H_.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),zt(ps,"Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,Ms(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof co?t.H_.We(n):n instanceof lo?t.H_.Ze(n):t.H_.je(n),r.isEqual(yn.min())){e.next=29;break}return e.prev=14,e.next=17,Uu(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.H_.ot(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.K_.get(r);i&&e.K_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t,n){var r=e.K_.get(t);if(r){e.K_.set(t,r.withResumeToken(Sr.EMPTY_BYTE_STRING,r.snapshotVersion)),Es(e,t);var i=new Yo(r.target,t,n,r.sequenceNumber);_s(e,i)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),zt(ps,"Failed to raise snapshot:",e.t2),e.next=29,Ms(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),Ls.apply(this,arguments)}function Ms(e,t,n){return Us.apply(this,arguments)}function Us(){return(Us=h(l().mark((function e(t,n,r){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Mn(n)){e.next=2;break}throw n;case 2:return t.W_.add(1),e.next=5,gs(t);case 5:t.j_.set("Offline"),r||(r=function(){return Uu(t.localStore)}),t.asyncQueue.enqueueRetryable(h(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return zt(ps,"Retrying IndexedDB access"),e.next=3,r();case 3:return t.W_.delete(1),e.next=6,ms(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fs(e,t){return t().catch((function(n){return Ms(e,n,t)}))}function Vs(e){return js.apply(this,arguments)}function js(){return(js=h(l().mark((function e(t){var n,r,i,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Gt(t),r=ic(n),i=n.U_.length>0?n.U_[n.U_.length-1].batchId:Fn;case 2:if(!zs(n)){e.next=19;break}return e.prev=3,e.next=6,ju(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.U_.length&&r.P_(),e.abrupt("break",19);case 10:i=a.batchId,Bs(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,Ms(n,e.t0);case 17:e.next=2;break;case 19:qs(n)&&Hs(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])})))).apply(this,arguments)}function zs(e){return Ts(e)&&e.U_.length<10}function Bs(e,t){e.U_.push(t);var n=ic(e);n.c_()&&n.S_&&n.b_(t.mutations)}function qs(e){return Ts(e)&&!ic(e).u_()&&e.U_.length>0}function Hs(e){ic(e).start()}function Ws(e){return Ks.apply(this,arguments)}function Ks(){return(Ks=h(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ic(t).C_();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gs(e){return Qs.apply(this,arguments)}function Qs(){return(Qs=h(l().mark((function e(t){var n,r,i,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=ic(t),r=g(t.U_);try{for(r.s();!(i=r.n()).done;)a=i.value,n.b_(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ys(e,t,n){return Xs.apply(this,arguments)}function Xs(){return(Xs=h(l().mark((function e(t,n,r){var i,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.U_.shift(),a=Xa.from(i,n,r),e.next=3,Fs(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,Vs(t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $s(e,t){return Js.apply(this,arguments)}function Js(){return Js=h(l().mark((function e(t,n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&ic(t).S_,!e.t0){e.next=4;break}return e.next=4,function(){var e=h(l().mark((function e(t,n){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!function(e){return Za(e)&&e!==Qt.ABORTED}(n.code)){e.next=7;break}return r=t.U_.shift(),ic(t).h_(),e.next=5,Fs(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,Vs(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:qs(t)&&Hs(t);case 5:case"end":return e.stop()}}),e)}))),Js.apply(this,arguments)}function Zs(e,t){return ec.apply(this,arguments)}function ec(){return(ec=h(l().mark((function e(t,n){var r,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Gt(t)).asyncQueue.verifyOperationInProgress(),zt(ps,"RemoteStore received new credentials"),i=Ts(r),r.W_.add(3),e.next=6,gs(r);case 6:return i&&r.j_.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.W_.delete(3),e.next=12,ms(r);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tc(e,t){return nc.apply(this,arguments)}function nc(){return(nc=h(l().mark((function e(t,n){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Gt(t),!n){e.next=7;break}return r.W_.delete(2),e.next=5,ms(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.W_.add(2),e.next=12,gs(r);case 12:r.j_.set("Unknown");case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rc(e){return e.J_||(e.J_=function(e,t,n){var r=Gt(e);return r.M_(),new ls(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{xo:Cs.bind(null,e),No:As.bind(null,e),Lo:Ps.bind(null,e),p_:Ds.bind(null,e)}),e.G_.push(function(){var t=h(l().mark((function t(n){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.J_.h_(),Ss(e)?xs(e):e.j_.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.J_.stop();case 6:Is(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.J_}function ic(e){return e.Y_||(e.Y_=function(e,t,n){var r=Gt(e);return r.M_(),new fs(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{xo:function(){return Promise.resolve()},No:Ws.bind(null,e),Lo:$s.bind(null,e),D_:Gs.bind(null,e),v_:Ys.bind(null,e)}),e.G_.push(function(){var t=h(l().mark((function t(n){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Y_.h_(),t.next=4,Vs(e);case 4:t.next=9;break;case 6:return t.next=8,e.Y_.stop();case 8:e.U_.length>0&&(zt(ps,"Stopping write stream with ".concat(e.U_.length," pending writes")),e.U_=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Y_}var ac=function(){function e(t,n,r,i,a){k(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Xt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return w(e,[{key:"promise",get:function(){return this.deferred.promise}},{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Yt(Qt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function oc(e,t){if(Bt("AsyncQueue","".concat(t,": ").concat(e)),Mn(e))return new Yt(Qt.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var uc,sc,cc=function(){function e(t){k(this,e),this.comparator=t?function(e,n){return t(e,n)||En.comparator(e.key,n.key)}:function(e,t){return En.comparator(e.key,t.key)},this.keyedMap=oa(),this.sortedSet=new gr(this.comparator)}return w(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),lc=function(){function e(){k(this,e),this.Z_=new gr(En.comparator)}return w(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Z_.get(t);n?0!==e.type&&3===n.type?this.Z_=this.Z_.insert(t,e):3===e.type&&1!==n.type?this.Z_=this.Z_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Z_=this.Z_.remove(t):1===e.type&&2===n.type?this.Z_=this.Z_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):Wt():this.Z_=this.Z_.insert(t,e)}},{key:"X_",value:function(){var e=[];return this.Z_.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),fc=function(){function e(t,n,r,i,a,o,u,s,c){k(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s,this.hasCachedResults=c}return w(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Yi(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,cc.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),hc=function(){function e(){k(this,e),this.ea=void 0,this.ta=[]}return w(e,[{key:"na",value:function(){return this.ta.some((function(e){return e.ra()}))}}]),e}(),dc=function(){function e(){k(this,e),this.queries=pc(),this.onlineState="Unknown",this.ia=new Set}return w(e,[{key:"terminate",value:function(){!function(e,t){var n=Gt(e),r=n.queries;n.queries=pc(),r.forEach((function(e,n){var r,i=g(n.ta);try{for(i.s();!(r=i.n()).done;){r.value.onError(t)}}catch(a){i.e(a)}finally{i.f()}}))}(this,new Yt(Qt.ABORTED,"Firestore shutting down"))}}]),e}();function pc(){return new na((function(e){return Xi(e)}),Yi)}function vc(e,t){return mc.apply(this,arguments)}function mc(){return(mc=h(l().mark((function e(t,n){var r,i,a,o,u;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=Gt(t),i=3,a=n.query,(o=r.queries.get(a))?!o.na()&&n.ra()&&(i=2):(o=new hc,i=n.ra()?0:1),e.prev=5,e.t0=i,e.next=0===e.t0?9:1===e.t0?13:2===e.t0?17:19;break;case 9:return e.next=11,r.onListen(a,!0);case 11:return o.ea=e.sent,e.abrupt("break",19);case 13:return e.next=15,r.onListen(a,!1);case 15:return o.ea=e.sent,e.abrupt("break",19);case 17:return e.next=19,r.onFirstRemoteStoreListen(a);case 19:e.next=25;break;case 21:return e.prev=21,e.t1=e.catch(5),u=oc(e.t1,"Initialization of query '".concat($i(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 25:r.queries.set(a,o),o.ta.push(n),n.sa(r.onlineState),o.ea&&n.oa(o.ea)&&wc(r);case 26:case"end":return e.stop()}}),e,null,[[5,21]])})))).apply(this,arguments)}function yc(e,t){return gc.apply(this,arguments)}function gc(){return(gc=h(l().mark((function e(t,n){var r,i,a,o,u;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=Gt(t),i=n.query,a=3,(o=r.queries.get(i))&&(u=o.ta.indexOf(n))>=0&&(o.ta.splice(u,1),0===o.ta.length?a=n.ra()?0:1:!o.na()&&n.ra()&&(a=2)),e.t0=a,e.next=0===e.t0?7:1===e.t0?8:2===e.t0?9:10;break;case 7:return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i,!0)));case 8:return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i,!1)));case 9:return e.abrupt("return",r.onLastRemoteStoreUnlisten(i));case 10:return e.abrupt("return");case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kc(e,t){var n,r=Gt(e),i=!1,a=g(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=g(s.ta);try{for(l.s();!(c=l.n()).done;){c.value.oa(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.ea=o}}}catch(f){a.e(f)}finally{a.f()}i&&wc(r)}function bc(e,t,n){var r=Gt(e),i=r.queries.get(t);if(i){var a,o=g(i.ta);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function wc(e){e.ia.forEach((function(e){e.next()}))}(sc=uc||(uc={}))._a="default",sc.Cache="cache";var _c=function(){function e(t,n,r){k(this,e),this.query=t,this.aa=n,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}return w(e,[{key:"oa",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=g(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new fc(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.ua?this.la(e)&&(this.aa.next(e),a=!0):this.ha(e,this.onlineState)&&(this.Pa(e),a=!0),this.ca=e,a}},{key:"onError",value:function(e){this.aa.error(e)}},{key:"sa",value:function(e){this.onlineState=e;var t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}},{key:"ha",value:function(e,t){if(!e.fromCache)return!0;if(!this.ra())return!0;var n="Offline"!==t;return(!this.options.Ta||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"la",value:function(e){if(e.docChanges.length>0)return!0;var t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Pa",value:function(e){e=fc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}},{key:"ra",value:function(){return this.options.source!==uc.Cache}}]),e}();var Ec=w((function e(t){k(this,e),this.key=t})),xc=w((function e(t){k(this,e),this.key=t})),Sc=function(){function e(t,n){k(this,e),this.query=t,this.fa=n,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=da(),this.mutatedKeys=da(),this.ya=ea(t),this.wa=new cc(this.ya)}return w(e,[{key:"Sa",get:function(){return this.fa}},{key:"ba",value:function(e,t){var n=this,r=t?t.Da:new lc,i=t?t.wa:this.wa,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=Ji(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.va(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.ya(f,s)>0||c&&n.ya(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{wa:o,Da:r,ls:u,mutatedKeys:a}}},{key:"va",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n,r){var i=this,a=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;var o=e.Da.X_();o.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Wt()}};return n(e)-n(t)}(e.type,t.type)||i.ya(e.doc,t.doc)})),this.Ca(n),r=null!=r&&r;var u=t&&!r?this.Fa():[],s=0===this.pa.size&&this.current&&!r?1:0,c=s!==this.ga;return this.ga=s,0!==o.length||c?{snapshot:new fc(this.query,e.wa,a,o,e.mutatedKeys,0===s,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ma:u}:{Ma:u}}},{key:"sa",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({wa:this.wa,Da:new lc,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}},{key:"xa",value:function(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}},{key:"Ca",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.fa=t.fa.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.fa=t.fa.delete(e)})),this.current=e.current)}},{key:"Fa",value:function(){var e=this;if(!this.current)return[];var t=this.pa;this.pa=da(),this.wa.forEach((function(t){e.xa(t.key)&&(e.pa=e.pa.add(t.key))}));var n=[];return t.forEach((function(t){e.pa.has(t)||n.push(new xc(t))})),this.pa.forEach((function(e){t.has(e)||n.push(new Ec(e))})),n}},{key:"Oa",value:function(e){this.fa=e.gs,this.pa=da();var t=this.ba(e.documents);return this.applyChanges(t,!0)}},{key:"Na",value:function(){return fc.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,0===this.ga,this.hasCachedResults)}}]),e}(),Tc="SyncEngine",Ic=w((function e(t,n,r){k(this,e),this.query=t,this.targetId=n,this.view=r})),Cc=w((function e(t){k(this,e),this.key=t,this.Ba=!1})),Nc=function(){function e(t,n,r,i,a,o){k(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.La={},this.ka=new na((function(e){return Xi(e)}),Yi),this.qa=new Map,this.Qa=new Set,this.$a=new gr(En.comparator),this.Ua=new Map,this.Ka=new gu,this.Wa={},this.Ga=new Map,this.za=iu.Kn(),this.onlineState="Unknown",this.ja=void 0}return w(e,[{key:"isPrimaryClient",get:function(){return!0===this.ja}}]),e}();function Ac(e,t){return Rc.apply(this,arguments)}function Rc(){return Rc=h(l().mark((function e(t,n){var r,i,a,o,u=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=!(u.length>2&&void 0!==u[2])||u[2],i=fl(t),!(o=i.ka.get(n))){e.next=7;break}i.sharedClientState.addLocalQueryTarget(o.targetId),a=o.view.Na(),e.next=10;break;case 7:return e.next=9,Dc(i,n,r,!0);case 9:a=e.sent;case 10:return e.abrupt("return",a);case 11:case"end":return e.stop()}}),e)}))),Rc.apply(this,arguments)}function Pc(e,t){return Oc.apply(this,arguments)}function Oc(){return(Oc=h(l().mark((function e(t,n){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=fl(t),e.next=3,Dc(r,n,!0,!1);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Dc(e,t,n,r){return Lc.apply(this,arguments)}function Lc(){return(Lc=h(l().mark((function e(t,n,r,i){var a,o,u,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zu(t.localStore,Wi(n));case 2:if(a=e.sent,o=a.targetId,u=t.sharedClientState.addLocalQueryTarget(o,r),e.t0=i,!e.t0){e.next=10;break}return e.next=9,Mc(t,n,o,"current"===u,a.resumeToken);case 9:s=e.sent;case 10:return t.isPrimaryClient&&r&&bs(t.remoteStore,a),e.abrupt("return",s);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mc(e,t,n,r,i){return Uc.apply(this,arguments)}function Uc(){return Uc=h(l().mark((function e(t,n,r,i,a){var o,u,s,c,f,d;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Ha=function(e,n,r){return function(){var e=h(l().mark((function e(t,n,r,i){var a,o,u,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.ba(r),e.t0=a.ls,!e.t0){e.next=6;break}return e.next=5,Hu(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.ba(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=i&&null!=i.targetMismatches.get(n.targetId),s=n.view.applyChanges(a,t.isPrimaryClient,o,u),e.abrupt("return",(rl(t,n.targetId,s.Ma),s.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Hu(t.localStore,n,!0);case 3:return o=e.sent,u=new Sc(n,o.gs),s=u.ba(o.documents),c=so.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),f=u.applyChanges(s,t.isPrimaryClient,c),rl(t,r,f.Ma),d=new Ic(n,r,u),e.abrupt("return",(t.ka.set(n,d),t.qa.has(r)?t.qa.get(r).push(n):t.qa.set(r,[n]),f.snapshot));case 11:case"end":return e.stop()}}),e)}))),Uc.apply(this,arguments)}function Fc(e,t,n){return Vc.apply(this,arguments)}function Vc(){return(Vc=h(l().mark((function e(t,n,r){var i,a,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Gt(t),a=i.ka.get(n),!((o=i.qa.get(a.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(i.qa.set(a.targetId,o.filter((function(e){return!Yi(e,n)}))),void i.ka.delete(n)));case 3:if(!i.isPrimaryClient){e.next=11;break}if(i.sharedClientState.removeLocalQueryTarget(a.targetId),e.t0=i.sharedClientState.isActiveQueryTarget(a.targetId),e.t0){e.next=9;break}return e.next=9,Bu(i.localStore,a.targetId,!1).then((function(){i.sharedClientState.clearQueryState(a.targetId),r&&ws(i.remoteStore,a.targetId),tl(i,a.targetId)})).catch(Pn);case 9:e.next=14;break;case 11:return tl(i,a.targetId),e.next=14,Bu(i.localStore,a.targetId,!0);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jc(e,t){return zc.apply(this,arguments)}function zc(){return(zc=h(l().mark((function e(t,n){var r,i,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=Gt(t),i=r.ka.get(n),a=r.qa.get(i.targetId),r.isPrimaryClient&&1===a.length&&(r.sharedClientState.removeLocalQueryTarget(i.targetId),ws(r.remoteStore,i.targetId));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bc(e,t,n){return qc.apply(this,arguments)}function qc(){return(qc=h(l().mark((function e(t,n,r){var i,a,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=hl(t),e.prev=1,e.next=4,function(e,t){var n,r,i=Gt(e),a=mn.now(),o=t.reduce((function(e,t){return e.add(t.key)}),da());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=ia(),s=da();return i.ds.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=g(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=Fa(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new za(c.key,l,li(l.value.mapValue),Pa.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:ua(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.Wa[e.currentUser.toKey()];r||(r=new gr(cn)),r=r.insert(t,n),e.Wa[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,ol(i,a.changes);case 9:return e.next=11,Vs(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=oc(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])})))).apply(this,arguments)}function Hc(e,t){return Wc.apply(this,arguments)}function Wc(){return(Wc=h(l().mark((function e(t,n){var r,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gt(t),e.prev=1,e.next=4,Fu(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.Ua.get(t);n&&(Kt(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Ba=!0:e.modifiedDocuments.size>0?Kt(n.Ba):e.removedDocuments.size>0&&(Kt(n.Ba),n.Ba=!1))})),e.next=8,ol(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Pn(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function Kc(e,t,n){var r=Gt(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ka.forEach((function(e,n){var r=n.view.sa(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Gt(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=g(n.ta);try{for(a.s();!(i=a.n()).done;){i.value.sa(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&wc(n)}(r.eventManager,t),i.length&&r.La.p_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function Gc(e,t,n){return Qc.apply(this,arguments)}function Qc(){return(Qc=h(l().mark((function e(t,n,r){var i,a,o,u,s,c;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=Gt(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.Ua.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new gr(En.comparator)).insert(o,fi.newNoDocument(o,yn.min())),s=da().add(o),c=new uo(yn.min(),new Map,new gr(cn),u,s),e.next=9,Hc(i,c);case 9:i.$a=i.$a.remove(o),i.Ua.delete(n),al(i),e.next=16;break;case 14:return e.next=16,Bu(i.localStore,n,!1).then((function(){return tl(i,n,r)})).catch(Pn);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yc(e,t){return Xc.apply(this,arguments)}function Xc(){return(Xc=h(l().mark((function e(t,n){var r,i,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gt(t),i=n.batch.batchId,e.prev=1,e.next=4,Mu(r.localStore,n);case 4:return a=e.sent,el(r,i,null),Zc(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,ol(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Pn(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function $c(e,t,n){return Jc.apply(this,arguments)}function Jc(){return(Jc=h(l().mark((function e(t,n,r){var i,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Gt(t),e.prev=1,e.next=4,function(e,t){var n=Gt(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return Kt(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,el(i,n,r),Zc(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,ol(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Pn(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function Zc(e,t){(e.Ga.get(t)||[]).forEach((function(e){e.resolve()})),e.Ga.delete(t)}function el(e,t,n){var r=Gt(e),i=r.Wa[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.Wa[r.currentUser.toKey()]=i}}function tl(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=g(e.qa.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.ka.delete(a),n&&e.La.Ja(a,n)}}catch(o){i.e(o)}finally{i.f()}e.qa.delete(t),e.isPrimaryClient&&e.Ka.br(t).forEach((function(t){e.Ka.containsKey(t)||nl(e,t)}))}function nl(e,t){e.Qa.delete(t.path.canonicalString());var n=e.$a.get(t);null!==n&&(ws(e.remoteStore,n),e.$a=e.$a.remove(t),e.Ua.delete(n),al(e))}function rl(e,t,n){var r,i=g(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof Ec?(e.Ka.addReference(a.key,t),il(e,a)):a instanceof xc?(zt(Tc,"Document no longer in limbo: "+a.key),e.Ka.removeReference(a.key,t),e.Ka.containsKey(a.key)||nl(e,a.key)):Wt()}}catch(o){i.e(o)}finally{i.f()}}function il(e,t){var n=t.key,r=n.path.canonicalString();e.$a.get(n)||e.Qa.has(r)||(zt(Tc,"New document in limbo: "+n),e.Qa.add(r),al(e))}function al(e){for(;e.Qa.size>0&&e.$a.size<e.maxConcurrentLimboResolutions;){var t=e.Qa.values().next().value;e.Qa.delete(t);var n=new En(bn.fromString(t)),r=e.za.next();e.Ua.set(r,new Cc(n)),e.$a=e.$a.insert(n,r),bs(e.remoteStore,new Yo(Wi(zi(n.path)),r,"TargetPurposeLimboResolution",Un.ae))}}function ol(e,t,n){return ul.apply(this,arguments)}function ul(){return ul=h(l().mark((function e(t,n,r){var i,a,o,u;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Gt(t),a=[],o=[],u=[],e.t0=i.ka.isEmpty(),e.t0){e.next=9;break}return i.ka.forEach((function(e,t){u.push(i.Ha(t,n,r).then((function(e){var n;if((e||r)&&i.isPrimaryClient){var u=e?!e.fromCache:null===(n=null==r?void 0:r.targetChanges.get(t.targetId))||void 0===n?void 0:n.current;i.sharedClientState.updateQueryState(t.targetId,u?"current":"not-current")}if(e){a.push(e);var s=Cu.Yi(t.targetId,e);o.push(s)}})))})),e.next=6,Promise.all(u);case 6:return i.La.p_(a),e.next=9,function(){var e=h(l().mark((function e(t,n){var r,i,a,o,u,s,c,f;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gt(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Dn.forEach(n,(function(t){return Dn.forEach(t.Hi,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Dn.forEach(t.Ji,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Mn(e.t0)){e.next=10;break}throw e.t0;case 10:zt(Ru,"Failed to update sequence numbers: "+e.t0);case 11:i=g(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.Ts.get(u),c=s.snapshotVersion,f=s.withLastLimboFreeSnapshotVersion(c),r.Ts=r.Ts.insert(u,f))}catch(l){i.e(l)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),ul.apply(this,arguments)}function sl(e,t){return cl.apply(this,arguments)}function cl(){return(cl=h(l().mark((function e(t,n){var r,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Gt(t)).currentUser.isEqual(n)){e.next=11;break}return zt(Tc,"User change. New user:",n.toKey()),e.next=5,Du(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.Ga.forEach((function(e){e.forEach((function(e){e.reject(new Yt(Qt.CANCELLED,t))}))})),e.Ga.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,ol(r,i.Rs);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ll(e,t){var n=Gt(e),r=n.Ua.get(t);if(r&&r.Ba)return da().add(r.key);var i=da(),a=n.qa.get(t);if(!a)return i;var o,u=g(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.ka.get(s);i=i.unionWith(c.view.Sa)}}catch(l){u.e(l)}finally{u.f()}return i}function fl(e){var t=Gt(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Hc.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=ll.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Gc.bind(null,t),t.La.p_=kc.bind(null,t.eventManager),t.La.Ja=bc.bind(null,t.eventManager),t}function hl(e){var t=Gt(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Yc.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=$c.bind(null,t),t}var dl=function(){function e(){k(this,e),this.kind="memory",this.synchronizeTabs=!1}return w(e,[{key:"initialize",value:function(){var e=h(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.serializer=os(t.databaseInfo.databaseId),this.sharedClientState=this.Za(t),this.persistence=this.Xa(t),e.next=5,this.persistence.start();case 5:this.localStore=this.eu(t),this.gcScheduler=this.tu(t,this.localStore),this.indexBackfillerScheduler=this.nu(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"tu",value:function(e,t){return null}},{key:"nu",value:function(e,t){return null}},{key:"eu",value:function(e){return Ou(this.persistence,new Au,e.initialUser,this.serializer)}},{key:"Xa",value:function(e){return new xu(Tu.ri,this.serializer)}},{key:"Za",value:function(e){return new Gu}},{key:"terminate",value:function(){var e=h(l().mark((function e(){var t,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(t=this.gcScheduler)||void 0===t||t.stop(),null===(n=this.indexBackfillerScheduler)||void 0===n||n.stop(),this.sharedClientState.shutdown(),e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();dl.provider={build:function(){return new dl}};var pl=function(e){x(n,e);var t=C(n);function n(e){var r;return k(this,n),(r=t.call(this)).cacheSizeBytes=e,r}return w(n,[{key:"tu",value:function(e,t){Kt(this.persistence.referenceDelegate instanceof Iu);var n=this.persistence.referenceDelegate.garbageCollector;return new cu(n,e.asyncQueue,t)}},{key:"Xa",value:function(e){var t=void 0!==this.cacheSizeBytes?ru.withCacheSize(this.cacheSizeBytes):ru.DEFAULT;return new xu((function(e){return Iu.ri(e,t)}),this.serializer)}}]),n}(dl),vl=function(){function e(){k(this,e)}return w(e,[{key:"initialize",value:function(){var e=h(l().mark((function e(t,n){var r=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return Kc(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=sl.bind(null,this.syncEngine),e.next=12,tc(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new dc}},{key:"createDatastore",value:function(e){var t=os(e.databaseInfo.databaseId),n=function(e){return new is(e)}(e.databaseInfo);return function(e,t,n,r){return new hs(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}},{key:"createRemoteStore",value:function(e){var t=this;return function(e,t,n,r,i){return new vs(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(function(e){return Kc(t.syncEngine,e,0)}),Xu.D()?new Xu:new Qu)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new Nc(e,t,n,r,i,a);return o&&(u.ja=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){var e=h(l().mark((function e(){var t,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,function(){var e=h(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Gt(t),zt(ps,"RemoteStore shutting down."),n.W_.add(5),e.next=5,gs(n);case 5:n.z_.shutdown(),n.j_.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore);case 2:null===(t=this.datastore)||void 0===t||t.terminate(),null===(n=this.eventManager)||void 0===n||n.terminate();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();vl.provider={build:function(){return new vl}};var ml=function(){function e(t){k(this,e),this.observer=t,this.muted=!1}return w(e,[{key:"next",value:function(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}},{key:"error",value:function(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Bt("Uncaught Error in snapshot listener:",e.toString()))}},{key:"su",value:function(){this.muted=!0}},{key:"iu",value:function(e,t){var n=this;setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),yl="FirestoreClient",gl=function(){function e(t,n,r,i,a){var o=this;k(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ut.UNAUTHENTICATED,this.clientId=sn.newId(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this._uninitializedComponentsProvider=a,this.authCredentials.start(r,function(){var e=h(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return zt(yl,"Received user=",t.uid),e.next=3,o.authCredentialListener(t);case 3:o.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return zt(yl,"Received new app check token=",e),o.appCheckCredentialListener(e,o.user)}))}return w(e,[{key:"configuration",get:function(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Xt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(h(l().mark((function n(){var r;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e._onlineComponents,!n.t0){n.next=5;break}return n.next=5,e._onlineComponents.terminate();case 5:if(n.t1=e._offlineComponents,!n.t1){n.next=9;break}return n.next=9,e._offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=oc(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function kl(e,t){return bl.apply(this,arguments)}function bl(){return bl=h(l().mark((function e(t,n){var r,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),zt(yl,"Initializing OfflineComponentProvider"),r=t.configuration,e.next=4,n.initialize(r);case 4:i=r.initialUser,t.setCredentialChangeListener(function(){var e=h(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Du(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t._offlineComponents=n;case 6:case"end":return e.stop()}}),e)}))),bl.apply(this,arguments)}function wl(e,t){return _l.apply(this,arguments)}function _l(){return(_l=h(l().mark((function e(t,n){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,El(t);case 3:return r=e.sent,zt(yl,"Initializing OnlineComponentProvider"),e.next=7,n.initialize(r,t.configuration);case 7:t.setCredentialChangeListener((function(e){return Zs(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return Zs(n.remoteStore,t)})),t._onlineComponents=n;case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function El(e){return xl.apply(this,arguments)}function xl(){return(xl=h(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._offlineComponents){e.next=21;break}if(!t._uninitializedComponentsProvider){e.next=18;break}return zt(yl,"Using user provided OfflineComponentProvider"),e.prev=3,e.next=6,kl(t,t._uninitializedComponentsProvider._offline);case 6:e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(3),function(e){return"FirebaseError"===e.name?e.code===Qt.FAILED_PRECONDITION||e.code===Qt.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n=e.t0)){e.next=13;break}throw n;case 13:return qt("Error using user provided cache. Falling back to memory cache: "+n),e.next=16,kl(t,new dl);case 16:e.next=21;break;case 18:return zt(yl,"Using default OfflineComponentProvider"),e.next=21,kl(t,new pl(void 0));case 21:return e.abrupt("return",t._offlineComponents);case 22:case"end":return e.stop()}}),e,null,[[3,8]])})))).apply(this,arguments)}function Sl(e){return Tl.apply(this,arguments)}function Tl(){return(Tl=h(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t._onlineComponents,e.t0){e.next=11;break}if(!t._uninitializedComponentsProvider){e.next=8;break}return zt(yl,"Using user provided OnlineComponentProvider"),e.next=6,wl(t,t._uninitializedComponentsProvider._online);case 6:e.next=11;break;case 8:return zt(yl,"Using default OnlineComponentProvider"),e.next=11,wl(t,new vl);case 11:return e.abrupt("return",t._onlineComponents);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Il(e){return Sl(e).then((function(e){return e.syncEngine}))}function Cl(e){return Nl.apply(this,arguments)}function Nl(){return(Nl=h(l().mark((function e(t){var n,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sl(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=Ac.bind(null,n.syncEngine),r.onUnlisten=Fc.bind(null,n.syncEngine),r.onFirstRemoteStoreListen=Pc.bind(null,n.syncEngine),r.onLastRemoteStoreUnlisten=jc.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Al(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Xt;return e.asyncQueue.enqueueAndForget(h(l().mark((function i(){return l().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new ml({next:function(n){a.su(),t.enqueueAndForget((function(){return yc(e,o)})),n.fromCache&&"server"===r.source?i.reject(new Yt(Qt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new _c(n,a,{includeMetadataChanges:!0,Ta:!0});return vc(e,o)},i.next=3,Cl(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function Rl(e){var t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}var Pl=new Map;function Ol(e,t,n){if(!n)throw new Yt(Qt.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Dl(e){if(!En.isDocumentKey(e))throw new Yt(Qt.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Ll(e){if(En.isDocumentKey(e))throw new Yt(Qt.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Ml(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":Wt()}function Ul(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Yt(Qt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Ml(e);throw new Yt(Qt.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}var Fl="firestore.googleapis.com",Vl=function(){function e(t){var n,r;if(k(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Yt(Qt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Fl,this.ssl=true}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=nu;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<ou)throw new Yt(Qt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Yt(Qt.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Rl(null!==(r=t.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Yt(Qt.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Yt(Qt.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Yt(Qt.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}return w(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),jl=function(){function e(t,n,r,i){k(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Vl({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}return w(e,[{key:"app",get:function(){if(!this._app)throw new Yt(Qt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return"notTerminated"!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Yt(Qt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Vl(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Jt;switch(e.type){case"firstParty":return new nn(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Yt(Qt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_getEmulatorOptions",value:function(){return this._emulatorOptions}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}},{key:"_restart",value:function(){var e=h(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("notTerminated"!==this._terminateTask){e.next=5;break}return e.next=3,this._terminate();case 3:e.next=6;break;case 5:this._terminateTask="notTerminated";case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=Pl.get(e);t&&(zt("ComponentProvider","Removing Datastore"),Pl.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function zl(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=Ul(e,jl))._getSettings(),o=Object.assign(Object.assign({},a),{emulatorOptions:e._getEmulatorOptions()}),u="".concat(t,":").concat(n);a.host!==Fl&&a.host!==u&&qt("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");var s=Object.assign(Object.assign({},a),{host:u,ssl:!1,emulatorOptions:i});if(!Z(s,o)&&(e._setSettings(s),i.mockUserToken)){var c,l;if("string"==typeof i.mockUserToken)c=i.mockUserToken,l=Ut.MOCK_USER;else{c=q(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var f=i.mockUserToken.sub||i.mockUserToken.user_id;if(!f)throw new Yt(Qt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Ut(f)}e._authCredentials=new Zt(new $t(c,l))}}var Bl=function(){function e(t,n,r){k(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return w(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),ql=function(){function e(t,n,r){k(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return w(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new Hl(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),Hl=function(e){x(n,e);var t=C(n);function n(e,r,i){var a;return k(this,n),(a=t.call(this,e,r,zi(i)))._path=i,a.type="collection",a}return w(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new ql(this.firestore,null,new En(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(Bl);function Wl(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=oe(e),Ol("collection","path",t),e instanceof jl){var a=bn.fromString.apply(bn,[t].concat(r));return Ll(a),new Hl(e,null,a)}if(!(e instanceof ql||e instanceof Hl))throw new Yt(Qt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(bn.fromString.apply(bn,[t].concat(r)));return Ll(o),new Hl(e.firestore,null,o)}var Kl="AsyncQueue",Gl=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();k(this,e),this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new us(this,"async_queue_retry"),this.Su=function(){var e=as();e&&zt(Kl,"Visibility state changed to "+e.visibilityState),t.a_.t_()},this.bu=n;var r=as();r&&"function"==typeof r.addEventListener&&r.addEventListener("visibilitychange",this.Su)}return w(e,[{key:"isShuttingDown",get:function(){return this.mu}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Du(),this.vu(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.mu){this.mu=!0,this.yu=e||!1;var t=as();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Su)}}},{key:"enqueue",value:function(e){var t=this;if(this.Du(),this.mu)return new Promise((function(){}));var n=new Xt;return this.vu((function(){return t.mu&&t.yu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Vu.push(e),t.Cu()}))}},{key:"Cu",value:function(){var e=h(l().mark((function e(){var t=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Vu.length){e.next=14;break}return e.prev=1,e.next=4,this.Vu[0]();case 4:this.Vu.shift(),this.a_.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Mn(e.t0)){e.next=12;break}throw e.t0;case 12:zt(Kl,"Operation failed with retryable error: "+e.t0);case 13:this.Vu.length>0&&this.a_.Xo((function(){return t.Cu()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"vu",value:function(e){var t=this,n=this.bu.then((function(){return t.pu=!0,e().catch((function(e){t.gu=e,t.pu=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Bt("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.pu=!1,e}))}));return this.bu=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Du(),this.wu.indexOf(e)>-1&&(t=0);var i=ac.createAndSchedule(this,e,t,n,(function(e){return r.Fu(e)}));return this.fu.push(i),i}},{key:"Du",value:function(){this.gu&&Wt()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Mu",value:function(){var e=h(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.bu,e.next=3,t;case 3:if(t!==this.bu){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"xu",value:function(e){var t,n=g(this.fu);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Ou",value:function(e){var t=this;return this.Mu().then((function(){t.fu.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=g(t.fu);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Mu()}))}},{key:"Nu",value:function(e){this.wu.push(e)}},{key:"Fu",value:function(e){var t=this.fu.indexOf(e);this.fu.splice(t,1)}}]),e}();function Ql(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=g(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var Yl=function(e){x(n,e);var t=C(n);function n(e,r,i,a){var o;return k(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new Gl,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return w(n,[{key:"_terminate",value:function(){var e=h(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._firestoreClient){e.next=6;break}return t=this._firestoreClient.terminate(),this._queue=new Gl(t),this._firestoreClient=void 0,e.next=6,t;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(jl);function Xl(e){if(e._terminated)throw new Yt(Qt.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||$l(e),e._firestoreClient}function $l(e){var t,n,r,i=e._freezeSettings(),a=function(e,t,n,r){return new Ur(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Rl(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new gl(e._authCredentials,e._appCheckCredentials,e._queue,a,e._componentsProvider&&function(e){var t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}var Jl=function(){function e(t){k(this,e),this._byteString=t}return w(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Sr.fromBase64String(t))}catch(t){throw new Yt(Qt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Sr.fromUint8Array(t))}}]),e}(),Zl=function(){function e(){k(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new Yt(Qt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _n(n)}return w(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var ef=w((function e(t){k(this,e),this._methodName=t})),tf=function(){function e(t,n){if(k(this,e),!isFinite(t)||t<-90||t>90)throw new Yt(Qt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Yt(Qt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return w(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return cn(this._lat,e._lat)||cn(this._long,e._long)}}]),e}(),nf=function(){function e(t){k(this,e),this._values=(t||[]).map((function(e){return e}))}return w(e,[{key:"toArray",value:function(){return this._values.map((function(e){return e}))}},{key:"isEqual",value:function(e){return function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}]),e}(),rf=/^__.*__$/,af=function(){function e(t,n,r){k(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return w(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new za(e,this.data,this.fieldMask,t,this.fieldTransforms):new ja(e,this.data,t,this.fieldTransforms)}}]),e}();function of(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Wt()}}var uf=function(){function e(t,n,r,i,a,o){k(this,e),this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Bu(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return w(e,[{key:"path",get:function(){return this.settings.path}},{key:"Lu",get:function(){return this.settings.Lu}},{key:"ku",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"qu",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ku({path:n,Qu:!1});return r.$u(e),r}},{key:"Uu",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ku({path:n,Qu:!1});return r.Bu(),r}},{key:"Ku",value:function(e){return this.ku({path:void 0,Qu:!0})}},{key:"Wu",value:function(e){return kf(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Bu",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.$u(this.path.get(e))}},{key:"$u",value:function(e){if(0===e.length)throw this.Wu("Document fields must not be empty");if(of(this.Lu)&&rf.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}]),e}(),sf=function(){function e(t,n,r){k(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||os(t)}return w(e,[{key:"ju",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new uf({Lu:e,methodName:t,zu:n,path:_n.emptyPath(),Qu:!1,Gu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}]),e}();function cf(e){var t=e._freezeSettings(),n=os(e._databaseId);return new sf(e._databaseId,!!t.ignoreUndefinedProperties,n)}function lf(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.ju(a.merge||a.mergeFields?2:0,t,n,i);vf("Data must be an object, but it was:",o,r);var u,s,c=df(r,o);if(a.merge)u=new Er(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=g(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=l.value,p=mf(t,d,n);if(!o.contains(p))throw new Yt(Qt.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));bf(f,p)||f.push(p)}}catch(v){h.e(v)}finally{h.f()}u=new Er(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new af(new ci(c),u,s)}function ff(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return hf(n,e.ju(r?4:3,t))}function hf(e,t){if(pf(e=oe(e)))return vf("Unsupported field value:",t,e),df(e,t);if(e instanceof ef)return function(e,t){if(!of(t.Lu))throw t.Wu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Wu("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Qu&&4!==t.Lu)throw t.Wu("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=g(e);try{for(a.s();!(n=a.n()).done;){var o=hf(n.value,t.Ku(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=oe(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return ga(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=mn.fromDate(e);return{timestampValue:_o(t.serializer,n)}}if(e instanceof mn){var i=new mn(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:_o(t.serializer,i)}}if(e instanceof tf)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Jl)return{bytesValue:Eo(t.serializer,e._byteString)};if(e instanceof ql){var a=t.databaseId,o=e.firestore._databaseId;if(!o.isEqual(a))throw t.Wu("Document reference is for database ".concat(o.projectId,"/").concat(o.database," but should be for database ").concat(a.projectId,"/").concat(a.database));return{referenceValue:To(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof nf)return function(e,t){var n;return{mapValue:{fields:(n={},r(n,jr,{stringValue:qr}),r(n,Hr,{arrayValue:{values:e.toArray().map((function(e){if("number"!=typeof e)throw t.Wu("VectorValues must only contain numeric values.");return ma(t.serializer,e)}))}}),n)}}}(e,t);throw t.Wu("Unsupported field value: ".concat(Ml(e)))}(e,t)}function df(e,t){var n={};return yr(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):mr(e,(function(e,r){var i=hf(r,t.qu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function pf(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof mn||e instanceof tf||e instanceof Jl||e instanceof ql||e instanceof ef||e instanceof nf)}function vf(e,t,n){if(!pf(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=Ml(n);throw"an object"===r?t.Wu(e+" a custom object"):t.Wu(e+" "+r)}}function mf(e,t,n){if((t=oe(t))instanceof Zl)return t._internalPath;if("string"==typeof t)return gf(e,t);throw kf("Field path arguments must be of type string or ",e,!1,void 0,n)}var yf=new RegExp("[~\\*/\\[\\]]");function gf(e,t,n){if(t.search(yf)>=0)throw kf("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return N(Zl,d(t.split(".")))._internalPath}catch(r){throw kf("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function kf(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new Yt(Qt.INVALID_ARGUMENT,u+e+s)}function bf(e,t){return e.some((function(e){return e.isEqual(t)}))}var wf=function(){function e(t,n,r,i,a){k(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return w(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new ql(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new _f(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(Ef("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),_f=function(e){x(n,e);var t=C(n);function n(){return k(this,n),t.apply(this,arguments)}return w(n,[{key:"data",value:function(){return kt(S(n.prototype),"data",this).call(this)}}]),n}(wf);function Ef(e,t){return"string"==typeof t?gf(e,t):t instanceof Zl?t._internalPath:t._delegate._internalPath}function xf(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Yt(Qt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Sf=w((function e(){k(this,e)})),Tf=function(e){x(n,e);var t=C(n);function n(){return k(this,n),t.apply(this,arguments)}return w(n)}(Sf);function If(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof Sf&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof Af})).length,n=e.filter((function(e){return e instanceof Cf})).length;if(t>1||t>0&&n>0)throw new Yt(Qt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,u=g(n);try{for(u.s();!(o=u.n()).done;){var s=o.value;e=s._apply(e)}}catch(c){u.e(c)}finally{u.f()}return e}var Cf=function(e){x(n,e);var t=C(n);function n(e,r,i){var a;return k(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return w(n,[{key:"_apply",value:function(e){var t=this._parse(e);return Df(e._query,t),new Bl(e.firestore,e.converter,Gi(e._query,t))}},{key:"_parse",value:function(e){var t=cf(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Yt(Qt.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){Of(o,a);var s,c=[],l=g(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(Pf(r,e,f))}}catch(h){l.e(h)}finally{l.f()}u={arrayValue:{values:c}}}else u=Pf(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||Of(o,a),u=ff(n,t,o,"in"===a||"not-in"===a);return gi.create(i,a,u)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(Tf);function Nf(e,t,n){var r=t,i=Ef("where",e);return Cf._create(i,r,n)}var Af=function(e){x(n,e);var t=C(n);function n(e,r){var i;return k(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return w(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:ki.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=g(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;Df(r,a),r=Gi(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new Bl(e.firestore,e.converter,Gi(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Sf);var Rf=function(e){x(n,e);var t=C(n);function n(e,r){var i;return k(this,n),(i=t.call(this))._field=e,i._direction=r,i.type="orderBy",i}return w(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new Yt(Qt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Yt(Qt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new vi(t,n)}(e._query,this._field,this._direction);return new Bl(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new Vi(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Tf);function Pf(e,t,n){if("string"==typeof(n=oe(n))){if(""===n)throw new Yt(Qt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!qi(t)&&-1!==n.indexOf("/"))throw new Yt(Qt.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(bn.fromString(n));if(!En.isDocumentKey(r))throw new Yt(Qt.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return ei(e,new En(r))}if(n instanceof ql)return ei(e,n._key);throw new Yt(Qt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Ml(n),"."))}function Of(e,t){if(!Array.isArray(e)||0===e.length)throw new Yt(Qt.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Df(e,t){var n=function(e,t){var n,r=g(e);try{for(r.s();!(n=r.n()).done;){var i,a=g(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(u){a.e(u)}finally{a.f()}}}catch(u){r.e(u)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Yt(Qt.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Yt(Qt.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}function Lf(e,t){if(!(t instanceof Cf||t instanceof Af))throw new Yt(Qt.INVALID_ARGUMENT,"Function ".concat(e,"() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'."))}var Mf=function(){function e(){k(this,e)}return w(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Wr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Cr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Nr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Wt()}}},{key:"convertObject",value:function(e,t){return this.convertObjectMap(e.fields,t)}},{key:"convertObjectMap",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",r={};return mr(e,(function(e,i){r[e]=t.convertValue(i,n)})),r}},{key:"convertVectorValue",value:function(e){var t,n,r,i=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t[Hr].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map((function(e){return Cr(e.doubleValue)}));return new nf(i)}},{key:"convertGeoPoint",value:function(e){return new tf(Cr(e.latitude),Cr(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Lr(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Mr(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Ir(e);return new mn(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=bn.fromString(e);Kt(Qo(n));var r=new Vr(n.get(1),n.get(3)),i=new En(n.popFirst(5));return r.isEqual(t)||Bt("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function Uf(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var Ff=function(){function e(t,n){k(this,e),this.hasPendingWrites=t,this.fromCache=n}return w(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),Vf=function(e){x(n,e);var t=C(n);function n(e,r,i,a,o,u){var s;return k(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return w(n,[{key:"exists",value:function(){return kt(S(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new jf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(Ef("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(wf),jf=function(e){x(n,e);var t=C(n);function n(){return k(this,n),t.apply(this,arguments)}return w(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return kt(S(n.prototype),"data",this).call(this,e)}}]),n}(Vf),zf=function(){function e(t,n,r,i){k(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ff(i.hasPendingWrites,i.fromCache),this.query=r}return w(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new jf(n._firestore,n._userDataWriter,r.key,r,new Ff(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Yt(Qt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new jf(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Ff(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new jf(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Ff(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:Bf(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function Bf(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Wt()}}var qf=function(e){x(n,e);var t=C(n);function n(e){var r;return k(this,n),(r=t.call(this)).firestore=e,r}return w(n,[{key:"convertBytes",value:function(e){return new Jl(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new ql(this.firestore,null,t)}}]),n}(Mf);function Hf(e){e=Ul(e,Bl);var t=Ul(e.firestore,Yl),n=Xl(t),r=new qf(t);return xf(e._query),Al(n,e._query).then((function(n){return new zf(t,r,e,n)}))}function Wf(e,t){var n=Ul(e.firestore,Yl),r=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=oe(e),1===arguments.length&&(t=sn.newId()),Ol("doc","path",t),e instanceof jl){var a=bn.fromString.apply(bn,[t].concat(r));return Dl(a),new ql(e,null,new En(a))}if(!(e instanceof ql||e instanceof Hl))throw new Yt(Qt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(bn.fromString.apply(bn,[t].concat(r)));return Dl(o),new ql(e.firestore,e instanceof Hl?e.converter:null,new En(o))}(e),i=Uf(e.converter,t);return Kf(n,[lf(cf(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Pa.exists(!1))]).then((function(){return r}))}function Kf(e,t){return function(e,t){var n=new Xt;return e.asyncQueue.enqueueAndForget(h(l().mark((function r(){return l().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=Bc,r.next=3,Il(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(Xl(e),t)}function Gf(e,t,n){var r=n.docs.get(t._key),i=new qf(e);return new Vf(e,i,t._key,r,new Ff(n.hasPendingWrites,n.fromCache),t.converter)}new WeakMap;!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Ft=e}(Ze),Ge(new ue("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new Yl(new en(e.getProvider("auth-internal")),new an(a,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Yt(Qt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vr(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),nt(Lt,Mt,e),nt(Lt,Mt,"esm2017")}();function Qf(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r]));return n}function Yf(e){if(null==e)return null;if(e instanceof Number&&(e=e.valueOf()),"number"===typeof e&&isFinite(e))return e;if(!0===e||!1===e)return e;if("[object String]"===Object.prototype.toString.call(e))return e;if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map((function(e){return Yf(e)}));if("function"===typeof e||"object"===typeof e)return Qf(e,(function(e){return Yf(e)}));throw new Error("Data cannot be encoded in JSON: "+e)}function Xf(e){if(null==e)return e;if(e["@type"])switch(e["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var t=Number(e.value);if(isNaN(t))throw new Error("Data cannot be decoded from JSON: "+e);return t;default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map((function(e){return Xf(e)})):"function"===typeof e||"object"===typeof e?Qf(e,(function(e){return Xf(e)})):e}var $f="functions",Jf={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Zf=function(e){x(n,e);var t=C(n);function n(e,r,i){var a;return k(this,n),(a=t.call(this,"".concat($f,"/").concat(e),r||"")).details=i,Object.setPrototypeOf(_(a),n.prototype),a}return w(n)}(Q);function eh(e,t){var n=function(e){if(e>=200&&e<300)return"ok";switch(e){case 0:case 500:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(e),r=n,i=void 0;try{var a=t&&t.error;if(a){var o=a.status;if("string"===typeof o){if(!Jf[o])return new Zf("internal","internal");n=Jf[o],r=o}var u=a.message;"string"===typeof u&&(r=u),void 0!==(i=a.details)&&(i=Xf(i))}}catch(s){}return"ok"===n?null:new Zf(n,r,i)}var th=function(){function e(t,n,r,i){var a=this;k(this,e),this.app=t,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Ye(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then((function(e){return a.auth=e}),(function(){})),this.messaging||r.get().then((function(e){return a.messaging=e}),(function(){})),this.appCheck||null===i||void 0===i||i.get().then((function(e){return a.appCheck=e}),(function(){}))}return w(e,[{key:"getAuthToken",value:function(){var e=h(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth){e.next=2;break}return e.abrupt("return",void 0);case 2:return e.prev=2,e.next=5,this.auth.getToken();case 5:return t=e.sent,e.abrupt("return",null===t||void 0===t?void 0:t.accessToken);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",void 0);case 12:case"end":return e.stop()}}),e,this,[[2,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"getMessagingToken",value:function(){var e=h(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.messaging&&"Notification"in self&&"granted"===Notification.permission){e.next=2;break}return e.abrupt("return",void 0);case 2:return e.prev=2,e.next=5,this.messaging.getToken();case 5:return e.abrupt("return",e.sent);case 8:return e.prev=8,e.t0=e.catch(2),e.abrupt("return",void 0);case 11:case"end":return e.stop()}}),e,this,[[2,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"getAppCheckToken",value:function(){var e=h(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.serverAppAppCheckToken){e.next=2;break}return e.abrupt("return",this.serverAppAppCheckToken);case 2:if(!this.appCheck){e.next=16;break}if(!t){e.next=9;break}return e.next=6,this.appCheck.getLimitedUseToken();case 6:e.t0=e.sent,e.next=12;break;case 9:return e.next=11,this.appCheck.getToken();case 11:e.t0=e.sent;case 12:if(!(n=e.t0).error){e.next=15;break}return e.abrupt("return",null);case 15:return e.abrupt("return",n.token);case 16:return e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getContext",value:function(){var e=h(l().mark((function e(t){var n,r,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAuthToken();case 2:return n=e.sent,e.next=5,this.getMessagingToken();case 5:return r=e.sent,e.next=8,this.getAppCheckToken(t);case 8:return i=e.sent,e.abrupt("return",{authToken:n,messagingToken:r,appCheckToken:i});case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),nh="us-central1",rh=/^data: (.*?)(?:\n|$)/;function ih(e){var t=null;return{promise:new Promise((function(n,r){t=setTimeout((function(){r(new Zf("deadline-exceeded","deadline-exceeded"))}),e)})),cancel:function(){t&&clearTimeout(t)}}}var ah=function(){function e(t,n,r,i){var a=this,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:nh,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:function(){return fetch.apply(void 0,arguments)};k(this,e),this.app=t,this.fetchImpl=u,this.emulatorOrigin=null,this.contextProvider=new th(t,n,r,i),this.cancelAllRequests=new Promise((function(e){a.deleteService=function(){return Promise.resolve(e())}}));try{var s=new URL(o);this.customDomain=s.origin+("/"===s.pathname?"":s.pathname),this.region=nh}catch(c){this.customDomain=null,this.region=o}}return w(e,[{key:"_delete",value:function(){return this.deleteService()}},{key:"_url",value:function(e){var t=this.app.options.projectId;if(null!==this.emulatorOrigin){var n=this.emulatorOrigin;return"".concat(n,"/").concat(t,"/").concat(this.region,"/").concat(e)}return null!==this.customDomain?"".concat(this.customDomain,"/").concat(e):"https://".concat(this.region,"-").concat(t,".cloudfunctions.net/").concat(e)}}]),e}();function oh(e,t,n){var r=function(r){return function(e,t,n,r){var i=e._url(t);return fh(e,i,n,r)}(e,t,r,n||{})};return r.stream=function(n,r){return function(e,t,n,r){var i=e._url(t);return dh(e,i,n,r||{})}(e,t,n,r)},r}function uh(e,t,n,r){return sh.apply(this,arguments)}function sh(){return(sh=h(l().mark((function e(t,n,r,i){var a,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r["Content-Type"]="application/json",e.prev=1,e.next=4,i(t,{method:"POST",body:JSON.stringify(n),headers:r});case 4:a=e.sent,e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",{status:0,json:null});case 10:return o=null,e.prev=11,e.next=14,a.json();case 14:o=e.sent,e.next=19;break;case 17:e.prev=17,e.t1=e.catch(11);case 19:return e.abrupt("return",{status:a.status,json:o});case 20:case"end":return e.stop()}}),e,null,[[1,7],[11,17]])})))).apply(this,arguments)}function ch(e,t){return lh.apply(this,arguments)}function lh(){return(lh=h(l().mark((function e(t,n){var r,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.next=3,t.contextProvider.getContext(n.limitedUseAppCheckTokens);case 3:return(i=e.sent).authToken&&(r.Authorization="Bearer "+i.authToken),i.messagingToken&&(r["Firebase-Instance-ID-Token"]=i.messagingToken),null!==i.appCheckToken&&(r["X-Firebase-AppCheck"]=i.appCheckToken),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fh(e,t,n,r){return hh.apply(this,arguments)}function hh(){return(hh=h(l().mark((function e(t,n,r,i){var a,o,u,s,c,f,h,d;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Yf(r),a={data:r},e.next=4,ch(t,i);case 4:return o=e.sent,u=i.timeout||7e4,s=ih(u),e.next=9,Promise.race([uh(n,a,o,t.fetchImpl),s.promise,t.cancelAllRequests]);case 9:if(c=e.sent,s.cancel(),c){e.next=13;break}throw new Zf("cancelled","Firebase Functions instance was deleted.");case 13:if(!(f=eh(c.status,c.json))){e.next=16;break}throw f;case 16:if(c.json){e.next=18;break}throw new Zf("internal","Response is not valid JSON object.");case 18:if("undefined"===typeof(h=c.json.data)&&(h=c.json.result),"undefined"!==typeof h){e.next=22;break}throw new Zf("internal","Response is missing data field.");case 22:return d=Xf(h),e.abrupt("return",{data:d});case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dh(e,t,n,r){return ph.apply(this,arguments)}function ph(){return(ph=h(l().mark((function e(t,n,i,a){var o,u,s,c,f,d,p,v,m,y,g;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Yf(i),u={data:i},e.next=4,ch(t,a);case 4:return(s=e.sent)["Content-Type"]="application/json",s.Accept="text/event-stream",e.prev=7,e.next=10,t.fetchImpl(n,{method:"POST",body:JSON.stringify(u),headers:s,signal:null===a||void 0===a?void 0:a.signal});case 10:c=e.sent,e.next=20;break;case 13:if(e.prev=13,e.t0=e.catch(7),!(e.t0 instanceof Error&&"AbortError"===e.t0.name)){e.next=18;break}return f=new Zf("cancelled","Request was cancelled."),e.abrupt("return",{data:Promise.reject(f),stream:r({},Symbol.asyncIterator,(function(){return{next:function(){return Promise.reject(f)}}}))});case 18:return d=eh(0,null),e.abrupt("return",{data:Promise.reject(d),stream:r({},Symbol.asyncIterator,(function(){return{next:function(){return Promise.reject(d)}}}))});case 20:return m=new Promise((function(e,t){p=e,v=t})),null===(o=null===a||void 0===a?void 0:a.signal)||void 0===o||o.addEventListener("abort",(function(){var e=new Zf("cancelled","Request was cancelled.");v(e)})),y=c.body.getReader(),g=vh(y,p,v,null===a||void 0===a?void 0:a.signal),e.abrupt("return",{stream:r({},Symbol.asyncIterator,(function(){var e=g.getReader();return{next:function(){return h(l().mark((function t(){var n,r,i;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.read();case 2:return n=t.sent,r=n.value,i=n.done,t.abrupt("return",{value:r,done:i});case 6:case"end":return t.stop()}}),t)})))()},return:function(){return h(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.cancel();case 2:return t.abrupt("return",{done:!0,value:void 0});case 3:case"end":return t.stop()}}),t)})))()}}})),data:m});case 25:case"end":return e.stop()}}),e,null,[[7,13]])})))).apply(this,arguments)}function vh(e,t,n,r){var i=function(e,r){var i=e.match(rh);if(i){var a=i[1];try{var o=JSON.parse(a);if("result"in o)return void t(Xf(o.result));if("message"in o)return void r.enqueue(Xf(o.message));if("error"in o){var u=eh(0,o);return r.error(u),void n(u)}}catch(u){if(u instanceof Zf)return r.error(u),void n(u)}}},a=new TextDecoder;return new ReadableStream({start:function(t){var o="";return u();function u(){return s.apply(this,arguments)}function s(){return(s=h(l().mark((function s(){var c,f,h,d,p,v,m,y,k;return l().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(!(null===r||void 0===r?void 0:r.aborted)){s.next=5;break}return c=new Zf("cancelled","Request was cancelled"),t.error(c),n(c),s.abrupt("return",Promise.resolve());case 5:return s.prev=5,s.next=8,e.read();case 8:if(f=s.sent,h=f.value,!f.done){s.next=15;break}return o.trim()&&i(o.trim(),t),t.close(),s.abrupt("return");case 15:if(!(null===r||void 0===r?void 0:r.aborted)){s.next=22;break}return d=new Zf("cancelled","Request was cancelled"),t.error(d),n(d),s.next=21,e.cancel();case 21:return s.abrupt("return");case 22:o+=a.decode(h,{stream:!0}),p=o.split("\n"),o=p.pop()||"",v=g(p);try{for(v.s();!(m=v.n()).done;)(y=m.value).trim()&&i(y.trim(),t)}catch(l){v.e(l)}finally{v.f()}return s.abrupt("return",u());case 30:s.prev=30,s.t0=s.catch(5),k=s.t0 instanceof Zf?s.t0:eh(0,null),t.error(k),n(k);case 35:case"end":return s.stop()}}),s,null,[[5,30]])})))).apply(this,arguments)}},cancel:function(){return e.cancel()}})}var mh="@firebase/functions",yh="0.12.3";function gh(e,t,n){!function(e,t,n){e.emulatorOrigin="http://".concat(t,":").concat(n)}(oe(e),t,n)}function kh(e,t,n){return oh(oe(e),t,n)}!function(e){Ge(new ue($f,(function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("messaging-internal"),o=e.getProvider("app-check-internal");return new ah(r,i,a,o,n)}),"PUBLIC").setMultipleInstances(!0)),nt(mh,yh,e),nt(mh,yh,"esm2017")}();var bh=et({apiKey:"AIzaSyAGX2CuhT2haXbGAokCVc_QX_KVTbjZpHY",authDomain:"wordfight-64703.firebaseapp.com",databaseURL:"https://wordfight-64703-default-rtdb.firebaseio.com",projectId:"wordfight-64703",storageBucket:"wordfight-64703.appspot.com",messagingSenderId:"259828392912",appId:"1:259828392912:web:f242a30e4ecca0bf2f4fd5",measurementId:"G-S61Q9GG733"}),wh=function(e,t){var n="object"==typeof e?e:tt(),r="string"==typeof e?e:t||Fr,i=Qe(n,"firestore").getImmediate({identifier:r});if(!i._initialized){var a=V("firestore");a&&zl.apply(void 0,[i].concat(d(a)))}return i}(bh),_h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:nh,n=Qe(oe(e),$f),r=n.getImmediate({identifier:t}),i=V("functions");return i&&gh.apply(void 0,[r].concat(d(i))),r}(bh),Eh=kh(_h,"create_game"),xh=kh(_h,"submit_word"),Sh="#5ba3f0",Th="#db4d4d";var Ih=function(t){var n=t.style,r=t.user,i=t.game,a=t.setGameId,o=t.gameId,u=t.setScreen,c=t.setGame,f=s((0,e.useState)([]),2),d=f[0],v=f[1],g=s((0,e.useState)(i.blocks),2),k=g[0],b=g[1],w=i.scores[0]>=10||i.scores[1]>=10,_=i.scores[0]>i.scores[1]?i.players[0]:i.players[1],E=w?_===r?"You Win":"You Lose":i.turn===r?"Click on Letters to Form a Word":"Waiting for your opponent...",x=function(){var e=h(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(d.length>0)){e.next=15;break}return e.prev=1,e.next=4,xh({word:d,gameId:o});case 4:t=e.sent,v([]),c(t.data),b(t.data.blocks),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),alert(e.t0.message.replace("FirebaseError: ",""));case 13:e.next=16;break;case 15:alert("No word was submitted!");case 16:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();return(0,p.jsxs)("div",{className:"GameScreen",style:n,children:[(0,p.jsx)("h3",{className:"userName",style:{color:r===i.players[1]?Sh:Th},children:r}),(0,p.jsx)("h3",{className:"turn",style:{color:r===i.players[1]?Th:Sh},children:i.players[0]===r?i.players[1]:i.players[0]}),(0,p.jsx)(m,{turn:i.turn,setWord:v,user:r,blocks:k,setBlocks:b,players:i.players,usedWords:i.usedWords}),(0,p.jsxs)("div",{style:{width:"50%",margin:"10px auto"},children:[(0,p.jsx)("div",{style:{color:Sh,fontSize:"150%",float:r===i.players[1]?"left":"right"},children:i.scores[1]}),(0,p.jsx)("div",{style:{color:Th,fontSize:"150%",textAlign:r===i.players[0]?"left":"right"},children:i.scores[0]}),(0,p.jsx)("h3",{style:{textAlign:"center",color:"gray"},children:E})]}),(0,p.jsx)("h2",{style:{textAlign:"center"},children:d.map((function(e){return e.letter})).join(" ")}),(0,p.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center"},children:[i.turn===r&&!w&&(0,p.jsx)(y,{onClick:x,text:"Submit"}),(0,p.jsx)(y,{onClick:function(){a(""),u("selection")},text:"Back to Games",style:{marginLeft:10}})]}),i.usedWords.length>0&&(0,p.jsxs)("h4",{style:{color:"gray"},children:["Last Word: ",i.usedWords[i.usedWords.length-1].toLowerCase()]})]})};function Ch(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var Nh;Object.create;function Ah(){return r({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var Rh=Ah,Ph=new Y("auth","Firebase",Ah()),Oh=new ge("@firebase/auth");function Dh(e){if(Oh.logLevel<=fe.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Oh.warn.apply(Oh,["Auth (".concat(Ze,"): ").concat(e)].concat(n))}}function Lh(e){if(Oh.logLevel<=fe.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Oh.error.apply(Oh,["Auth (".concat(Ze,"): ").concat(e)].concat(n))}}function Mh(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw jh.apply(void 0,[e].concat(n))}function Uh(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return jh.apply(void 0,[e].concat(n))}function Fh(e,t,n){var i=Object.assign(Object.assign({},Rh()),r({},t,n));return new Y("auth","Firebase",i).create(t,{appName:e.name})}function Vh(e){return Fh(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function jh(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=d(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(d(o)))}return Ph.create.apply(Ph,[e].concat(n))}function zh(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw jh.apply(void 0,[t].concat(r))}}function Bh(e){var t="INTERNAL ASSERTION FAILED: "+e;throw Lh(t),new Error(t)}function qh(e,t){e||Bh(t)}function Hh(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Wh(){return"http:"===Kh()||"https:"===Kh()}function Kh(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function Gh(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Wh()||function(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}var Qh=function(){function e(t,n){k(this,e),this.shortDelay=t,this.longDelay=n,qh(n>t,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(H())||"object"===typeof navigator&&"ReactNative"===navigator.product}return w(e,[{key:"get",value:function(){return Gh()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}]),e}();function Yh(e,t){qh(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var Xh=function(){function e(){k(this,e)}return w(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Bh("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}))},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Bh("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Bh("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),$h=(r(Nh={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),r(Nh,"MISSING_CUSTOM_TOKEN","internal-error"),r(Nh,"INVALID_IDENTIFIER","invalid-email"),r(Nh,"MISSING_CONTINUE_URI","internal-error"),r(Nh,"INVALID_PASSWORD","wrong-password"),r(Nh,"MISSING_PASSWORD","missing-password"),r(Nh,"INVALID_LOGIN_CREDENTIALS","invalid-credential"),r(Nh,"EMAIL_EXISTS","email-already-in-use"),r(Nh,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),r(Nh,"INVALID_IDP_RESPONSE","invalid-credential"),r(Nh,"INVALID_PENDING_TOKEN","invalid-credential"),r(Nh,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),r(Nh,"MISSING_REQ_TYPE","internal-error"),r(Nh,"EMAIL_NOT_FOUND","user-not-found"),r(Nh,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),r(Nh,"EXPIRED_OOB_CODE","expired-action-code"),r(Nh,"INVALID_OOB_CODE","invalid-action-code"),r(Nh,"MISSING_OOB_CODE","internal-error"),r(Nh,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),r(Nh,"INVALID_ID_TOKEN","invalid-user-token"),r(Nh,"TOKEN_EXPIRED","user-token-expired"),r(Nh,"USER_NOT_FOUND","user-token-expired"),r(Nh,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),r(Nh,"PASSWORD_DOES_NOT_MEET_REQUIREMENTS","password-does-not-meet-requirements"),r(Nh,"INVALID_CODE","invalid-verification-code"),r(Nh,"INVALID_SESSION_INFO","invalid-verification-id"),r(Nh,"INVALID_TEMPORARY_PROOF","invalid-credential"),r(Nh,"MISSING_SESSION_INFO","missing-verification-id"),r(Nh,"SESSION_EXPIRED","code-expired"),r(Nh,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),r(Nh,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),r(Nh,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),r(Nh,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),r(Nh,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),r(Nh,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),r(Nh,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),r(Nh,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),r(Nh,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),r(Nh,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),r(Nh,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),r(Nh,"RECAPTCHA_NOT_ENABLED","recaptcha-not-enabled"),r(Nh,"MISSING_RECAPTCHA_TOKEN","missing-recaptcha-token"),r(Nh,"INVALID_RECAPTCHA_TOKEN","invalid-recaptcha-token"),r(Nh,"INVALID_RECAPTCHA_ACTION","invalid-recaptcha-action"),r(Nh,"MISSING_CLIENT_TYPE","missing-client-type"),r(Nh,"MISSING_RECAPTCHA_VERSION","missing-recaptcha-version"),r(Nh,"INVALID_RECAPTCHA_VERSION","invalid-recaptcha-version"),r(Nh,"INVALID_REQ_TYPE","invalid-req-type"),Nh),Jh=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Zh=new Qh(3e4,6e4);function ed(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function td(e,t,n,r){return nd.apply(this,arguments)}function nd(){return nd=h(l().mark((function e(t,n,r,i){var a,o=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",rd(t,a,h(l().mark((function e(){var a,o,u,s,c;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=te(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),c=Object.assign({method:n,headers:s},a),W()||(c.referrerPolicy="no-referrer"),e.t0=Xh.fetch(),e.next=14,ud(t,t.config.apiHost,r,u);case 14:return e.t1=e.sent,e.t2=c,e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 17:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),nd.apply(this,arguments)}function rd(e,t,n){return id.apply(this,arguments)}function id(){return(id=h(l().mark((function e(t,n,r){var i,a,o,u,c,f,h,d,p,v;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},$h),n),e.prev=2,a=new ld(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw fd(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(c=o.ok?u.errorMessage:u.error.message,f=c.split(" : "),h=s(f,2),d=h[0],p=h[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==d){e.next=23;break}throw fd(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==d){e.next=27;break}throw fd(t,"email-already-in-use",u);case 27:if("USER_DISABLED"!==d){e.next=29;break}throw fd(t,"user-disabled",u);case 29:if(v=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-"),!p){e.next=34;break}throw Fh(t,v,p);case 34:Mh(t,v);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof Q)){e.next=41;break}throw e.t0;case 41:Mh(t,"network-request-failed",{message:String(e.t0)});case 42:case"end":return e.stop()}}),e,null,[[2,37]])})))).apply(this,arguments)}function ad(e,t,n,r){return od.apply(this,arguments)}function od(){return od=h(l().mark((function e(t,n,r,i){var a,o,u=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,td(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&Mh(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),od.apply(this,arguments)}function ud(e,t,n,r){return sd.apply(this,arguments)}function sd(){return sd=h(l().mark((function e(t,n,r,i){var a,o,u,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a="".concat(n).concat(r,"?").concat(i),u=(o=t).config.emulator?Yh(t.config,a):"".concat(t.config.apiScheme,"://").concat(a),!Jh.includes(r)){e.next=9;break}return e.next=6,o._persistenceManagerAvailable;case 6:if("COOKIE"!==o._getPersistenceType()){e.next=9;break}return s=o._getPersistence(),e.abrupt("return",s._getFinalTarget(u).toString());case 9:return e.abrupt("return",u);case 10:case"end":return e.stop()}}),e)}))),sd.apply(this,arguments)}function cd(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var ld=function(){function e(t){var n=this;k(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(Uh(n.auth,"network-request-failed"))}),Zh.get())}))}return w(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function fd(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=Uh(e,t,r);return i.customData._tokenResponse=n,i}function hd(e){return void 0!==e&&void 0!==e.enterprise}var dd=function(){function e(t){if(k(this,e),this.siteKey="",this.recaptchaEnforcementState=[],void 0===t.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}return w(e,[{key:"getProviderEnforcementState",value:function(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;var t,n=g(this.recaptchaEnforcementState);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.provider&&r.provider===e)return cd(r.enforcementState)}}catch(i){n.e(i)}finally{n.f()}return null}},{key:"isProviderEnabled",value:function(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}},{key:"isAnyProviderEnabled",value:function(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}]),e}();function pd(e,t){return vd.apply(this,arguments)}function vd(){return(vd=h(l().mark((function e(t,n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",td(t,"GET","/v2/recaptchaConfig",ed(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function md(e,t){return yd.apply(this,arguments)}function yd(){return(yd=h(l().mark((function e(t,n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",td(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gd(e,t){return kd.apply(this,arguments)}function kd(){return(kd=h(l().mark((function e(t,n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",td(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bd(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function wd(){return wd=h(l().mark((function e(t){var n,r,i,a,o,u,s=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=oe(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,zh((a=Ed(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:bd(_d(a.auth_time)),issuedAtTime:bd(_d(a.iat)),expirationTime:bd(_d(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),wd.apply(this,arguments)}function _d(e){return 1e3*Number(e)}function Ed(e){var t=s(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return Lh("JWT malformed, contained fewer than 3 sections"),null;try{var a=L(r);return a?JSON.parse(a):(Lh("Failed to decode base64 JWT payload"),null)}catch(o){return Lh("Caught error parsing JWT payload as JSON",null===o||void 0===o?void 0:o.toString()),null}}function xd(e){var t=Ed(e);return zh(t,"internal-error"),zh("undefined"!==typeof t.exp,"internal-error"),zh("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}function Sd(e,t){return Td.apply(this,arguments)}function Td(){return Td=h(l().mark((function e(t,n){var r=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof Q&&Id(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),Td.apply(this,arguments)}function Id(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var Cd=function(){function e(t){k(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return w(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(h(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=h(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Nd=function(){function e(t,n){k(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return w(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=bd(this.lastLoginAt),this.creationTime=bd(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function Ad(e){return Rd.apply(this,arguments)}function Rd(){return(Rd=h(l().mark((function e(t){var n,r,i,a,o,u,s,c,f,h,d;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,Sd(t,gd(r,{idToken:i}));case 6:zh(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?Dd(o.providerUserInfo):[],s=Od(t.providerData,u),c=t.isAnonymous,f=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),h=!!c&&f,d={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new Nd(o.createdAt,o.lastLoginAt),isAnonymous:h},Object.assign(t,d);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pd(){return(Pd=h(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=oe(t),e.next=3,Ad(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Od(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(d(n),d(t))}function Dd(e){return e.map((function(e){var t=e.providerId,n=Ch(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function Ld(e,t){return Md.apply(this,arguments)}function Md(){return(Md=h(l().mark((function e(t,n){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rd(t,{},h(l().mark((function e(){var r,i,a,o,u,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=te({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,e.next=4,ud(t,a,"/v1/token","key=".concat(o));case 4:return u=e.sent,e.next=7,t._getAdditionalHeaders();case 7:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",Xh.fetch()(u,{method:"POST",headers:s,body:r}));case 10:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ud(e,t){return Fd.apply(this,arguments)}function Fd(){return(Fd=h(l().mark((function e(t,n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",td(t,"POST","/v2/accounts:revokeToken",ed(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Vd=function(){function e(){k(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return w(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){zh(e.idToken,"internal-error"),zh("undefined"!==typeof e.idToken,"internal-error"),zh("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):xd(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"updateFromIdToken",value:function(e){zh(0!==e.length,"internal-error");var t=xd(e);this.updateTokensAndExpiration(e,null,t)}},{key:"getToken",value:function(){var e=h(l().mark((function e(t){var n=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.length>1&&void 0!==n[1]&&n[1]||!this.accessToken||this.isExpired){e.next=3;break}return e.abrupt("return",this.accessToken);case 3:if(zh(this.refreshToken,t,"user-token-expired"),!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=h(l().mark((function e(t,n){var r,i,a,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ld(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return Bh("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(zh("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(zh("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(zh("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function jd(e,t){zh("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var zd=function(){function e(t){k(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=Ch(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Cd(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?d(a.providerData):[],this.metadata=new Nd(a.createdAt||void 0,a.lastLoginAt||void 0)}return w(e,[{key:"getIdToken",value:function(){var e=h(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sd(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(zh(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return wd.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return Pd.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(zh(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){var n=new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}},{key:"_onReload",value:function(e){zh(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=h(l().mark((function e(t){var n,r,i=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,Ad(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=h(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ye(this.auth.app)){e.next=2;break}return e.abrupt("return",Promise.reject(Vh(this.auth)));case 2:return e.next=4,this.getIdToken();case 4:return t=e.sent,e.next=7,Sd(this,md(this.auth,{idToken:t}));case 7:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,m=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,y=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,w=n.isAnonymous,_=n.providerData,E=n.stsTokenManager;zh(k&&E,t,"internal-error");var x=Vd.fromJSON(this.name,E);zh("string"===typeof k,t,"internal-error"),jd(f,t.name),jd(h,t.name),zh("boolean"===typeof b,t,"internal-error"),zh("boolean"===typeof w,t,"internal-error"),jd(d,t.name),jd(p,t.name),jd(v,t.name),jd(m,t.name),jd(y,t.name),jd(g,t.name);var S=new e({uid:k,auth:t,email:h,emailVerified:b,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:x,createdAt:y,lastLoginAt:g});return _&&Array.isArray(_)&&(S.providerData=_.map((function(e){return Object.assign({},e)}))),m&&(S._redirectEventId=m),S}},{key:"_fromIdTokenResponse",value:function(){var t=h(l().mark((function t(n,r){var i,a,o,u=arguments;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new Vd).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,Ad(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"_fromGetAccountInfoResponse",value:function(){var t=h(l().mark((function t(n,r,i){var a,o,u,s,c,f;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return zh(void 0!==(a=r.users[0]).localId,"internal-error"),o=void 0!==a.providerUserInfo?Dd(a.providerUserInfo):[],u=!(a.email&&a.passwordHash)&&!(null===o||void 0===o?void 0:o.length),(s=new Vd).updateFromIdToken(i),c=new e({uid:a.localId,auth:n,stsTokenManager:s,isAnonymous:u}),f={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new Nd(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(null===o||void 0===o?void 0:o.length)},Object.assign(c,f),t.abrupt("return",c);case 10:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}(),Bd=new Map;function qd(e){qh(e instanceof Function,"Expected a class definition");var t=Bd.get(e);return t?(qh(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Bd.set(e,t),t)}var Hd=function(){function e(){k(this,e),this.type="NONE",this.storage={}}return w(e,[{key:"_isAvailable",value:function(){var e=h(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=h(l().mark((function e(t,n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=h(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=h(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();Hd.type="NONE";var Wd=Hd;function Kd(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var Gd=function(){function e(t,n,r){k(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=Kd(this.userKey,a.apiKey,o),this.fullPersistenceKey=Kd("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return w(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=h(l().mark((function e(){var t,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",null);case 5:if("string"!==typeof t){e.next=12;break}return e.next=8,gd(this.auth,{idToken:t}).catch((function(){}));case 8:if(n=e.sent){e.next=11;break}return e.abrupt("return",null);case 11:return e.abrupt("return",zd._fromGetAccountInfoResponse(this.auth,n,t));case 12:return e.abrupt("return",zd._fromJSON(this.auth,t));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=h(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=h(l().mark((function t(n,r){var i,a,o,u,s,c,f,d,p,v,m,y,k=arguments;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=k.length>2&&void 0!==k[2]?k[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(qd(Wd),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=h(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||qd(Wd),u=Kd(i,n.config.apiKey,n.name),s=null,c=g(r),t.prev=10,c.s();case 12:if((f=c.n()).done){t.next=41;break}return d=f.value,t.prev=14,t.next=17,d._get(u);case 17:if(!(p=t.sent)){t.next=35;break}if(v=void 0,"string"!==typeof p){t.next=31;break}return t.next=23,gd(n,{idToken:p}).catch((function(){}));case 23:if(m=t.sent){t.next=26;break}return t.abrupt("break",41);case 26:return t.next=28,zd._fromGetAccountInfoResponse(n,m,p);case 28:v=t.sent,t.next=32;break;case 31:v=zd._fromJSON(n,p);case 32:return d!==o&&(s=v),o=d,t.abrupt("break",41);case 35:t.next=39;break;case 37:t.prev=37,t.t0=t.catch(14);case 39:t.next=12;break;case 41:t.next=46;break;case 43:t.prev=43,t.t1=t.catch(10),c.e(t.t1);case 46:return t.prev=46,c.f(),t.finish(46);case 49:if(y=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&y.length){t.next=52;break}return t.abrupt("return",new e(o,n,i));case 52:if(o=y[0],!s){t.next=56;break}return t.next=56,o._set(u,s.toJSON());case 56:return t.next=58,Promise.all(r.map(function(){var e=h(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 58:return t.abrupt("return",new e(o,n,i));case 59:case"end":return t.stop()}}),t,null,[[10,43,46,49],[14,37]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function Qd(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Jd(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Yd(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(ep(t))return"Blackberry";if(tp(t))return"Webos";if(Xd(t))return"Safari";if((t.includes("chrome/")||$d(t))&&!t.includes("edge/"))return"Chrome";if(Zd(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function Yd(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H();return/firefox\//i.test(e)}function Xd(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function $d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H();return/crios\//i.test(e)}function Jd(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H();return/iemobile/i.test(e)}function Zd(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H();return/android/i.test(e)}function ep(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H();return/blackberry/i.test(e)}function tp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H();return/webos/i.test(e)}function np(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function rp(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H();return np(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function ip(){return function(){var e=H();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function ap(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H();return np(e)||Zd(e)||tp(e)||ep(e)||/windows phone/i.test(e)||Jd(e)}function op(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Qd(H());break;case"Worker":t="".concat(Qd(H()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Ze,"/").concat(r)}var up=function(){function e(t){k(this,e),this.auth=t,this.queue=[]}return w(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=h(l().mark((function e(t){var n,r,i,a,o,u,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=g(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=g(n);try{for(o.s();!(u=o.n()).done;){s=u.value;try{s()}catch(c){}}}catch(l){o.e(l)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}();function sp(e){return cp.apply(this,arguments)}function cp(){return cp=h(l().mark((function e(t){var n,r=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",td(t,"GET","/v2/passwordPolicy",ed(t,n)));case 2:case"end":return e.stop()}}),e)}))),cp.apply(this,arguments)}var lp=function(){function e(t){var n,r,i,a;k(this,e);var o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(n=o.minPasswordLength)&&void 0!==n?n:6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),void 0!==o.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),void 0!==o.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),void 0!==o.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),void 0!==o.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(i=null===(r=t.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==i?i:"",this.forceUpgradeOnSignin=null!==(a=t.forceUpgradeOnSignin)&&void 0!==a&&a,this.schemaVersion=t.schemaVersion}return w(e,[{key:"validatePassword",value:function(e){var t,n,r,i,a,o,u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=null===(t=u.meetsMinPasswordLength)||void 0===t||t),u.isValid&&(u.isValid=null===(n=u.meetsMaxPasswordLength)||void 0===n||n),u.isValid&&(u.isValid=null===(r=u.containsLowercaseLetter)||void 0===r||r),u.isValid&&(u.isValid=null===(i=u.containsUppercaseLetter)||void 0===i||i),u.isValid&&(u.isValid=null===(a=u.containsNumericCharacter)||void 0===a||a),u.isValid&&(u.isValid=null===(o=u.containsNonAlphanumericCharacter)||void 0===o||o),u}},{key:"validatePasswordLengthOptions",value:function(e,t){var n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}},{key:"validatePasswordCharacterOptions",value:function(e,t){var n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(var r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}},{key:"updatePasswordCharacterOptionsStatuses",value:function(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}]),e}(),fp=function(){function e(t,n,r,i){var a=this;k(this,e),this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new dp(this),this.idTokenSubscription=new dp(this),this.beforeStateQueue=new up(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ph,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise((function(e){return a._resolvePersistenceManagerAvailable=e}))}return w(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=qd(t)),this._initializationPromise=this.queue(h(l().mark((function r(){var i,a,o;return l().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,Gd.create(n,e);case 4:if(n.persistenceManager=r.sent,null===(i=n._resolvePersistenceManagerAvailable)||void 0===i||i.call(n),!n._deleted){r.next=8;break}return r.abrupt("return");case 8:if(!(null===(a=n._popupRedirectResolver)||void 0===a?void 0:a._shouldInitProactively)){r.next=16;break}return r.prev=9,r.next=12,n._popupRedirectResolver._initialize(n);case 12:r.next=16;break;case 14:r.prev=14,r.t0=r.catch(9);case 16:return r.next=18,n.initializeCurrentUser(t);case 18:if(n.lastNotifiedUid=(null===(o=n.currentUser)||void 0===o?void 0:o.uid)||null,!n._deleted){r.next=21;break}return r.abrupt("return");case 21:n._isInitialized=!0;case 22:case"end":return r.stop()}}),r,null,[[9,14]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=h(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUserFromIdToken",value:function(){var e=h(l().mark((function e(t){var n,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,gd(this,{idToken:t});case 3:return n=e.sent,e.next=6,zd._fromGetAccountInfoResponse(this,n,t);case 6:return r=e.sent,e.next=9,this.directlySetCurrentUser(r);case 9:e.next=16;break;case 11:return e.prev=11,e.t0=e.catch(0),console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e.t0),e.next=16,this.directlySetCurrentUser(null);case 16:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=h(l().mark((function e(t){var n,r,i,a,o,u,s,c,f=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ye(this.app)){e.next=7;break}if(!(r=this.app.settings.authIdToken)){e.next=6;break}return e.abrupt("return",new Promise((function(e){setTimeout((function(){return f.initializeCurrentUserFromIdToken(r).then(e,e)}))})));case 6:return e.abrupt("return",this.directlySetCurrentUser(null));case 7:return e.next=9,this.assertedPersistence.getCurrentUser();case 9:if(i=e.sent,a=i,o=!1,!t||!this.config.authDomain){e.next=21;break}return e.next=15,this.getOrInitRedirectPersistenceManager();case 15:return u=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,s=null===a||void 0===a?void 0:a._redirectEventId,e.next=19,this.tryRedirectSignIn(t);case 19:c=e.sent,u&&u!==s||!(null===c||void 0===c?void 0:c.user)||(a=c.user,o=!0);case 21:if(a){e.next=23;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 23:if(a._redirectEventId){e.next=39;break}if(!o){e.next=34;break}return e.prev=25,e.next=28,this.beforeStateQueue.runMiddleware(a);case 28:e.next=34;break;case 30:e.prev=30,e.t0=e.catch(25),a=i,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 34:if(!a){e.next=38;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(a));case 38:return e.abrupt("return",this.directlySetCurrentUser(null));case 39:return zh(this._popupRedirectResolver,this,"argument-error"),e.next=42,this.getOrInitRedirectPersistenceManager();case 42:if(!this.redirectUser||this.redirectUser._redirectEventId!==a._redirectEventId){e.next=44;break}return e.abrupt("return",this.directlySetCurrentUser(a));case 44:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(a));case 45:case"end":return e.stop()}}),e,this,[[25,30]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=h(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=h(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ad(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=h(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=h(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ye(this.app)){e.next=2;break}return e.abrupt("return",Promise.reject(Vh(this)));case 2:return(n=t?oe(t):null)&&zh(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=h(l().mark((function e(t){var n,r=this,i=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&zh(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(h(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=h(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ye(this.app)){e.next=2;break}return e.abrupt("return",Promise.reject(Vh(this)));case 2:return e.next=4,this.beforeStateQueue.runMiddleware(null);case 4:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=7;break}return e.next=7,this._setRedirectUser(null);case 7:return e.abrupt("return",this._updateCurrentUser(null,!0));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return Ye(this.app)?Promise.reject(Vh(this)):this.queue(h(l().mark((function n(){return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(qd(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getRecaptchaConfig",value:function(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}},{key:"validatePassword",value:function(){var e=h(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._getPasswordPolicyInternal()){e.next=3;break}return e.next=3,this._updatePasswordPolicy();case 3:if((n=this._getPasswordPolicyInternal()).schemaVersion===this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION){e.next=6;break}return e.abrupt("return",Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})));case 6:return e.abrupt("return",n.validatePassword(t));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_getPasswordPolicyInternal",value:function(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}},{key:"_updatePasswordPolicy",value:function(){var e=h(l().mark((function e(){var t,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sp(this);case 2:t=e.sent,n=new lp(t),null===this.tenantId?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getPersistenceType",value:function(){return this.assertedPersistence.persistence.type}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new Y("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"authStateReady",value:function(){var e=this;return new Promise((function(t,n){if(e.currentUser)t();else var r=e.onAuthStateChanged((function(){r(),t()}),n)}))}},{key:"revokeAccessToken",value:function(){var e=h(l().mark((function e(t){var n,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.currentUser){e.next=8;break}return e.next=3,this.currentUser.getIdToken();case 3:return n=e.sent,r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n},null!=this.tenantId&&(r.tenantId=this.tenantId),e.next=8,Ud(this,r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=h(l().mark((function e(t,n){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=h(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return zh(n=t&&qd(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,Gd.create(this,[qd(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=h(l().mark((function e(t){var n,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(h(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=h(l().mark((function e(t){var n=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(h(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=!1,u=this._isInitialized?Promise.resolve():this._initializationPromise;if(zh(u,this,"internal-error"),u.then((function(){o||a(i.currentUser)})),"function"===typeof t){var s=e.addObserver(t,n,r);return function(){o=!0,s()}}var c=e.addObserver(t);return function(){o=!0,c()}}},{key:"directlySetCurrentUser",value:function(){var e=h(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return zh(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=op(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=h(l().mark((function e(){var t,n,i,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(i=e.sent)&&(n["X-Firebase-Client"]=i),e.next=8,this._getAppCheckToken();case 8:return(a=e.sent)&&(n["X-Firebase-AppCheck"]=a),e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=h(l().mark((function e(){var t,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ye(this.app)||!this.app.settings.appCheckToken){e.next=2;break}return e.abrupt("return",this.app.settings.appCheckToken);case 2:return e.next=4,null===(t=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();case 4:return(null===(n=e.sent)||void 0===n?void 0:n.error)&&Dh("Error while retrieving App Check token: ".concat(n.error)),e.abrupt("return",null===n||void 0===n?void 0:n.token);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function hp(e){return oe(e)}var dp=function(){function e(t){var n=this;k(this,e),this.auth=t,this.observer=null,this.addObserver=function(e,t){var n=new ie(e,t);return n.subscribe.bind(n)}((function(e){return n.observer=e}))}return w(e,[{key:"next",get:function(){return zh(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}(),pp={loadJS:function(){return h(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Unable to load external scripts");case 1:case"end":return e.stop()}}),e)})))()},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function vp(e){return pp.loadJS(e)}function mp(){return pp.recaptchaEnterpriseScript}function yp(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var gp=function(){function e(){k(this,e),this.enterprise=new kp}return w(e,[{key:"ready",value:function(e){e()}},{key:"execute",value:function(e,t){return Promise.resolve("token")}},{key:"render",value:function(e,t){return""}}]),e}(),kp=function(){function e(){k(this,e)}return w(e,[{key:"ready",value:function(e){e()}},{key:"execute",value:function(e,t){return Promise.resolve("token")}},{key:"render",value:function(e,t){return""}}]),e}();var bp="NO_RECAPTCHA",wp=function(){function e(t){k(this,e),this.type="recaptcha-enterprise",this.auth=hp(t)}return w(e,[{key:"verify",value:function(){var e=h(l().mark((function e(){var t,n,r,i,a,o,u=this,s=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=function(e,n,r){var i=window.grecaptcha;hd(i)?i.enterprise.ready((function(){i.enterprise.execute(e,{action:t}).then((function(e){n(e)})).catch((function(){n(bp)}))})):r(Error("No reCAPTCHA enterprise script loaded."))},i=function(){return i=h(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=5;break}if(null!=t.tenantId||null==t._agentRecaptchaConfig){e.next=3;break}return e.abrupt("return",t._agentRecaptchaConfig.siteKey);case 3:if(null==t.tenantId||void 0===t._tenantRecaptchaConfigs[t.tenantId]){e.next=5;break}return e.abrupt("return",t._tenantRecaptchaConfigs[t.tenantId].siteKey);case 5:return e.abrupt("return",new Promise(function(){var e=h(l().mark((function e(n,r){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:pd(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((function(e){if(void 0!==e.recaptchaKey){var i=new dd(e);return null==t.tenantId?t._agentRecaptchaConfig=i:t._tenantRecaptchaConfigs[t.tenantId]=i,n(i.siteKey)}r(new Error("recaptcha Enterprise site key undefined"))})).catch((function(e){r(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 6:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)},r=function(e){return i.apply(this,arguments)},t=s.length>0&&void 0!==s[0]?s[0]:"verify",n=s.length>1&&void 0!==s[1]&&s[1],!this.auth.settings.appVerificationDisabledForTesting){e.next=8;break}return o=new gp,e.abrupt("return",o.execute("siteKey",{action:"verify"}));case 8:return e.abrupt("return",new Promise((function(e,t){r(u.auth).then((function(r){if(!n&&hd(window.grecaptcha))a(r,e,t);else{if("undefined"===typeof window)return void t(new Error("RecaptchaVerifier is only supported in browser"));var i=mp();0!==i.length&&(i+=r),vp(i).then((function(){a(r,e,t)})).catch((function(e){t(e)}))}})).catch((function(e){t(e)}))})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function _p(e,t,n){return Ep.apply(this,arguments)}function Ep(){return Ep=h(l().mark((function e(t,n,r){var i,a,o,u,s,c,f,h,d=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=d.length>3&&void 0!==d[3]&&d[3],a=d.length>4&&void 0!==d[4]&&d[4],o=new wp(t),!a){e.next=7;break}u=bp,e.next=18;break;case 7:return e.prev=7,e.next=10,o.verify(r);case 10:u=e.sent,e.next=18;break;case 13:return e.prev=13,e.t0=e.catch(7),e.next=17,o.verify(r,!0);case 17:u=e.sent;case 18:if(s=Object.assign({},n),"mfaSmsEnrollment"!==r&&"mfaSmsSignIn"!==r){e.next=22;break}return"phoneEnrollmentInfo"in s?(c=s.phoneEnrollmentInfo.phoneNumber,f=s.phoneEnrollmentInfo.recaptchaToken,Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:f,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})):"phoneSignInInfo"in s&&(h=s.phoneSignInInfo.recaptchaToken,Object.assign(s,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})),e.abrupt("return",s);case 22:return i?Object.assign(s,{captchaResp:u}):Object.assign(s,{captchaResponse:u}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),e.abrupt("return",s);case 26:case"end":return e.stop()}}),e,null,[[7,13]])}))),Ep.apply(this,arguments)}function xp(e,t,n,r,i){return Sp.apply(this,arguments)}function Sp(){return Sp=h(l().mark((function e(t,n,r,i,a){var o,u,s,c,f;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("EMAIL_PASSWORD_PROVIDER"!==a){e.next=11;break}if(!(null===(o=t._getRecaptchaConfig())||void 0===o?void 0:o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER"))){e.next=8;break}return e.next=4,_p(t,n,r,"getOobCode"===r);case 4:return s=e.sent,e.abrupt("return",i(t,s));case 8:return e.abrupt("return",i(t,n).catch(function(){var e=h(l().mark((function e(a){var o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.code!=="auth/".concat("missing-recaptcha-token")){e.next=8;break}return console.log("".concat(r," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.")),e.next=4,_p(t,n,r,"getOobCode"===r);case 4:return o=e.sent,e.abrupt("return",i(t,o));case 8:return e.abrupt("return",Promise.reject(a));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 9:case 23:e.next=26;break;case 11:if("PHONE_PROVIDER"!==a){e.next=25;break}if(!(null===(u=t._getRecaptchaConfig())||void 0===u?void 0:u.isProviderEnabled("PHONE_PROVIDER"))){e.next=19;break}return e.next=15,_p(t,n,r);case 15:return c=e.sent,e.abrupt("return",i(t,c).catch(function(){var e=h(l().mark((function e(a){var o,u;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("AUDIT"!==(null===(o=t._getRecaptchaConfig())||void 0===o?void 0:o.getProviderEnforcementState("PHONE_PROVIDER"))){e.next=7;break}if(a.code!=="auth/".concat("missing-recaptcha-token")&&a.code!=="auth/".concat("invalid-app-credential")){e.next=7;break}return console.log("Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ".concat(r," flow.")),e.next=5,_p(t,n,r,!1,!0);case 5:return u=e.sent,e.abrupt("return",i(t,u));case 7:return e.abrupt("return",Promise.reject(a));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 19:return e.next=21,_p(t,n,r,!1,!0);case 21:return f=e.sent,e.abrupt("return",i(t,f));case 25:return e.abrupt("return",Promise.reject(a+" provider is not supported."));case 26:case"end":return e.stop()}}),e)}))),Sp.apply(this,arguments)}function Tp(e){return Ip.apply(this,arguments)}function Ip(){return(Ip=h(l().mark((function e(t){var n,r,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=hp(t),e.next=3,pd(n,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"});case 3:r=e.sent,i=new dd(r),null==n.tenantId?n._agentRecaptchaConfig=i:n._tenantRecaptchaConfigs[n.tenantId]=i,i.isAnyProviderEnabled()&&new wp(n).verify();case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Cp(e,t){var n=Qe(e,"auth");if(n.isInitialized()){var r=n.getImmediate();if(Z(n.getOptions(),null!==t&&void 0!==t?t:{}))return r;Mh(r,"already-initialized")}return n.initialize({options:t})}function Np(e,t,n){var r=hp(e);zh(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=Ap(t),o=function(e){var t=Ap(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:Rp(r.substr(a.length+1))}}var o=s(r.split(":"),2);return{host:o[0],port:Rp(o[1])}}(t),u=o.host,c=o.port,l=null===c?"":":".concat(c),f={url:"".concat(a,"//").concat(u).concat(l,"/")},h=Object.freeze({host:u,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator)return zh(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void zh(Z(f,r.config.emulator)&&Z(h,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=f,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Ap(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Rp(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var Pp=function(){function e(t,n){k(this,e),this.providerId=t,this.signInMethod=n}return w(e,[{key:"toJSON",value:function(){return Bh("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return Bh("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return Bh("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return Bh("not implemented")}}]),e}();function Op(e,t){return Dp.apply(this,arguments)}function Dp(){return(Dp=h(l().mark((function e(t,n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",td(t,"POST","/v1/accounts:signUp",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Lp(e,t){return Mp.apply(this,arguments)}function Mp(){return(Mp=h(l().mark((function e(t,n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ad(t,"POST","/v1/accounts:signInWithPassword",ed(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Up(e,t){return Fp.apply(this,arguments)}function Fp(){return(Fp=h(l().mark((function e(t,n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ad(t,"POST","/v1/accounts:signInWithEmailLink",ed(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vp(e,t){return jp.apply(this,arguments)}function jp(){return(jp=h(l().mark((function e(t,n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ad(t,"POST","/v1/accounts:signInWithEmailLink",ed(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var zp=function(e){x(n,e);var t=C(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return k(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return w(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=h(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?5:6;break;case 3:return n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},e.abrupt("return",xp(t,n,"signInWithPassword",Lp,"EMAIL_PASSWORD_PROVIDER"));case 5:return e.abrupt("return",Up(t,{email:this._email,oobCode:this._password}));case 6:Mh(t,"internal-error");case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=h(l().mark((function e(t,n){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?5:6;break;case 3:return r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},e.abrupt("return",xp(t,r,"signUpPassword",Op,"EMAIL_PASSWORD_PROVIDER"));case 5:return e.abrupt("return",Vp(t,{idToken:n,email:this._email,oobCode:this._password}));case 6:Mh(t,"internal-error");case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(Pp);function Bp(e,t){return qp.apply(this,arguments)}function qp(){return(qp=h(l().mark((function e(t,n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ad(t,"POST","/v1/accounts:signInWithIdp",ed(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Hp=function(e){x(n,e);var t=C(n);function n(){var e;return k(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return w(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return Bp(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Bp(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Bp(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=te(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Mh("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=Ch(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(Pp);function Wp(e,t){return Kp.apply(this,arguments)}function Kp(){return(Kp=h(l().mark((function e(t,n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",td(t,"POST","/v1/accounts:sendVerificationCode",ed(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gp(){return(Gp=h(l().mark((function e(t,n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ad(t,"POST","/v1/accounts:signInWithPhoneNumber",ed(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qp(){return(Qp=h(l().mark((function e(t,n){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ad(t,"POST","/v1/accounts:signInWithPhoneNumber",ed(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw fd(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Yp=r({},"USER_NOT_FOUND","user-not-found");function Xp(){return(Xp=h(l().mark((function e(t,n){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",ad(t,"POST","/v1/accounts:signInWithPhoneNumber",ed(t,r),Yp));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $p=function(e){x(n,e);var t=C(n);function n(e){var r;return k(this,n),(r=t.call(this,"phone","phone")).params=e,r}return w(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Gp.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Qp.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return Xp.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(Pp);var Jp=function(){function e(t){var n,r,i,a,o,u;k(this,e);var s=ne(re(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);zh(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return w(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=ne(re(e)).link,n=t?ne(re(t)).deep_link_id:null,r=ne(re(e)).deep_link_id;return(r?ne(re(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(r){return null}}}]),e}();var Zp=function(){function e(){k(this,e),this.providerId=e.PROVIDER_ID}return w(e,null,[{key:"credential",value:function(e,t){return zp._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=Jp.parseLink(t);return zh(n,"argument-error"),zp._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();Zp.PROVIDER_ID="password",Zp.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Zp.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var ev=function(){function e(t){k(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return w(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),tv=function(e){x(n,e);var t=C(n);function n(){var e;return k(this,n),(e=t.apply(this,arguments)).scopes=[],e}return w(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return d(this.scopes)}}]),n}(ev),nv=function(e){x(n,e);var t=C(n);function n(){return k(this,n),t.call(this,"facebook.com")}return w(n,null,[{key:"credential",value:function(e){return Hp._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(tv);nv.FACEBOOK_SIGN_IN_METHOD="facebook.com",nv.PROVIDER_ID="facebook.com";var rv=function(e){x(n,e);var t=C(n);function n(){var e;return k(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return w(n,null,[{key:"credential",value:function(e,t){return Hp._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}(tv);rv.GOOGLE_SIGN_IN_METHOD="google.com",rv.PROVIDER_ID="google.com";var iv=function(e){x(n,e);var t=C(n);function n(){return k(this,n),t.call(this,"github.com")}return w(n,null,[{key:"credential",value:function(e){return Hp._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(tv);iv.GITHUB_SIGN_IN_METHOD="github.com",iv.PROVIDER_ID="github.com";var av=function(e){x(n,e);var t=C(n);function n(){return k(this,n),t.call(this,"twitter.com")}return w(n,null,[{key:"credential",value:function(e,t){return Hp._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}(tv);function ov(e,t){return uv.apply(this,arguments)}function uv(){return(uv=h(l().mark((function e(t,n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ad(t,"POST","/v1/accounts:signUp",ed(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}av.TWITTER_SIGN_IN_METHOD="twitter.com",av.PROVIDER_ID="twitter.com";var sv=function(){function e(t){k(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return w(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=h(l().mark((function t(n,r,i){var a,o,u,s,c=arguments;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,zd._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=cv(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=h(l().mark((function t(n,r,i){var a;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=cv(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function cv(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}var lv=function(e){x(n,e);var t=C(n);function n(e,r,i,a){var o,u;return k(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(_(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return w(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(Q);function fv(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw lv._fromErrorAndOperation(e,n,t,r);throw n}))}function hv(e,t){return dv.apply(this,arguments)}function dv(){return dv=h(l().mark((function e(t,n){var r,i,a=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=Sd,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",sv._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),dv.apply(this,arguments)}function pv(e,t){return vv.apply(this,arguments)}function vv(){return vv=h(l().mark((function e(t,n){var r,i,a,o,u,s,c=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>2&&void 0!==c[2]&&c[2],!Ye((i=t.auth).app)){e.next=4;break}return e.abrupt("return",Promise.reject(Vh(i)));case 4:return a="reauthenticate",e.prev=5,e.next=8,Sd(t,fv(i,a,n,t),r);case 8:return zh((o=e.sent).idToken,i,"internal-error"),zh(u=Ed(o.idToken),i,"internal-error"),s=u.sub,zh(t.uid===s,i,"user-mismatch"),e.abrupt("return",sv._forOperation(t,a,o));case 17:throw e.prev=17,e.t0=e.catch(5),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&Mh(i,"user-mismatch"),e.t0;case 21:case"end":return e.stop()}}),e,null,[[5,17]])}))),vv.apply(this,arguments)}function mv(e,t){return yv.apply(this,arguments)}function yv(){return yv=h(l().mark((function e(t,n){var r,i,a,o,u=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>2&&void 0!==u[2]&&u[2],!Ye(t.app)){e.next=3;break}return e.abrupt("return",Promise.reject(Vh(t)));case 3:return i="signIn",e.next=6,fv(t,i,n);case 6:return a=e.sent,e.next=9,sv._fromIdTokenResponse(t,i,a);case 9:if(o=e.sent,r){e.next=13;break}return e.next=13,t._updateCurrentUser(o.user);case 13:return e.abrupt("return",o);case 14:case"end":return e.stop()}}),e)}))),yv.apply(this,arguments)}function gv(e,t){return kv.apply(this,arguments)}function kv(){return(kv=h(l().mark((function e(t,n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",mv(hp(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bv(e){return wv.apply(this,arguments)}function wv(){return(wv=h(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=hp(t))._getPasswordPolicyInternal()){e.next=4;break}return e.next=4,n._updatePasswordPolicy();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _v(e,t,n){return Ev.apply(this,arguments)}function Ev(){return(Ev=h(l().mark((function e(t,n,r){var i,a,o,u;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ye(t.app)){e.next=2;break}return e.abrupt("return",Promise.reject(Vh(t)));case 2:return i=hp(t),a=xp(i,{returnSecureToken:!0,email:n,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ov,"EMAIL_PASSWORD_PROVIDER"),e.next=7,a.catch((function(e){throw e.code==="auth/".concat("password-does-not-meet-requirements")&&bv(t),e}));case 7:return o=e.sent,e.next=10,sv._fromIdTokenResponse(i,"signIn",o);case 10:return u=e.sent,e.next=13,i._updateCurrentUser(u.user);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xv(e,t,n){return Ye(e.app)?Promise.reject(Vh(e)):gv(oe(e),Zp.credential(t,n)).catch(function(){var t=h(l().mark((function t(n){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:throw n.code==="auth/".concat("password-does-not-meet-requirements")&&bv(e),n;case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}function Sv(e,t,n,r){return oe(e).onIdTokenChanged(t,n,r)}function Tv(e,t,n){return oe(e).beforeAuthStateChanged(t,n)}function Iv(e,t){return td(e,"POST","/v2/accounts/mfaEnrollment:start",ed(e,t))}function Cv(e,t){return td(e,"POST","/v2/accounts/mfaEnrollment:finalize",ed(e,t))}new WeakMap;var Nv="__sak",Av=function(){function e(t,n){k(this,e),this.storageRetriever=t,this.type=n}return w(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(Nv,"1"),this.storage.removeItem(Nv),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}(),Rv=function(e){x(n,e);var t=C(n);function n(){var e;return k(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.fallbackToPolling=ap(),e._shouldAllowMigration=!0,e}return w(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;n?this.detachListener():this.stopPolling();var i=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},a=this.storage.getItem(r);ip()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,10):i()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=h(l().mark((function e(t,r){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kt(S(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=h(l().mark((function e(t){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kt(S(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=h(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kt(S(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Av);Rv.type="LOCAL";var Pv=Rv;function Ov(e){var t,n,r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),i=RegExp("".concat(r,"=([^;]+)"));return null!==(n=null===(t=document.cookie.match(i))||void 0===t?void 0:t[1])&&void 0!==n?n:null}function Dv(e){var t="http:"===window.location.protocol;return"".concat(t?"__dev_":"__HOST-","FIREBASE_").concat(e.split(":")[3])}var Lv=function(){function e(){k(this,e),this.type="COOKIE",this.listenerUnsubscribes=new Map}return w(e,[{key:"_getFinalTarget",value:function(e){if(void 0===typeof window)return e;var t=new URL("".concat(window.location.origin,"/__cookies__"));return t.searchParams.set("finalTarget",e),t}},{key:"_isAvailable",value:function(){var e=h(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("boolean"!==typeof isSecureContext||isSecureContext){e.next=2;break}return e.abrupt("return",!1);case 2:if("undefined"!==typeof navigator&&"undefined"!==typeof document){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",null===(t=navigator.cookieEnabled)||void 0===t||t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=h(l().mark((function e(t,n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return");case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=h(l().mark((function e(t){var n,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._isAvailable()){e.next=2;break}return e.abrupt("return",null);case 2:if(n=Dv(t),!window.cookieStore){e.next=8;break}return e.next=6,window.cookieStore.get(n);case 6:return r=e.sent,e.abrupt("return",null===r||void 0===r?void 0:r.value);case 8:return e.abrupt("return",Ov(n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=h(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._isAvailable()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this._get(t);case 4:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return n=Dv(t),document.cookie="".concat(n,"=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High"),e.next=11,fetch("/__cookies__",{method:"DELETE"}).catch((function(){}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){if(this._isAvailable()){var n=Dv(e);if(window.cookieStore){var r=function(e){var r=e.changed.find((function(e){return e.name===n}));r&&t(r.value),e.deleted.find((function(e){return e.name===n}))&&t(null)};return this.listenerUnsubscribes.set(t,(function(){return window.cookieStore.removeEventListener("change",r)})),window.cookieStore.addEventListener("change",r)}var i=Ov(n),a=setInterval((function(){var e=Ov(n);e!==i&&(t(e),i=e)}),1e3);this.listenerUnsubscribes.set(t,(function(){return clearInterval(a)}))}}},{key:"_removeListener",value:function(e,t){var n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}]),e}();Lv.type="COOKIE";var Mv=function(e){x(n,e);var t=C(n);function n(){return k(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return w(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(Av);Mv.type="SESSION";var Uv=Mv;function Fv(e){return Promise.all(e.map(function(){var e=h(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var Vv=function(){function e(t){k(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return w(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=h(l().mark((function e(t){var n,r,i,a,o,u,s,c;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=h(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,Fv(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function jv(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Vv.receivers=[];var zv=function(){function e(t){k(this,e),this.target=t,this.handlers=new Set}return w(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=h(l().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=jv("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function Bv(){return window}function qv(e){Bv().location.href=e}function Hv(){return"undefined"!==typeof Bv().WorkerGlobalScope&&"function"===typeof Bv().importScripts}function Wv(){return Kv.apply(this,arguments)}function Kv(){return(Kv=h(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function Gv(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var Qv="firebaseLocalStorageDb",Yv="firebaseLocalStorage",Xv="fbase_key",$v=function(){function e(t){k(this,e),this.request=t}return w(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function Jv(e,t){return e.transaction([Yv],t?"readwrite":"readonly").objectStore(Yv)}function Zv(){var e=indexedDB.deleteDatabase(Qv);return new $v(e).toPromise()}function em(){var e=indexedDB.open(Qv,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(Yv,{keyPath:Xv})}catch(r){n(r)}})),e.addEventListener("success",h(l().mark((function n(){var r;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(Yv)){n.next=12;break}return r.close(),n.next=5,Zv();case 5:return n.t0=t,n.next=8,em();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function tm(e,t,n){return nm.apply(this,arguments)}function nm(){return nm=h(l().mark((function e(t,n,i){var a,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=Jv(t,!0).put((r(a={},Xv,n),r(a,"value",i),a)),e.abrupt("return",new $v(o).toPromise());case 2:case"end":return e.stop()}}),e)}))),nm.apply(this,arguments)}function rm(e,t){return im.apply(this,arguments)}function im(){return im=h(l().mark((function e(t,n){var r,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Jv(t,!1).get(n),e.next=3,new $v(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),im.apply(this,arguments)}function am(e,t){var n=Jv(e,!0).delete(t);return new $v(n).toPromise()}var om=function(){function e(){k(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return w(e,[{key:"_openDb",value:function(){var e=h(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,em();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=h(l().mark((function e(t){var n,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=h(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Hv()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=h(l().mark((function e(){var t=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=Vv._getInstance(Hv()?self:null),this.receiver._subscribe("keyChanged",function(){var e=h(l().mark((function e(n,r){var i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=h(l().mark((function e(t,n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=h(l().mark((function e(){var t,n,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wv();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new zv(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=h(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&Gv()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=h(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,em();case 5:return t=e.sent,e.next=8,tm(t,Nv,"1");case 8:return e.next=10,am(t,Nv);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=h(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=h(l().mark((function e(t,n){var r=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(h(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return tm(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=h(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return rm(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=h(l().mark((function e(t){var n=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(h(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return am(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=h(l().mark((function e(){var t,n,r,i,a,o,u,s,c,f,h;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=Jv(e,!1).getAll();return new $v(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:if(n=[],r=new Set,0!==t.length){i=g(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(l){i.e(l)}finally{i.f()}}for(c=0,f=Object.keys(this.localCache);c<f.length;c++)h=f[c],this.localCache[h]&&!r.has(h)&&(this.notifyListeners(h,null),n.push(h));return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(h(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();om.type="LOCAL";var um=om;function sm(e,t){return td(e,"POST","/v2/accounts/mfaSignIn:start",ed(e,t))}function cm(e,t){return td(e,"POST","/v2/accounts/mfaSignIn:finalize",ed(e,t))}yp("rcb"),new Qh(3e4,6e4);var lm="recaptcha";function fm(e,t,n){return hm.apply(this,arguments)}function hm(){return hm=h(l().mark((function e(t,n,r){var i,a,o,u,s,c,f,d,p,v,m,y,g,k,b,w;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._getRecaptchaConfig()){e.next=9;break}return e.prev=1,e.next=4,Tp(t);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.");case 9:if(e.prev=9,!("session"in(a="string"===typeof n?{phoneNumber:n}:n))){e.next=36;break}if(o=a.session,!("phoneNumber"in a)){e.next=24;break}return zh("enroll"===o.type,t,"internal-error"),u={idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:a.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},s=function(){var e=h(l().mark((function e(t,n){var i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.phoneEnrollmentInfo.captchaResponse!==bp){e.next=6;break}return zh((null===r||void 0===r?void 0:r.type)===lm,t,"argument-error"),e.next=4,dm(t,n,r);case 4:return i=e.sent,e.abrupt("return",Iv(t,i));case 6:return e.abrupt("return",Iv(t,n));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),c=xp(t,u,"mfaSmsEnrollment",s,"PHONE_PROVIDER"),e.next=20,c.catch((function(e){return Promise.reject(e)}));case 20:return f=e.sent,e.abrupt("return",f.phoneSessionInfo.sessionInfo);case 24:return zh("signin"===o.type,t,"internal-error"),zh(d=(null===(i=a.multiFactorHint)||void 0===i?void 0:i.uid)||a.multiFactorUid,t,"missing-multi-factor-info"),p={mfaPendingCredential:o.credential,mfaEnrollmentId:d,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},v=function(){var e=h(l().mark((function e(t,n){var i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.phoneSignInInfo.captchaResponse!==bp){e.next=6;break}return zh((null===r||void 0===r?void 0:r.type)===lm,t,"argument-error"),e.next=4,dm(t,n,r);case 4:return i=e.sent,e.abrupt("return",sm(t,i));case 6:return e.abrupt("return",sm(t,n));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),m=xp(t,p,"mfaSmsSignIn",v,"PHONE_PROVIDER"),e.next=32,m.catch((function(e){return Promise.reject(e)}));case 32:return y=e.sent,e.abrupt("return",y.phoneResponseInfo.sessionInfo);case 34:e.next=43;break;case 36:return g={phoneNumber:a.phoneNumber,clientType:"CLIENT_TYPE_WEB"},k=function(){var e=h(l().mark((function e(t,n){var i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.captchaResponse!==bp){e.next=6;break}return zh((null===r||void 0===r?void 0:r.type)===lm,t,"argument-error"),e.next=4,dm(t,n,r);case 4:return i=e.sent,e.abrupt("return",Wp(t,i));case 6:return e.abrupt("return",Wp(t,n));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),b=xp(t,g,"sendVerificationCode",k,"PHONE_PROVIDER"),e.next=41,b.catch((function(e){return Promise.reject(e)}));case 41:return w=e.sent,e.abrupt("return",w.sessionInfo);case 43:return e.prev=43,null===r||void 0===r||r._reset(),e.finish(43);case 46:case"end":return e.stop()}}),e,null,[[1,6],[9,,43,46]])}))),hm.apply(this,arguments)}function dm(e,t,n){return pm.apply(this,arguments)}function pm(){return(pm=h(l().mark((function e(t,n,r){var i,a,o,u,s,c,f,h,d;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return zh(r.type===lm,t,"argument-error"),e.next=3,r.verify();case 3:if(zh("string"===typeof(i=e.sent),t,"argument-error"),!("phoneEnrollmentInfo"in(a=Object.assign({},n)))){e.next=15;break}return o=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.captchaResponse,s=a.phoneEnrollmentInfo.clientType,c=a.phoneEnrollmentInfo.recaptchaVersion,Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:i,captchaResponse:u,clientType:s,recaptchaVersion:c}}),e.abrupt("return",a);case 15:if(!("phoneSignInInfo"in a)){e.next=23;break}return f=a.phoneSignInInfo.captchaResponse,h=a.phoneSignInInfo.clientType,d=a.phoneSignInInfo.recaptchaVersion,Object.assign(a,{phoneSignInInfo:{recaptchaToken:i,captchaResponse:f,clientType:h,recaptchaVersion:d}}),e.abrupt("return",a);case 23:return Object.assign(a,{recaptchaToken:i}),e.abrupt("return",a);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var vm=function(){function e(t){k(this,e),this.providerId=e.PROVIDER_ID,this.auth=hp(t)}return w(e,[{key:"verifyPhoneNumber",value:function(e,t){return fm(this.auth,e,oe(t))}}],[{key:"credential",value:function(e,t){return $p._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?$p._fromTokenResponse(n,r):null}}]),e}();function mm(e,t){return t?qd(t):(zh(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}vm.PROVIDER_ID="phone",vm.PHONE_SIGN_IN_METHOD="phone";var ym=function(e){x(n,e);var t=C(n);function n(e){var r;return k(this,n),(r=t.call(this,"custom","custom")).params=e,r}return w(n,[{key:"_getIdTokenResponse",value:function(e){return Bp(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return Bp(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return Bp(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(Pp);function gm(e){return mv(e.auth,new ym(e),e.bypassAuthState)}function km(e){var t=e.auth,n=e.user;return zh(n,t,"internal-error"),pv(n,new ym(e),e.bypassAuthState)}function bm(e){return wm.apply(this,arguments)}function wm(){return(wm=h(l().mark((function e(t){var n,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,zh(r=t.user,n,"internal-error"),e.abrupt("return",hv(r,new ym(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _m=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];k(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return w(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=h(l().mark((function t(n,r){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=h(l().mark((function e(t){var n,r,i,a,o,u,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return gm;case"linkViaPopup":case"linkViaRedirect":return bm;case"reauthViaPopup":case"reauthViaRedirect":return km;default:Mh(this.auth,"internal-error")}}},{key:"resolve",value:function(e){qh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){qh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),Em=new Qh(2e3,1e4);var xm=function(e){x(n,e);var t=C(n);function n(e,r,i,a,o){var u;return k(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=_(u),u}return w(n,[{key:"executeNotNull",value:function(){var e=h(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return zh(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=h(l().mark((function e(){var t,n=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qh(1===this.filter.length,"Popup operations only handle one event"),t=jv(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(Uh(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(Uh(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(Uh(e.auth,"popup-closed-by-user"))}),8e3):e.pollId=window.setTimeout(t,Em.get())}()}}]),n}(_m);xm.currentPopupAction=null;var Sm=new Map,Tm=function(e){x(n,e);var t=C(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return k(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return w(n,[{key:"execute",value:function(){var e=h(l().mark((function e(){var t,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Sm.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,Im(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,kt(S(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:Sm.set(this.auth._key(),t);case 21:return this.bypassAuthState||Sm.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=h(l().mark((function e(t){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",kt(S(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",kt(S(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=h(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(_m);function Im(e,t){return Cm.apply(this,arguments)}function Cm(){return(Cm=h(l().mark((function e(t,n){var r,i,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Rm(n),i=Am(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Nm(e,t){Sm.set(e._key(),t)}function Am(e){return qd(e._redirectPersistence)}function Rm(e){return Kd("pendingRedirect",e.config.apiKey,e.name)}function Pm(e,t){return Om.apply(this,arguments)}function Om(){return Om=h(l().mark((function e(t,n){var r,i,a,o,u,s=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]&&s[2],!Ye(t.app)){e.next=3;break}return e.abrupt("return",Promise.reject(Vh(t)));case 3:return i=hp(t),a=mm(i,n),o=new Tm(i,a,r),e.next=8,o.execute();case 8:if(!(u=e.sent)||r){e.next=15;break}return delete u.user._redirectEventId,e.next=13,i._persistUserIfCurrent(u.user);case 13:return e.next=15,i._setRedirectUser(null,n);case 15:return e.abrupt("return",u);case 16:case"end":return e.stop()}}),e)}))),Om.apply(this,arguments)}var Dm=function(){function e(t){k(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return w(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Mm(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!Mm(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Uh(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Lm(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(Lm(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function Lm(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function Mm(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function Um(e){return Fm.apply(this,arguments)}function Fm(){return Fm=h(l().mark((function e(t){var n,r=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",td(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),Fm.apply(this,arguments)}var Vm=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,jm=/^https?/;function zm(){return(zm=h(l().mark((function e(t){var n,r,i,a,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Um(t);case 4:n=e.sent,r=n.authorizedDomains,i=g(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!Bm(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:Mh(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])})))).apply(this,arguments)}function Bm(e){var t=Hh(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!jm.test(r))return!1;if(Vm.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var qm=new Qh(3e4,6e4);function Hm(){var e=Bv().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=d(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}function Wm(e){return new Promise((function(t,n){var r,i,a;function o(){Hm(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){Hm(),n(Uh(e,"network-request-failed"))},timeout:qm.get()})}if(null===(i=null===(r=Bv().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=Bv().gapi)||void 0===a?void 0:a.load)){var u=yp("iframefcb");return Bv()[u]=function(){gapi.load?o():n(Uh(e,"network-request-failed"))},vp("".concat(pp.gapiScript,"?onload=").concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw Km=null,e}))}var Km=null;function Gm(e){return Km=Km||Wm(e)}var Qm=new Qh(5e3,15e3),Ym={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Xm=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $m(e){var t=e.config;zh(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?Yh(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Ze},i=Xm.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(te(r).slice(1))}function Jm(e){return Zm.apply(this,arguments)}function Zm(){return Zm=h(l().mark((function e(t){var n,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gm(t);case 2:return n=e.sent,zh(r=Bv().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:$m(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ym,dontclear:!0},(function(e){return new Promise(function(){var n=h(l().mark((function n(r,i){var a,o,u;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){Bv().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=Uh(t,"network-request-failed"),o=Bv().setTimeout((function(){i(a)}),Qm.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),Zm.apply(this,arguments)}var ey={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ty="_blank",ny="http://localhost",ry=function(){function e(t){k(this,e),this.window=t,this.associatedEvent=null}return w(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function iy(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",c=Object.assign(Object.assign({},ey),{width:r.toString(),height:i.toString(),top:a,left:o}),l=H().toLowerCase();n&&(u=$d(l)?ty:n),Yd(l)&&(t=t||ny,c.scrollbars="yes");var f=Object.entries(c).reduce((function(e,t){var n=s(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(rp(l)&&"_self"!==u)return ay(t||"",u),new ry(null);var h=window.open(t||"",u,f);zh(h,e,"popup-blocked");try{h.focus()}catch(d){}return new ry(h)}function ay(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var oy=encodeURIComponent("fac");function uy(e,t,n,r,i,a){return sy.apply(this,arguments)}function sy(){return(sy=h(l().mark((function e(t,n,r,i,a,o){var u,c,f,h,d,p,v,m,y,g,k,b,w;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(zh(t.config.authDomain,t,"auth-domain-config-required"),zh(t.config.apiKey,t,"invalid-api-key"),u={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:i,v:Ze,eventId:a},n instanceof ev)for(n.setDefaultLanguage(t.languageCode),u.providerId=n.providerId||"",J(n.getCustomParameters())||(u.customParameters=JSON.stringify(n.getCustomParameters())),c=0,f=Object.entries(o||{});c<f.length;c++)h=s(f[c],2),d=h[0],p=h[1],u[d]=p;for(n instanceof tv&&(v=n.getScopes().filter((function(e){return""!==e}))).length>0&&(u.scopes=v.join(",")),t.tenantId&&(u.tid=t.tenantId),m=u,y=0,g=Object.keys(m);y<g.length;y++)k=g[y],void 0===m[k]&&delete m[k];return e.next=10,t._getAppCheckToken();case 10:return b=e.sent,w=b?"#".concat(oy,"=").concat(encodeURIComponent(b)):"",e.abrupt("return","".concat(cy(t),"?").concat(te(m).slice(1)).concat(w));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cy(e){var t=e.config;return t.emulator?Yh(t,"emulator/auth/handler"):"https://".concat(t.authDomain,"/").concat("__/auth/handler")}var ly="webStorageSupport",fy=function(){function e(){k(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Uv,this._completeRedirectFn=Pm,this._overrideRedirectResult=Nm}return w(e,[{key:"_openPopup",value:function(){var e=h(l().mark((function e(t,n,r,i){var a,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qh(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),e.next=3,uy(t,n,r,Hh(),i);case 3:return o=e.sent,e.abrupt("return",iy(t,o,jv()));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=h(l().mark((function e(t,n,r,i){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return e.next=4,uy(t,n,r,Hh(),i);case 4:return qv(e.sent),e.abrupt("return",new Promise((function(){})));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(qh(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=h(l().mark((function e(t){var n,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Jm(t);case 2:return n=e.sent,r=new Dm(t),n.register("authEvent",(function(e){return zh(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(ly,{type:ly},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),Mh(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return zm.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return ap()||Xd()||np()}}]),e}(),hy=fy,dy=function(){function e(t){k(this,e),this.factorId=t}return w(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Bh("unexpected MultiFactorSessionType")}}}]),e}(),py=function(e){x(n,e);var t=C(n);function n(e){var r;return k(this,n),(r=t.call(this,"phone")).credential=e,r}return w(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return td(e,"POST","/v2/accounts/mfaEnrollment:finalize",ed(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return td(e,"POST","/v2/accounts/mfaSignIn:finalize",ed(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(dy);(function(){function e(){k(this,e)}return w(e,null,[{key:"assertion",value:function(e){return py._fromCredential(e)}}]),e}()).FACTOR_ID="phone";var vy=function(){function e(){k(this,e)}return w(e,null,[{key:"assertionForEnrollment",value:function(e,t){return my._fromSecret(e,t)}},{key:"assertionForSignIn",value:function(e,t){return my._fromEnrollmentId(e,t)}},{key:"generateSecret",value:function(){var e=h(l().mark((function e(t){var n,r,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return zh("undefined"!==typeof(null===(n=(r=t).user)||void 0===n?void 0:n.auth),"internal-error"),e.next=4,a=r.user.auth,o={idToken:r.credential,totpEnrollmentInfo:{}},td(a,"POST","/v2/accounts/mfaEnrollment:start",ed(a,o));case 4:return i=e.sent,e.abrupt("return",yy._fromStartTotpMfaEnrollmentResponse(i,r.user.auth));case 6:case"end":return e.stop()}var a,o}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();vy.FACTOR_ID="totp";var my=function(e){x(n,e);var t=C(n);function n(e,r,i){var a;return k(this,n),(a=t.call(this,"totp")).otp=e,a.enrollmentId=r,a.secret=i,a}return w(n,[{key:"_finalizeEnroll",value:function(){var e=h(l().mark((function e(t,n,r){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return zh("undefined"!==typeof this.secret,t,"argument-error"),e.abrupt("return",Cv(t,{idToken:n,displayName:r,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)}));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_finalizeSignIn",value:function(){var e=h(l().mark((function e(t,n){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return zh(void 0!==this.enrollmentId&&void 0!==this.otp,t,"argument-error"),r={verificationCode:this.otp},e.abrupt("return",cm(t,{mfaPendingCredential:n,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:r}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}],[{key:"_fromSecret",value:function(e,t){return new n(t,void 0,e)}},{key:"_fromEnrollmentId",value:function(e,t){return new n(t,e)}}]),n}(dy),yy=function(){function e(t,n,r,i,a,o,u){k(this,e),this.sessionInfo=o,this.auth=u,this.secretKey=t,this.hashingAlgorithm=n,this.codeLength=r,this.codeIntervalSeconds=i,this.enrollmentCompletionDeadline=a}return w(e,[{key:"_makeTotpVerificationInfo",value:function(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}},{key:"generateQrCodeUrl",value:function(e,t){var n,r=!1;return(gy(e)||gy(t))&&(r=!0),r&&(gy(e)&&(e=(null===(n=this.auth.currentUser)||void 0===n?void 0:n.email)||"unknownuser"),gy(t)&&(t=this.auth.name)),"otpauth://totp/".concat(t,":").concat(e,"?secret=").concat(this.secretKey,"&issuer=").concat(t,"&algorithm=").concat(this.hashingAlgorithm,"&digits=").concat(this.codeLength)}}],[{key:"_fromStartTotpMfaEnrollmentResponse",value:function(t,n){return new e(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,n)}}]),e}();function gy(e){return"undefined"===typeof e||0===(null===e||void 0===e?void 0:e.length)}var ky="@firebase/auth",by="1.10.0",wy=function(){function e(t){k(this,e),this.auth=t,this.internalListeners=new Map}return w(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=h(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){zh(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var _y,Ey=z("authIdTokenMaxAge")||300,xy=null,Sy=function(e){return function(){var t=h(l().mark((function t(n){var r,i,a;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=n,!t.t0){t.next=5;break}return t.next=4,n.getIdTokenResult();case 4:t.t0=t.sent;case 5:if(r=t.t0,!((i=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3)&&i>Ey)){t.next=9;break}return t.abrupt("return");case 9:if(a=null===r||void 0===r?void 0:r.token,xy!==a){t.next=12;break}return t.abrupt("return");case 12:return xy=a,t.next=15,fetch(e,{method:a?"POST":"DELETE",headers:a?{Authorization:"Bearer ".concat(a)}:{}});case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};function Ty(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt(),t=Qe(e,"auth");if(t.isInitialized())return t.getImmediate();var n=Cp(e,{popupRedirectResolver:hy,persistence:[um,Pv,Uv]}),r=z("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){var i=new URL(r,location.origin);if(location.origin===i.origin){var a=Sy(i.toString());Tv(n,a,(function(){return a(n.currentUser)})),Sv(n,(function(e){return a(e)}))}}var o=F("auth");return o&&Np(n,"http://".concat(o)),n}function Iy(e){var t=e.text,n=e.handleSubmit;return(0,p.jsxs)("form",{onSubmit:n,children:[(0,p.jsx)("h1",{children:t}),(0,p.jsx)("input",{name:"username",type:"text",placeholder:"email"}),(0,p.jsx)("input",{name:"password",type:"password",placeholder:"password"}),(0,p.jsx)("input",{type:"submit"})]})}pp={loadJS:function(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=Uh("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},_y="Browser",Ge(new ue("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),o=r.options,u=o.apiKey,s=o.authDomain;zh(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});var c={apiKey:u,authDomain:s,clientPlatform:_y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:op(_y)},l=new fp(r,i,a,c);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(qd);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(l,n),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),Ge(new ue("auth-internal",(function(e){return function(e){return new wy(e)}(hp(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),nt(ky,by,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(_y)),nt(ky,by,"esm2017");var Cy=function(e){var t=e.setUser,n=e.setScreen,r=e.screen,i=e.style,a=function(){var e=h(l().mark((function e(r,i){var a,o,u;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Ty(),r.preventDefault(),o=r.target.elements,e.prev=3,!i){e.next=10;break}return Wf(Wl(wh,"players"),{name:o.username.value.slice(0,o.username.value.indexOf("@")).trim().toLowerCase()}),e.next=8,_v(a,o.username.value.trim().toLowerCase(),o.password.value.trim());case 8:e.next=12;break;case 10:return e.next=12,xv(a,o.username.value.trim().toLowerCase(),o.password.value.trim());case 12:u=o.username.value.indexOf("@"),t(o.username.value.slice(0,u).trim().toLowerCase()),r.target.reset(),n("selection"),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(3),alert("Incorrect username or password.");case 21:case 22:case"end":return e.stop()}}),e,null,[[3,18]])})));return function(t,n){return e.apply(this,arguments)}}();return(0,p.jsxs)("div",{className:"LoginScreen",style:i,children:[(0,p.jsx)(y,{onClick:function(){return n("home")},style:{float:"right"},text:"Home"}),"register"===r?(0,p.jsx)(Iy,{handleSubmit:function(){var e=h(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(t,!0);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),text:"Sign up"}):(0,p.jsx)(Iy,{handleSubmit:function(){var e=h(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(t,!1);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),text:"Login"})]})},Ny="#5ba3f0",Ay="#db4d4d";function Ry(e){var t=e.game,n=e.user,r=e.onClick,i=e.time,o=t.players[0]!==n?t.players[0]:t.players[1],u={border:"1px black solid",borderRadius:3,marginBottom:5,backgroundColor:n===t.players[1]?Ny:Ay,cursor:"pointer",opacity:t.turn===n?"100%":"60%",color:"black"},s=t.players[0]===n?0:1,c=t.scores[s]>=10;return t.finished?(0,p.jsxs)("div",{onClick:r,style:a(a({},u),{},{backgroundColor:"gray",opacity:"70%"}),children:[(0,p.jsx)("div",{children:(0,p.jsx)("b",{children:o})}),(0,p.jsxs)("div",{children:[c?"You":"They"," Won"]}),(0,p.jsxs)("div",{children:["Finished ",i]})]}):(0,p.jsxs)("div",{onClick:r,style:u,children:[(0,p.jsx)("div",{children:(0,p.jsx)("b",{children:o})}),(0,p.jsxs)("div",{children:[t.turn,"'s Turn"]}),(0,p.jsxs)("div",{children:["Last Move: ",i]})]})}function Py(t){var n=t.games,r=t.user,i=t.setGame,o=t.setGameId,u=t.setScreen,c=t.style,f=s((0,e.useState)([]),2),d=f[0],v=f[1],m=Ty(),g=function(){var e=h(l().mark((function e(){var t,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=If(Wl(wh,"players")),e.next=3,Hf(t);case 3:n=e.sent,v(n.docs.map((function(e){return a(a({},e.data()),{},{id:e.id})})).filter((function(e){return e.name!==r})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,e.useEffect)((function(){g()}),[]);var k=function(e,t){var n=e.map((function(e){for(var n=0,r=0;r<e.length;r++)r<t.length&&e.charAt(r)===t.charAt(r)&&n++;return n})),r=0;return n.forEach((function(e,t){e>n[r]&&(r=t)})),e[r]},b=function(){var e=h(l().mark((function e(t){var n,a,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!==(n=t.target.elements.opponent.value.trim().toLowerCase())){e.next=4;break}return e.abrupt("return");case 4:if(n.includes("@")&&(n=n.slice(0,n.indexOf("@"))),0!==d.filter((function(e){return e.name===n})).length){e.next=9;break}return a=d.map((function(e){return e.name})),alert("There is no account under the username "+n+". Perhaps you meant: "+k(a,n)),e.abrupt("return");case 9:return e.prev=9,e.next=12,Eh({user:r,opponent:n});case 12:s=e.sent,i(s.data),o(s.data.id),u("game"),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(9),console.error("Firebase failed in creating a new game: ".concat(e.t0.message,", ").concat(e.t0.details));case 21:case"end":return e.stop()}}),e,null,[[9,18]])})));return function(t){return e.apply(this,arguments)}}(),w=function(e){if(null===e.lastMove)return"";var t=e.lastMove.toDate().getTime(),n=(new Date).getTime(),r=Math.floor((n-t)/6e4);return r<1?"just now":r<60?"".concat(r," minutes ago"):r<1440?"".concat(Math.floor(r/60)," hours, ").concat(r%60," minutes ago"):"".concat(Math.floor(r/1440)," days, ").concat(Math.floor(r%1440/60)," hours, ").concat(r%60," minutes ago")};return(0,p.jsxs)("div",{style:c,children:[(0,p.jsx)(y,{onClick:function(){u("home"),function(e){oe(e).signOut()}(m)},text:"Log out",style:{float:"right"}}),(0,p.jsx)("div",{children:r}),(0,p.jsx)("h1",{style:{textAlign:"center"},children:"Games"}),(0,p.jsx)("ul",{style:{padding:5},children:n.map((function(e,t){return(0,p.jsx)(Ry,{onClick:function(){return function(e){i(e),o(e.id),u("game")}(e)},game:e,user:r,time:w(e)},t)}))}),(0,p.jsxs)("form",{onSubmit:b,children:[(0,p.jsx)("h1",{children:"Start New Game"}),(0,p.jsxs)("select",{name:"opponent",children:[(0,p.jsx)("option",{value:"",children:"Choose Opponent"}),d.map((function(e){return(0,p.jsx)("option",{value:e.name,children:e.name},e.id)}))]}),(0,p.jsx)("input",{type:"submit"})]})]})}function Oy(e){var t=e.setScreen,n=e.style;return(0,p.jsxs)("div",{style:a(a({},n),{},{textAlign:"center"}),children:[(0,p.jsx)("div",{style:{height:80}}),(0,p.jsx)(m,{turn:"",setWord:function(){},setBlocks:function(){},usedWords:[],players:[],blocks:function(){var e=function(){for(var e=["AAEEGN","ELRTTY","AOOTTW","ABBJOO","EHRTVW","CIMOTU","DISTTY","EIOSST","DELRVY","ACHOPS","HIMNQU","EEINSU","EEGHNW","AFFKPS","HLNNRZ","DEILRX","AAEEGN","ACHOPS","AFFKPS","DEILRX","DELRVY","EEGHNW","EIOSST","HIMNQU","HLNNRZ"],t=[];e.length>0;){var n=e.splice(Math.floor(Math.random()*e.length),1);t.push(n)}return t.map((function(e){return e[0].charAt(Math.floor(Math.random()*e[0].length))})).map((function(e,t){return{index:t,letter:e,allegiance:"none",clicked:!1}}))}().map((function(e){return e.clicked=!0,e}));return"word".toUpperCase().split("").forEach((function(t,n){e[5+n].allegiance="title",e[5+n].letter=t,e[5+n].clicked=!1})),"fight".toUpperCase().split("").forEach((function(t,n){e[10+n].allegiance="other",e[10+n].letter=t,e[10+n].clicked=!1})),e}(),user:"title"}),(0,p.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center"},children:[(0,p.jsx)(y,{onClick:function(){return t("login")},text:"Log in",style:{margin:10}}),(0,p.jsx)(y,{onClick:function(){return t("register")},text:"Register",style:{margin:10}}),(0,p.jsx)(y,{onClick:function(){return t("rules")},text:"Rules",style:{margin:10}})]})]})}function Dy(e){var t=e.setScreen,n=e.style;return(0,p.jsxs)("div",{style:n,children:[(0,p.jsx)(y,{text:"Home",onClick:function(){return t("home")},style:{float:"right"}}),(0,p.jsx)("h2",{style:{textAlign:"center",marginTop:0},children:"Rules"}),(0,p.jsx)("p",{children:"Wordfight is a simple word-based strategy game. Each player fights to control the board by creating words on their turn. The first player to 'own' 10 blocks wins."}),(0,p.jsx)("p",{children:"The game board is made up of 25 letter blocks, randomly generated each game. On their turn, the player uses the letters on the blocks to form any word they wish. Once they have submitted their word those blocks will turn the color of that player. When a block is completely surrounded by its color, that player now 'owns' that block. It can still be used by their opponent, but the ownership of the block will not be changed unless the ownership of the surrounding blocks is changed first."}),(0,p.jsx)("p",{children:"As stated before, to win you must have 10 of these enclosed blocks at one time. At that point the game immediately ends."}),(0,p.jsx)("p",{}),(0,p.jsx)("p",{children:"In addition: a block cannot be used twice in one word and no word can be repeated in the same game."}),(0,p.jsx)("p",{children:"To get Started: After creating an account and having a friend create an account, enter their username in the selection screen to create a game with them!"})]})}var Ly={backgroundColor:"rgb(212, 175, 97)",minHeight:"100vh",marginTop:0,color:"black"};var My=function(){var t=s((0,e.useState)(""),2),n=t[0],r=t[1],i=s((0,e.useState)([]),2),o=i[0],u=i[1],c=s((0,e.useState)({}),2),f=c[0],d=c[1],v=s((0,e.useState)(""),2),m=v[0],y=v[1],g=s((0,e.useState)("home"),2),k=g[0],b=g[1];!function(e,t,n,r){oe(e).onAuthStateChanged(t,n,r)}(Ty(),(function(e){if(e&&""===n){var t=e.email.indexOf("@");r(e.email.slice(0,t).trim().toLowerCase()),w(e.email.slice(0,t).trim().toLowerCase()),b("selection")}else""!==n&&void 0===e&&(r(""),b("home"))}));var w=function(e){try{var t=new Date;t.setDate((new Date).getDate()-1);var n=mn.fromDate(t),r=If(Wl(wh,"games"),function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.forEach((function(e){return Lf("and",e)})),Af._create("and",t)}(Nf("players","array-contains",e),function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.forEach((function(e){return Lf("or",e)})),Af._create("or",t)}(Nf("finished","==",!1),Nf("lastMove",">=",n))),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Ef("orderBy",e);return Rf._create(n,t)}("lastMove","desc"));!function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=oe(e);var u={includeMetadataChanges:!1,source:"default"},s=0;"object"!=typeof n[s]||Ql(n[s])||(u=n[s],s++);var c,f,d,p={includeMetadataChanges:u.includeMetadataChanges,source:u.source};if(Ql(n[s])){var v=n[s];n[s]=null===(i=v.next)||void 0===i?void 0:i.bind(v),n[s+1]=null===(a=v.error)||void 0===a?void 0:a.bind(v),n[s+2]=null===(o=v.complete)||void 0===o?void 0:o.bind(v)}if(e instanceof ql)f=Ul(e.firestore,Yl),d=zi(e._key.path),c={next:function(t){n[s]&&n[s](Gf(f,e,t))},error:n[s+1],complete:n[s+2]};else{var m=Ul(e,Bl);f=Ul(m.firestore,Yl),d=m._query;var y=new qf(f);c={next:function(e){n[s]&&n[s](new zf(f,y,m,e))},error:n[s+1],complete:n[s+2]},xf(e._query)}(function(e,t,n,r){var i=new ml(r),a=new _c(t,i,n);e.asyncQueue.enqueueAndForget(h(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=vc,t.next=3,Cl(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))})(Xl(f),d,p,c)}(r,(function(e){var t=[];e.forEach((function(e){t.push(a(a({},e.data()),{},{id:e.id}))})),u(t)}))}catch(i){console.log(i),alert("unable to connect to firebase: "+i)}};switch((0,e.useEffect)((function(){w(n)}),[]),k){case"home":return(0,p.jsx)(Oy,{setScreen:b,style:Ly});case"login":case"register":return(0,p.jsx)(Cy,{setScreen:b,style:Ly,screen:k,setUser:r});case"selection":return(0,p.jsx)(Py,{games:o,user:n,setGame:d,style:Ly,setScreen:b,setGameId:y});case"game":return(0,p.jsx)(Ih,{user:n,game:f,setGame:d,gameId:m,style:Ly,setGameId:y,setScreen:b});case"rules":return(0,p.jsx)(Dy,{style:Ly,setScreen:b});default:return(0,p.jsx)("p",{children:"Error: Didn't switch to an actual page."})}},Uy=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))};t.createRoot(document.getElementById("root")).render((0,p.jsx)(e.StrictMode,{children:(0,p.jsx)(My,{})})),Uy()}()}();
//# sourceMappingURL=main.5b4e4b2b.js.map